[{
  "comments": [{
    "author": {
      "login": "srowen"
    },
    "body": "This actually won't test the check for negative indices, because the indices are missorted.\n",
    "commit": "b291423eedb0d29e9006e2db93f39a1a4af9dfb5",
    "createdAt": "2016-08-10T08:57:16Z",
    "diffHunk": "@@ -72,6 +72,12 @@ class VectorsSuite extends SparkMLFunSuite {\n     }\n   }\n \n+  test(\"sparse vector construction with negative indices\") {\n+    intercept[IllegalArgumentException] {\n+      Vectors.sparse(3, Array(1, -2), Array(3.0, 5.0))"
  }],
  "prId": 14555
}, {
  "comments": [{
    "author": {
      "login": "srowen"
    },
    "body": "Lastly, I believe, do we have a test that exercises the check for missorted indices? I don't see one; I suppose one should have been added before.\n\nSame for Python.\n\nI'm OK with the error messages, but now seeing that Python has parallel checks, it'd be nice to make the error messages match.\n",
    "commit": "b291423eedb0d29e9006e2db93f39a1a4af9dfb5",
    "createdAt": "2016-08-11T09:54:02Z",
    "diffHunk": "@@ -72,6 +72,12 @@ class VectorsSuite extends SparkMLFunSuite {\n     }\n   }\n \n+  test(\"sparse vector construction with negative indices\") {\n+    intercept[IllegalArgumentException] {\n+      Vectors.sparse(3, Array(-1, 1), Array(3.0, 5.0))\n+    }\n+  }\n+",
    "line": 9
  }, {
    "author": {
      "login": "zjffdu"
    },
    "body": "For now, it is assumed the indices are in order. https://github.com/apache/spark/blob/master/mllib-local/src/main/scala/org/apache/spark/ml/linalg/Vectors.scala#L554\n",
    "commit": "b291423eedb0d29e9006e2db93f39a1a4af9dfb5",
    "createdAt": "2016-08-11T10:05:17Z",
    "diffHunk": "@@ -72,6 +72,12 @@ class VectorsSuite extends SparkMLFunSuite {\n     }\n   }\n \n+  test(\"sparse vector construction with negative indices\") {\n+    intercept[IllegalArgumentException] {\n+      Vectors.sparse(3, Array(-1, 1), Array(3.0, 5.0))\n+    }\n+  }\n+",
    "line": 9
  }, {
    "author": {
      "login": "srowen"
    },
    "body": "... but https://github.com/apache/spark/blob/master/mllib-local/src/main/scala/org/apache/spark/ml/linalg/Vectors.scala#L210 does not assume this and that's the method to test.\n",
    "commit": "b291423eedb0d29e9006e2db93f39a1a4af9dfb5",
    "createdAt": "2016-08-11T10:08:19Z",
    "diffHunk": "@@ -72,6 +72,12 @@ class VectorsSuite extends SparkMLFunSuite {\n     }\n   }\n \n+  test(\"sparse vector construction with negative indices\") {\n+    intercept[IllegalArgumentException] {\n+      Vectors.sparse(3, Array(-1, 1), Array(3.0, 5.0))\n+    }\n+  }\n+",
    "line": 9
  }],
  "prId": 14555
}]