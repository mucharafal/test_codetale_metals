[{
  "comments": [{
    "author": {
      "login": "JoshRosen"
    },
    "body": "Not a bash expert, but should this be using something like `if [ -d \"$HIVE_HOME\" ];` to check that it's actually a directory and exists, similar to how we check for the existence of the assembly directory in https://github.com/apache/spark/blob/5952bdb7df20d007d59f82261095faca3822c6f6/bin/spark-class#L51?\n",
    "commit": "72b88b20c93ba127343e2340cfad6358da9f2806",
    "createdAt": "2015-10-06T20:16:49Z",
    "diffHunk": "@@ -20,10 +20,12 @@\n # When creating new tests for Spark SQL Hive, the HADOOP_CLASSPATH must contain the hive jars so\n # that we can run Hive to generate the golden answer.  This is not required for normal development\n # or testing.\n-for i in \"$HIVE_HOME\"/lib/*\n-do HADOOP_CLASSPATH=\"$HADOOP_CLASSPATH:$i\"\n-done\n-export HADOOP_CLASSPATH\n+if [ \"$HIVE_HOME\" ]; then"
  }, {
    "author": {
      "login": "kevincox"
    },
    "body": "I really don't know. I was thinking \"If you set the variable we will try to use it\" plus if isn't correct the wild card will expand to nothing anyways. The other option is to warn if `HIVE_HOME` is set but doesn't point to a directory. I'm not too convinced either way but the way it is now makes sense to me. Although the warning won't hurt.\n",
    "commit": "72b88b20c93ba127343e2340cfad6358da9f2806",
    "createdAt": "2015-10-06T20:44:56Z",
    "diffHunk": "@@ -20,10 +20,12 @@\n # When creating new tests for Spark SQL Hive, the HADOOP_CLASSPATH must contain the hive jars so\n # that we can run Hive to generate the golden answer.  This is not required for normal development\n # or testing.\n-for i in \"$HIVE_HOME\"/lib/*\n-do HADOOP_CLASSPATH=\"$HADOOP_CLASSPATH:$i\"\n-done\n-export HADOOP_CLASSPATH\n+if [ \"$HIVE_HOME\" ]; then"
  }, {
    "author": {
      "login": "JoshRosen"
    },
    "body": "Yeah, I only commented because I'm actually somewhat wary of bash-isms and http://unix.stackexchange.com/a/32211/42294 came to mind.\n",
    "commit": "72b88b20c93ba127343e2340cfad6358da9f2806",
    "createdAt": "2015-10-06T21:11:32Z",
    "diffHunk": "@@ -20,10 +20,12 @@\n # When creating new tests for Spark SQL Hive, the HADOOP_CLASSPATH must contain the hive jars so\n # that we can run Hive to generate the golden answer.  This is not required for normal development\n # or testing.\n-for i in \"$HIVE_HOME\"/lib/*\n-do HADOOP_CLASSPATH=\"$HADOOP_CLASSPATH:$i\"\n-done\n-export HADOOP_CLASSPATH\n+if [ \"$HIVE_HOME\" ]; then"
  }, {
    "author": {
      "login": "kevincox"
    },
    "body": "I think I'm good here because it is in quotes so it will always be an argument. However there is actually a problem if there is a leading `-` in the variable so I will update to prevent that.\n",
    "commit": "72b88b20c93ba127343e2340cfad6358da9f2806",
    "createdAt": "2015-10-06T23:25:35Z",
    "diffHunk": "@@ -20,10 +20,12 @@\n # When creating new tests for Spark SQL Hive, the HADOOP_CLASSPATH must contain the hive jars so\n # that we can run Hive to generate the golden answer.  This is not required for normal development\n # or testing.\n-for i in \"$HIVE_HOME\"/lib/*\n-do HADOOP_CLASSPATH=\"$HADOOP_CLASSPATH:$i\"\n-done\n-export HADOOP_CLASSPATH\n+if [ \"$HIVE_HOME\" ]; then"
  }],
  "prId": 8994
}, {
  "comments": [{
    "author": {
      "login": "JoshRosen"
    },
    "body": "It looks like these lines might be indented using using tabs instead of spaces; I'll just fix this myself on merge.\n",
    "commit": "72b88b20c93ba127343e2340cfad6358da9f2806",
    "createdAt": "2015-10-07T16:50:48Z",
    "diffHunk": "@@ -20,10 +20,12 @@\n # When creating new tests for Spark SQL Hive, the HADOOP_CLASSPATH must contain the hive jars so\n # that we can run Hive to generate the golden answer.  This is not required for normal development\n # or testing.\n-for i in \"$HIVE_HOME\"/lib/*\n-do HADOOP_CLASSPATH=\"$HADOOP_CLASSPATH:$i\"\n-done\n-export HADOOP_CLASSPATH\n+if [ -n \"$HIVE_HOME\" ]; then\n+\tfor i in \"$HIVE_HOME\"/lib/*",
    "line": 9
  }],
  "prId": 8994
}]