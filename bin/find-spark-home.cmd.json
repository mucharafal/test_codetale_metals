[{
  "comments": [{
    "author": {
      "login": "HyukjinKwon"
    },
    "body": "Would we be possible to resemble and follow the order of those codes in https://github.com/apache/spark/blob/master/bin/find-spark-home as possible as we can so that we can fix it up together in the future?",
    "commit": "b58f74054f9c02b0548254984dfe46516fe14e18",
    "createdAt": "2017-10-08T13:13:40Z",
    "diffHunk": "@@ -0,0 +1,44 @@\n+@echo off\n+\n+rem\n+rem Licensed to the Apache Software Foundation (ASF) under one or more\n+rem contributor license agreements.  See the NOTICE file distributed with\n+rem this work for additional information regarding copyright ownership.\n+rem The ASF licenses this file to You under the Apache License, Version 2.0\n+rem (the \"License\"); you may not use this file except in compliance with\n+rem the License.  You may obtain a copy of the License at\n+rem\n+rem    http://www.apache.org/licenses/LICENSE-2.0\n+rem\n+rem Unless required by applicable law or agreed to in writing, software\n+rem distributed under the License is distributed on an \"AS IS\" BASIS,\n+rem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+rem See the License for the specific language governing permissions and\n+rem limitations under the License.\n+rem\n+\n+rem Path to Python script finding SPARK_HOME\n+set FIND_SPARK_HOME_SCRIPT=%~dp0find_spark_home.py\n+\n+rem Default to standard python interpreter unless told otherwise\n+set PYTHON_RUNNER=python"
  }, {
    "author": {
      "login": "HyukjinKwon"
    },
    "body": "It should be easy for reviewers to double check too I guess.",
    "commit": "b58f74054f9c02b0548254984dfe46516fe14e18",
    "createdAt": "2017-10-08T13:15:21Z",
    "diffHunk": "@@ -0,0 +1,44 @@\n+@echo off\n+\n+rem\n+rem Licensed to the Apache Software Foundation (ASF) under one or more\n+rem contributor license agreements.  See the NOTICE file distributed with\n+rem this work for additional information regarding copyright ownership.\n+rem The ASF licenses this file to You under the Apache License, Version 2.0\n+rem (the \"License\"); you may not use this file except in compliance with\n+rem the License.  You may obtain a copy of the License at\n+rem\n+rem    http://www.apache.org/licenses/LICENSE-2.0\n+rem\n+rem Unless required by applicable law or agreed to in writing, software\n+rem distributed under the License is distributed on an \"AS IS\" BASIS,\n+rem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+rem See the License for the specific language governing permissions and\n+rem limitations under the License.\n+rem\n+\n+rem Path to Python script finding SPARK_HOME\n+set FIND_SPARK_HOME_SCRIPT=%~dp0find_spark_home.py\n+\n+rem Default to standard python interpreter unless told otherwise\n+set PYTHON_RUNNER=python"
  }, {
    "author": {
      "login": "jsnowacki"
    },
    "body": "The order is different due to the limitations of CMDs. First, the variables are not correctly evaluated in side blocks of code in parenthesis; see [this post](https://superuser.com/questions/78496/variables-in-batch-file-not-being-set-when-inside-if). Second, there is no `else if` notion. I could do nested ifs but than I'll have the variable issue again. I tried to be as close to the original one as possible.",
    "commit": "b58f74054f9c02b0548254984dfe46516fe14e18",
    "createdAt": "2017-10-08T13:57:43Z",
    "diffHunk": "@@ -0,0 +1,44 @@\n+@echo off\n+\n+rem\n+rem Licensed to the Apache Software Foundation (ASF) under one or more\n+rem contributor license agreements.  See the NOTICE file distributed with\n+rem this work for additional information regarding copyright ownership.\n+rem The ASF licenses this file to You under the Apache License, Version 2.0\n+rem (the \"License\"); you may not use this file except in compliance with\n+rem the License.  You may obtain a copy of the License at\n+rem\n+rem    http://www.apache.org/licenses/LICENSE-2.0\n+rem\n+rem Unless required by applicable law or agreed to in writing, software\n+rem distributed under the License is distributed on an \"AS IS\" BASIS,\n+rem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+rem See the License for the specific language governing permissions and\n+rem limitations under the License.\n+rem\n+\n+rem Path to Python script finding SPARK_HOME\n+set FIND_SPARK_HOME_SCRIPT=%~dp0find_spark_home.py\n+\n+rem Default to standard python interpreter unless told otherwise\n+set PYTHON_RUNNER=python"
  }, {
    "author": {
      "login": "HyukjinKwon"
    },
    "body": "Thanks for elaborating it. Will check out soon.",
    "commit": "b58f74054f9c02b0548254984dfe46516fe14e18",
    "createdAt": "2017-10-17T06:52:18Z",
    "diffHunk": "@@ -0,0 +1,44 @@\n+@echo off\n+\n+rem\n+rem Licensed to the Apache Software Foundation (ASF) under one or more\n+rem contributor license agreements.  See the NOTICE file distributed with\n+rem this work for additional information regarding copyright ownership.\n+rem The ASF licenses this file to You under the Apache License, Version 2.0\n+rem (the \"License\"); you may not use this file except in compliance with\n+rem the License.  You may obtain a copy of the License at\n+rem\n+rem    http://www.apache.org/licenses/LICENSE-2.0\n+rem\n+rem Unless required by applicable law or agreed to in writing, software\n+rem distributed under the License is distributed on an \"AS IS\" BASIS,\n+rem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+rem See the License for the specific language governing permissions and\n+rem limitations under the License.\n+rem\n+\n+rem Path to Python script finding SPARK_HOME\n+set FIND_SPARK_HOME_SCRIPT=%~dp0find_spark_home.py\n+\n+rem Default to standard python interpreter unless told otherwise\n+set PYTHON_RUNNER=python"
  }],
  "prId": 19370
}, {
  "comments": [{
    "author": {
      "login": "HyukjinKwon"
    },
    "body": "Could we just do this `if \"%SPARK_HOME%\"==\"\"`?",
    "commit": "b58f74054f9c02b0548254984dfe46516fe14e18",
    "createdAt": "2017-10-22T13:05:32Z",
    "diffHunk": "@@ -0,0 +1,44 @@\n+@echo off\n+\n+rem\n+rem Licensed to the Apache Software Foundation (ASF) under one or more\n+rem contributor license agreements.  See the NOTICE file distributed with\n+rem this work for additional information regarding copyright ownership.\n+rem The ASF licenses this file to You under the Apache License, Version 2.0\n+rem (the \"License\"); you may not use this file except in compliance with\n+rem the License.  You may obtain a copy of the License at\n+rem\n+rem    http://www.apache.org/licenses/LICENSE-2.0\n+rem\n+rem Unless required by applicable law or agreed to in writing, software\n+rem distributed under the License is distributed on an \"AS IS\" BASIS,\n+rem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+rem See the License for the specific language governing permissions and\n+rem limitations under the License.\n+rem\n+\n+rem Path to Python script finding SPARK_HOME\n+set FIND_SPARK_HOME_SCRIPT=%~dp0find_spark_home.py\n+\n+rem Default to standard python interpreter unless told otherwise\n+set PYTHON_RUNNER=python\n+if not \"x%PYSPARK_DRIVER_PYTHON%\" ==\"x\" (\n+  set PYTHON_RUNNER=%PYSPARK_DRIVER_PYTHON%\n+)\n+\n+rem Only attempt to find SPARK_HOME if it is not set.\n+if \"x%SPARK_HOME%\"==\"x\" ("
  }, {
    "author": {
      "login": "jsnowacki"
    },
    "body": "Well, not sure to be honest. This is a convention of CMD files and I just suck to it. In different CMD files you have similar comparison. ",
    "commit": "b58f74054f9c02b0548254984dfe46516fe14e18",
    "createdAt": "2017-10-30T17:09:26Z",
    "diffHunk": "@@ -0,0 +1,44 @@\n+@echo off\n+\n+rem\n+rem Licensed to the Apache Software Foundation (ASF) under one or more\n+rem contributor license agreements.  See the NOTICE file distributed with\n+rem this work for additional information regarding copyright ownership.\n+rem The ASF licenses this file to You under the Apache License, Version 2.0\n+rem (the \"License\"); you may not use this file except in compliance with\n+rem the License.  You may obtain a copy of the License at\n+rem\n+rem    http://www.apache.org/licenses/LICENSE-2.0\n+rem\n+rem Unless required by applicable law or agreed to in writing, software\n+rem distributed under the License is distributed on an \"AS IS\" BASIS,\n+rem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+rem See the License for the specific language governing permissions and\n+rem limitations under the License.\n+rem\n+\n+rem Path to Python script finding SPARK_HOME\n+set FIND_SPARK_HOME_SCRIPT=%~dp0find_spark_home.py\n+\n+rem Default to standard python interpreter unless told otherwise\n+set PYTHON_RUNNER=python\n+if not \"x%PYSPARK_DRIVER_PYTHON%\" ==\"x\" (\n+  set PYTHON_RUNNER=%PYSPARK_DRIVER_PYTHON%\n+)\n+\n+rem Only attempt to find SPARK_HOME if it is not set.\n+if \"x%SPARK_HOME%\"==\"x\" ("
  }],
  "prId": 19370
}, {
  "comments": [{
    "author": {
      "login": "HyukjinKwon"
    },
    "body": "`PYSPARK_PYTHON` is a valid env. Could we consider this env too?",
    "commit": "b58f74054f9c02b0548254984dfe46516fe14e18",
    "createdAt": "2017-10-22T13:17:58Z",
    "diffHunk": "@@ -0,0 +1,44 @@\n+@echo off\n+\n+rem\n+rem Licensed to the Apache Software Foundation (ASF) under one or more\n+rem contributor license agreements.  See the NOTICE file distributed with\n+rem this work for additional information regarding copyright ownership.\n+rem The ASF licenses this file to You under the Apache License, Version 2.0\n+rem (the \"License\"); you may not use this file except in compliance with\n+rem the License.  You may obtain a copy of the License at\n+rem\n+rem    http://www.apache.org/licenses/LICENSE-2.0\n+rem\n+rem Unless required by applicable law or agreed to in writing, software\n+rem distributed under the License is distributed on an \"AS IS\" BASIS,\n+rem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+rem See the License for the specific language governing permissions and\n+rem limitations under the License.\n+rem\n+\n+rem Path to Python script finding SPARK_HOME\n+set FIND_SPARK_HOME_SCRIPT=%~dp0find_spark_home.py\n+\n+rem Default to standard python interpreter unless told otherwise\n+set PYTHON_RUNNER=python\n+if not \"x%PYSPARK_DRIVER_PYTHON%\" ==\"x\" (\n+  set PYTHON_RUNNER=%PYSPARK_DRIVER_PYTHON%"
  }, {
    "author": {
      "login": "jsnowacki"
    },
    "body": "This is how it is done in `find-spark-home` (bash). I can extend it but it will be different than the original. Also, since there is not `else if` this creates a cascade of ifs. Nonetheless, I can somehow add it.",
    "commit": "b58f74054f9c02b0548254984dfe46516fe14e18",
    "createdAt": "2017-10-30T17:12:33Z",
    "diffHunk": "@@ -0,0 +1,44 @@\n+@echo off\n+\n+rem\n+rem Licensed to the Apache Software Foundation (ASF) under one or more\n+rem contributor license agreements.  See the NOTICE file distributed with\n+rem this work for additional information regarding copyright ownership.\n+rem The ASF licenses this file to You under the Apache License, Version 2.0\n+rem (the \"License\"); you may not use this file except in compliance with\n+rem the License.  You may obtain a copy of the License at\n+rem\n+rem    http://www.apache.org/licenses/LICENSE-2.0\n+rem\n+rem Unless required by applicable law or agreed to in writing, software\n+rem distributed under the License is distributed on an \"AS IS\" BASIS,\n+rem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+rem See the License for the specific language governing permissions and\n+rem limitations under the License.\n+rem\n+\n+rem Path to Python script finding SPARK_HOME\n+set FIND_SPARK_HOME_SCRIPT=%~dp0find_spark_home.py\n+\n+rem Default to standard python interpreter unless told otherwise\n+set PYTHON_RUNNER=python\n+if not \"x%PYSPARK_DRIVER_PYTHON%\" ==\"x\" (\n+  set PYTHON_RUNNER=%PYSPARK_DRIVER_PYTHON%"
  }],
  "prId": 19370
}, {
  "comments": [{
    "author": {
      "login": "HyukjinKwon"
    },
    "body": "ditto",
    "commit": "b58f74054f9c02b0548254984dfe46516fe14e18",
    "createdAt": "2017-10-22T13:18:17Z",
    "diffHunk": "@@ -0,0 +1,44 @@\n+@echo off\n+\n+rem\n+rem Licensed to the Apache Software Foundation (ASF) under one or more\n+rem contributor license agreements.  See the NOTICE file distributed with\n+rem this work for additional information regarding copyright ownership.\n+rem The ASF licenses this file to You under the Apache License, Version 2.0\n+rem (the \"License\"); you may not use this file except in compliance with\n+rem the License.  You may obtain a copy of the License at\n+rem\n+rem    http://www.apache.org/licenses/LICENSE-2.0\n+rem\n+rem Unless required by applicable law or agreed to in writing, software\n+rem distributed under the License is distributed on an \"AS IS\" BASIS,\n+rem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+rem See the License for the specific language governing permissions and\n+rem limitations under the License.\n+rem\n+\n+rem Path to Python script finding SPARK_HOME\n+set FIND_SPARK_HOME_SCRIPT=%~dp0find_spark_home.py\n+\n+rem Default to standard python interpreter unless told otherwise\n+set PYTHON_RUNNER=python\n+if not \"x%PYSPARK_DRIVER_PYTHON%\" ==\"x\" ("
  }],
  "prId": 19370
}, {
  "comments": [{
    "author": {
      "login": "HyukjinKwon"
    },
    "body": "Should we maybe add `\"delims=\"` (`for /f \"delims=\" %%i`) to overwrite the default space and tab delimiters?",
    "commit": "b58f74054f9c02b0548254984dfe46516fe14e18",
    "createdAt": "2017-10-22T13:42:50Z",
    "diffHunk": "@@ -0,0 +1,44 @@\n+@echo off\n+\n+rem\n+rem Licensed to the Apache Software Foundation (ASF) under one or more\n+rem contributor license agreements.  See the NOTICE file distributed with\n+rem this work for additional information regarding copyright ownership.\n+rem The ASF licenses this file to You under the Apache License, Version 2.0\n+rem (the \"License\"); you may not use this file except in compliance with\n+rem the License.  You may obtain a copy of the License at\n+rem\n+rem    http://www.apache.org/licenses/LICENSE-2.0\n+rem\n+rem Unless required by applicable law or agreed to in writing, software\n+rem distributed under the License is distributed on an \"AS IS\" BASIS,\n+rem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+rem See the License for the specific language governing permissions and\n+rem limitations under the License.\n+rem\n+\n+rem Path to Python script finding SPARK_HOME\n+set FIND_SPARK_HOME_SCRIPT=%~dp0find_spark_home.py\n+\n+rem Default to standard python interpreter unless told otherwise\n+set PYTHON_RUNNER=python\n+if not \"x%PYSPARK_DRIVER_PYTHON%\" ==\"x\" (\n+  set PYTHON_RUNNER=%PYSPARK_DRIVER_PYTHON%\n+)\n+\n+rem Only attempt to find SPARK_HOME if it is not set.\n+if \"x%SPARK_HOME%\"==\"x\" (\n+  rem We are pip installed, use the Python script to resolve a reasonable SPARK_HOME\n+  if exist \"%FIND_SPARK_HOME_SCRIPT%\" (\n+    rem If there is no python installed it will fail with message:\n+    rem 'python' is not recognized as an internal or external command,\n+    for /f %%i in ('%PYTHON_RUNNER% %FIND_SPARK_HOME_SCRIPT%') do set SPARK_HOME=%%i"
  }, {
    "author": {
      "login": "jsnowacki"
    },
    "body": "Valid observation; I'll add it.",
    "commit": "b58f74054f9c02b0548254984dfe46516fe14e18",
    "createdAt": "2017-10-30T17:14:54Z",
    "diffHunk": "@@ -0,0 +1,44 @@\n+@echo off\n+\n+rem\n+rem Licensed to the Apache Software Foundation (ASF) under one or more\n+rem contributor license agreements.  See the NOTICE file distributed with\n+rem this work for additional information regarding copyright ownership.\n+rem The ASF licenses this file to You under the Apache License, Version 2.0\n+rem (the \"License\"); you may not use this file except in compliance with\n+rem the License.  You may obtain a copy of the License at\n+rem\n+rem    http://www.apache.org/licenses/LICENSE-2.0\n+rem\n+rem Unless required by applicable law or agreed to in writing, software\n+rem distributed under the License is distributed on an \"AS IS\" BASIS,\n+rem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+rem See the License for the specific language governing permissions and\n+rem limitations under the License.\n+rem\n+\n+rem Path to Python script finding SPARK_HOME\n+set FIND_SPARK_HOME_SCRIPT=%~dp0find_spark_home.py\n+\n+rem Default to standard python interpreter unless told otherwise\n+set PYTHON_RUNNER=python\n+if not \"x%PYSPARK_DRIVER_PYTHON%\" ==\"x\" (\n+  set PYTHON_RUNNER=%PYSPARK_DRIVER_PYTHON%\n+)\n+\n+rem Only attempt to find SPARK_HOME if it is not set.\n+if \"x%SPARK_HOME%\"==\"x\" (\n+  rem We are pip installed, use the Python script to resolve a reasonable SPARK_HOME\n+  if exist \"%FIND_SPARK_HOME_SCRIPT%\" (\n+    rem If there is no python installed it will fail with message:\n+    rem 'python' is not recognized as an internal or external command,\n+    for /f %%i in ('%PYTHON_RUNNER% %FIND_SPARK_HOME_SCRIPT%') do set SPARK_HOME=%%i"
  }],
  "prId": 19370
}, {
  "comments": [{
    "author": {
      "login": "HyukjinKwon"
    },
    "body": "Hm.. actually, looks we deal with `PYSPARK_PYTHON`:\r\n\r\nhttps://github.com/apache/spark/blob/a36a76ac43c36a3b897a748bd9f138b629dbc684/bin/find-spark-home#L38\r\n\r\n```bash\r\n$ PYSPARK_PYTHON=python3\r\n$ echo ${PYSPARK_PYTHON:-\"python\"}\r\npython3\r\n```\r\n\r\n```bash\r\n$ echo ${PYSPARK_PYTHON:-\"python\"}\r\npython\r\n```",
    "commit": "b58f74054f9c02b0548254984dfe46516fe14e18",
    "createdAt": "2017-11-02T02:33:52Z",
    "diffHunk": "@@ -0,0 +1,44 @@\n+@echo off\n+\n+rem\n+rem Licensed to the Apache Software Foundation (ASF) under one or more\n+rem contributor license agreements.  See the NOTICE file distributed with\n+rem this work for additional information regarding copyright ownership.\n+rem The ASF licenses this file to You under the Apache License, Version 2.0\n+rem (the \"License\"); you may not use this file except in compliance with\n+rem the License.  You may obtain a copy of the License at\n+rem\n+rem    http://www.apache.org/licenses/LICENSE-2.0\n+rem\n+rem Unless required by applicable law or agreed to in writing, software\n+rem distributed under the License is distributed on an \"AS IS\" BASIS,\n+rem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+rem See the License for the specific language governing permissions and\n+rem limitations under the License.\n+rem\n+\n+rem Path to Python script finding SPARK_HOME\n+set FIND_SPARK_HOME_SCRIPT=%~dp0find_spark_home.py\n+\n+rem Default to standard python interpreter unless told otherwise\n+set PYTHON_RUNNER=python\n+if not \"x%PYSPARK_DRIVER_PYTHON%\" ==\"x\" (\n+  set PYTHON_RUNNER=%PYSPARK_DRIVER_PYTHON%\n+)\n+\n+rem Only attempt to find SPARK_HOME if it is not set.\n+if \"x%SPARK_HOME%\"==\"x\" (\n+  rem We are pip installed, use the Python script to resolve a reasonable SPARK_HOME\n+  if exist \"%FIND_SPARK_HOME_SCRIPT%\" (\n+    rem If there is no python installed it will fail with message:\n+    rem 'python' is not recognized as an internal or external command,\n+    for /f \"delims=\" %%i in ('%PYTHON_RUNNER% %FIND_SPARK_HOME_SCRIPT%') do set SPARK_HOME=%%i"
  }],
  "prId": 19370
}, {
  "comments": [{
    "author": {
      "login": "HyukjinKwon"
    },
    "body": "`FIND_SPARK_HOME_SCRIPT` -> `FIND_SPARK_HOME_PYTHON_SCRIPT` to be consistent with:\r\n\r\nhttps://github.com/apache/spark/blob/a36a76ac43c36a3b897a748bd9f138b629dbc684/bin/find-spark-home#L22",
    "commit": "b58f74054f9c02b0548254984dfe46516fe14e18",
    "createdAt": "2017-11-02T02:46:47Z",
    "diffHunk": "@@ -0,0 +1,44 @@\n+@echo off\n+\n+rem\n+rem Licensed to the Apache Software Foundation (ASF) under one or more\n+rem contributor license agreements.  See the NOTICE file distributed with\n+rem this work for additional information regarding copyright ownership.\n+rem The ASF licenses this file to You under the Apache License, Version 2.0\n+rem (the \"License\"); you may not use this file except in compliance with\n+rem the License.  You may obtain a copy of the License at\n+rem\n+rem    http://www.apache.org/licenses/LICENSE-2.0\n+rem\n+rem Unless required by applicable law or agreed to in writing, software\n+rem distributed under the License is distributed on an \"AS IS\" BASIS,\n+rem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+rem See the License for the specific language governing permissions and\n+rem limitations under the License.\n+rem\n+\n+rem Path to Python script finding SPARK_HOME\n+set FIND_SPARK_HOME_SCRIPT=%~dp0find_spark_home.py\n+\n+rem Default to standard python interpreter unless told otherwise\n+set PYTHON_RUNNER=python\n+if not \"x%PYSPARK_DRIVER_PYTHON%\" ==\"x\" (\n+  set PYTHON_RUNNER=%PYSPARK_DRIVER_PYTHON%\n+)\n+\n+rem Only attempt to find SPARK_HOME if it is not set.\n+if \"x%SPARK_HOME%\"==\"x\" (\n+  rem We are pip installed, use the Python script to resolve a reasonable SPARK_HOME\n+  if exist \"%FIND_SPARK_HOME_SCRIPT%\" (\n+    rem If there is no python installed it will fail with message:\n+    rem 'python' is not recognized as an internal or external command,\n+    for /f \"delims=\" %%i in ('%PYTHON_RUNNER% %FIND_SPARK_HOME_SCRIPT%') do set SPARK_HOME=%%i"
  }, {
    "author": {
      "login": "jsnowacki"
    },
    "body": "I'll change that.\r\n",
    "commit": "b58f74054f9c02b0548254984dfe46516fe14e18",
    "createdAt": "2017-11-06T19:13:56Z",
    "diffHunk": "@@ -0,0 +1,44 @@\n+@echo off\n+\n+rem\n+rem Licensed to the Apache Software Foundation (ASF) under one or more\n+rem contributor license agreements.  See the NOTICE file distributed with\n+rem this work for additional information regarding copyright ownership.\n+rem The ASF licenses this file to You under the Apache License, Version 2.0\n+rem (the \"License\"); you may not use this file except in compliance with\n+rem the License.  You may obtain a copy of the License at\n+rem\n+rem    http://www.apache.org/licenses/LICENSE-2.0\n+rem\n+rem Unless required by applicable law or agreed to in writing, software\n+rem distributed under the License is distributed on an \"AS IS\" BASIS,\n+rem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+rem See the License for the specific language governing permissions and\n+rem limitations under the License.\n+rem\n+\n+rem Path to Python script finding SPARK_HOME\n+set FIND_SPARK_HOME_SCRIPT=%~dp0find_spark_home.py\n+\n+rem Default to standard python interpreter unless told otherwise\n+set PYTHON_RUNNER=python\n+if not \"x%PYSPARK_DRIVER_PYTHON%\" ==\"x\" (\n+  set PYTHON_RUNNER=%PYSPARK_DRIVER_PYTHON%\n+)\n+\n+rem Only attempt to find SPARK_HOME if it is not set.\n+if \"x%SPARK_HOME%\"==\"x\" (\n+  rem We are pip installed, use the Python script to resolve a reasonable SPARK_HOME\n+  if exist \"%FIND_SPARK_HOME_SCRIPT%\" (\n+    rem If there is no python installed it will fail with message:\n+    rem 'python' is not recognized as an internal or external command,\n+    for /f \"delims=\" %%i in ('%PYTHON_RUNNER% %FIND_SPARK_HOME_SCRIPT%') do set SPARK_HOME=%%i"
  }],
  "prId": 19370
}, {
  "comments": [{
    "author": {
      "login": "HyukjinKwon"
    },
    "body": "Can we put the logic:\r\n\r\nhttps://github.com/apache/spark/blob/a36a76ac43c36a3b897a748bd9f138b629dbc684/bin/find-spark-home#L37-L39\r\n\r\nhere like\r\n\r\n```cmd\r\nif \"x%PYSPARK_DRIVER_PYTHON%\" ==\"x\" (\r\n  if \"x%PYSPARK_PYTHON%\" ==\"x\" (\r\n    set PYSPARK_DRIVER_PYTHON =%PYSPARK_PYTHON%\r\n  ) else {\r\n    set PYSPARK_DRIVER_PYTHON =python\r\n  }\r\n)\r\n\r\n...\r\n\r\nfor /f \"delims=\" %%i in ('%PYSPARK_DRIVER_PYTHON% %FIND_SPARK_HOME_SCRIPT%') do set SPARK_HOME=%%i\r\n```\r\n\r\nto be consistent?",
    "commit": "b58f74054f9c02b0548254984dfe46516fe14e18",
    "createdAt": "2017-11-02T02:49:43Z",
    "diffHunk": "@@ -0,0 +1,44 @@\n+@echo off\n+\n+rem\n+rem Licensed to the Apache Software Foundation (ASF) under one or more\n+rem contributor license agreements.  See the NOTICE file distributed with\n+rem this work for additional information regarding copyright ownership.\n+rem The ASF licenses this file to You under the Apache License, Version 2.0\n+rem (the \"License\"); you may not use this file except in compliance with\n+rem the License.  You may obtain a copy of the License at\n+rem\n+rem    http://www.apache.org/licenses/LICENSE-2.0\n+rem\n+rem Unless required by applicable law or agreed to in writing, software\n+rem distributed under the License is distributed on an \"AS IS\" BASIS,\n+rem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+rem See the License for the specific language governing permissions and\n+rem limitations under the License.\n+rem\n+\n+rem Path to Python script finding SPARK_HOME\n+set FIND_SPARK_HOME_SCRIPT=%~dp0find_spark_home.py\n+\n+rem Default to standard python interpreter unless told otherwise\n+set PYTHON_RUNNER=python\n+if not \"x%PYSPARK_DRIVER_PYTHON%\" ==\"x\" (\n+  set PYTHON_RUNNER=%PYSPARK_DRIVER_PYTHON%\n+)\n+\n+rem Only attempt to find SPARK_HOME if it is not set.\n+if \"x%SPARK_HOME%\"==\"x\" (\n+  rem We are pip installed, use the Python script to resolve a reasonable SPARK_HOME\n+  if exist \"%FIND_SPARK_HOME_SCRIPT%\" (\n+    rem If there is no python installed it will fail with message:"
  }, {
    "author": {
      "login": "jsnowacki"
    },
    "body": "As I mentioned before, this is easy to do in Bash but quite tricky in CMD as by default variables are evaluated before execution, as variables in CMD files work a bit more like fields in templates. See this answer: https://stackoverflow.com/questions/10558316/example-of-delayed-expansion-in-batch-file. I can try to improve it, i.e. add extra condition for the PYTHON_RUNNER variable and check if it works correctly, but I'm busy until next weekend, so I can pick it up in a few days.",
    "commit": "b58f74054f9c02b0548254984dfe46516fe14e18",
    "createdAt": "2017-11-06T19:20:05Z",
    "diffHunk": "@@ -0,0 +1,44 @@\n+@echo off\n+\n+rem\n+rem Licensed to the Apache Software Foundation (ASF) under one or more\n+rem contributor license agreements.  See the NOTICE file distributed with\n+rem this work for additional information regarding copyright ownership.\n+rem The ASF licenses this file to You under the Apache License, Version 2.0\n+rem (the \"License\"); you may not use this file except in compliance with\n+rem the License.  You may obtain a copy of the License at\n+rem\n+rem    http://www.apache.org/licenses/LICENSE-2.0\n+rem\n+rem Unless required by applicable law or agreed to in writing, software\n+rem distributed under the License is distributed on an \"AS IS\" BASIS,\n+rem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+rem See the License for the specific language governing permissions and\n+rem limitations under the License.\n+rem\n+\n+rem Path to Python script finding SPARK_HOME\n+set FIND_SPARK_HOME_SCRIPT=%~dp0find_spark_home.py\n+\n+rem Default to standard python interpreter unless told otherwise\n+set PYTHON_RUNNER=python\n+if not \"x%PYSPARK_DRIVER_PYTHON%\" ==\"x\" (\n+  set PYTHON_RUNNER=%PYSPARK_DRIVER_PYTHON%\n+)\n+\n+rem Only attempt to find SPARK_HOME if it is not set.\n+if \"x%SPARK_HOME%\"==\"x\" (\n+  rem We are pip installed, use the Python script to resolve a reasonable SPARK_HOME\n+  if exist \"%FIND_SPARK_HOME_SCRIPT%\" (\n+    rem If there is no python installed it will fail with message:"
  }],
  "prId": 19370
}, {
  "comments": [{
    "author": {
      "login": "HyukjinKwon"
    },
    "body": "nit `\"x%PYSPARK_DRIVER_PYTHON%\" ==\"x\"` -> `\"x%PYSPARK_DRIVER_PYTHON%\"==\"x\"`?",
    "commit": "b58f74054f9c02b0548254984dfe46516fe14e18",
    "createdAt": "2017-11-19T13:37:28Z",
    "diffHunk": "@@ -0,0 +1,49 @@\n+@echo off\n+\n+rem\n+rem Licensed to the Apache Software Foundation (ASF) under one or more\n+rem contributor license agreements.  See the NOTICE file distributed with\n+rem this work for additional information regarding copyright ownership.\n+rem The ASF licenses this file to You under the Apache License, Version 2.0\n+rem (the \"License\"); you may not use this file except in compliance with\n+rem the License.  You may obtain a copy of the License at\n+rem\n+rem    http://www.apache.org/licenses/LICENSE-2.0\n+rem\n+rem Unless required by applicable law or agreed to in writing, software\n+rem distributed under the License is distributed on an \"AS IS\" BASIS,\n+rem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+rem See the License for the specific language governing permissions and\n+rem limitations under the License.\n+rem\n+\n+rem Path to Python script finding SPARK_HOME\n+set FIND_SPARK_HOME_PYTHON_SCRIPT=%~dp0find_spark_home.py\n+\n+rem Default to standard python interpreter unless told otherwise\n+set PYTHON_RUNNER=python\n+rem If PYSPARK_DRIVER_PYTHON is set, it overwrites the python version\n+if not \"x%PYSPARK_DRIVER_PYTHON%\" ==\"x\" (\n+  set PYTHON_RUNNER=%PYSPARK_DRIVER_PYTHON%\n+)\n+rem If PYSPARK_PYTHON is set, it overwrites the python version\n+if not \"x%PYSPARK_PYTHON%\" ==\"x\" ("
  }, {
    "author": {
      "login": "HyukjinKwon"
    },
    "body": "I normally ignore trivial nits and just merge it but let's fix it here in this case. I guess cmd files are not quite frequently updated.",
    "commit": "b58f74054f9c02b0548254984dfe46516fe14e18",
    "createdAt": "2017-11-19T13:39:07Z",
    "diffHunk": "@@ -0,0 +1,49 @@\n+@echo off\n+\n+rem\n+rem Licensed to the Apache Software Foundation (ASF) under one or more\n+rem contributor license agreements.  See the NOTICE file distributed with\n+rem this work for additional information regarding copyright ownership.\n+rem The ASF licenses this file to You under the Apache License, Version 2.0\n+rem (the \"License\"); you may not use this file except in compliance with\n+rem the License.  You may obtain a copy of the License at\n+rem\n+rem    http://www.apache.org/licenses/LICENSE-2.0\n+rem\n+rem Unless required by applicable law or agreed to in writing, software\n+rem distributed under the License is distributed on an \"AS IS\" BASIS,\n+rem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+rem See the License for the specific language governing permissions and\n+rem limitations under the License.\n+rem\n+\n+rem Path to Python script finding SPARK_HOME\n+set FIND_SPARK_HOME_PYTHON_SCRIPT=%~dp0find_spark_home.py\n+\n+rem Default to standard python interpreter unless told otherwise\n+set PYTHON_RUNNER=python\n+rem If PYSPARK_DRIVER_PYTHON is set, it overwrites the python version\n+if not \"x%PYSPARK_DRIVER_PYTHON%\" ==\"x\" (\n+  set PYTHON_RUNNER=%PYSPARK_DRIVER_PYTHON%\n+)\n+rem If PYSPARK_PYTHON is set, it overwrites the python version\n+if not \"x%PYSPARK_PYTHON%\" ==\"x\" ("
  }, {
    "author": {
      "login": "jsnowacki"
    },
    "body": "Done.",
    "commit": "b58f74054f9c02b0548254984dfe46516fe14e18",
    "createdAt": "2017-11-19T20:16:21Z",
    "diffHunk": "@@ -0,0 +1,49 @@\n+@echo off\n+\n+rem\n+rem Licensed to the Apache Software Foundation (ASF) under one or more\n+rem contributor license agreements.  See the NOTICE file distributed with\n+rem this work for additional information regarding copyright ownership.\n+rem The ASF licenses this file to You under the Apache License, Version 2.0\n+rem (the \"License\"); you may not use this file except in compliance with\n+rem the License.  You may obtain a copy of the License at\n+rem\n+rem    http://www.apache.org/licenses/LICENSE-2.0\n+rem\n+rem Unless required by applicable law or agreed to in writing, software\n+rem distributed under the License is distributed on an \"AS IS\" BASIS,\n+rem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+rem See the License for the specific language governing permissions and\n+rem limitations under the License.\n+rem\n+\n+rem Path to Python script finding SPARK_HOME\n+set FIND_SPARK_HOME_PYTHON_SCRIPT=%~dp0find_spark_home.py\n+\n+rem Default to standard python interpreter unless told otherwise\n+set PYTHON_RUNNER=python\n+rem If PYSPARK_DRIVER_PYTHON is set, it overwrites the python version\n+if not \"x%PYSPARK_DRIVER_PYTHON%\" ==\"x\" (\n+  set PYTHON_RUNNER=%PYSPARK_DRIVER_PYTHON%\n+)\n+rem If PYSPARK_PYTHON is set, it overwrites the python version\n+if not \"x%PYSPARK_PYTHON%\" ==\"x\" ("
  }],
  "prId": 19370
}, {
  "comments": [{
    "author": {
      "login": "felixcheung"
    },
    "body": "I think this fails rather uglily if python is not in the path? should we add some checks for that?",
    "commit": "b58f74054f9c02b0548254984dfe46516fe14e18",
    "createdAt": "2017-11-19T22:42:17Z",
    "diffHunk": "@@ -0,0 +1,49 @@\n+@echo off\n+\n+rem\n+rem Licensed to the Apache Software Foundation (ASF) under one or more\n+rem contributor license agreements.  See the NOTICE file distributed with\n+rem this work for additional information regarding copyright ownership.\n+rem The ASF licenses this file to You under the Apache License, Version 2.0\n+rem (the \"License\"); you may not use this file except in compliance with\n+rem the License.  You may obtain a copy of the License at\n+rem\n+rem    http://www.apache.org/licenses/LICENSE-2.0\n+rem\n+rem Unless required by applicable law or agreed to in writing, software\n+rem distributed under the License is distributed on an \"AS IS\" BASIS,\n+rem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+rem See the License for the specific language governing permissions and\n+rem limitations under the License.\n+rem\n+\n+rem Path to Python script finding SPARK_HOME\n+set FIND_SPARK_HOME_PYTHON_SCRIPT=%~dp0find_spark_home.py",
    "line": 21
  }, {
    "author": {
      "login": "HyukjinKwon"
    },
    "body": "I manually tested and it looks going to give a message like this:\r\n\r\n```cmd\r\nC:\\...>pyspark\r\n'python' is not recognized as an internal or external command, operable program or batch file.\r\n```\r\n\r\nwhich seems roughly fine though it's bit uglily. \r\n\r\nSo, googled a possible approach, for example, https://superuser.com/a/718194. However, seems `where` does not recognise an absolute path, for example, `C:\\...\\Python27\\python.exe`. So, looks we should make a combination with `exists` keyword.\r\n\r\n@jsnowacki if you are active now and know a simple better way, we could definitely try. Or, probably we could go ahead as is too .. \r\n \r\n",
    "commit": "b58f74054f9c02b0548254984dfe46516fe14e18",
    "createdAt": "2017-11-20T00:49:59Z",
    "diffHunk": "@@ -0,0 +1,49 @@\n+@echo off\n+\n+rem\n+rem Licensed to the Apache Software Foundation (ASF) under one or more\n+rem contributor license agreements.  See the NOTICE file distributed with\n+rem this work for additional information regarding copyright ownership.\n+rem The ASF licenses this file to You under the Apache License, Version 2.0\n+rem (the \"License\"); you may not use this file except in compliance with\n+rem the License.  You may obtain a copy of the License at\n+rem\n+rem    http://www.apache.org/licenses/LICENSE-2.0\n+rem\n+rem Unless required by applicable law or agreed to in writing, software\n+rem distributed under the License is distributed on an \"AS IS\" BASIS,\n+rem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+rem See the License for the specific language governing permissions and\n+rem limitations under the License.\n+rem\n+\n+rem Path to Python script finding SPARK_HOME\n+set FIND_SPARK_HOME_PYTHON_SCRIPT=%~dp0find_spark_home.py",
    "line": 21
  }, {
    "author": {
      "login": "jsnowacki"
    },
    "body": "The only idea I have at the moment is adding is something along the line:\r\n\r\n```cmd\r\nrem If there is python installed, try to use the root dir as SPARK_HOME\r\nwhere %PYTHON_RUNNER%\r\nif %ERRORLEVEL% neq 0 (\r\n\techo %PYTHON_RUNNER% wasn't found \r\n\tif \"x%SPARK_HOME%\"==\"x\" (\r\n\t\tset SPARK_HOME=%~dp0..\r\n\t)\r\n)\r\n```\r\n\r\nI need to add it though in a main code not in the conditional subpblock as it doesn't work inside a block of code due to this CMD limitations regarding env variable evaluation. ",
    "commit": "b58f74054f9c02b0548254984dfe46516fe14e18",
    "createdAt": "2017-11-20T18:44:26Z",
    "diffHunk": "@@ -0,0 +1,49 @@\n+@echo off\n+\n+rem\n+rem Licensed to the Apache Software Foundation (ASF) under one or more\n+rem contributor license agreements.  See the NOTICE file distributed with\n+rem this work for additional information regarding copyright ownership.\n+rem The ASF licenses this file to You under the Apache License, Version 2.0\n+rem (the \"License\"); you may not use this file except in compliance with\n+rem the License.  You may obtain a copy of the License at\n+rem\n+rem    http://www.apache.org/licenses/LICENSE-2.0\n+rem\n+rem Unless required by applicable law or agreed to in writing, software\n+rem distributed under the License is distributed on an \"AS IS\" BASIS,\n+rem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+rem See the License for the specific language governing permissions and\n+rem limitations under the License.\n+rem\n+\n+rem Path to Python script finding SPARK_HOME\n+set FIND_SPARK_HOME_PYTHON_SCRIPT=%~dp0find_spark_home.py",
    "line": 21
  }],
  "prId": 19370
}, {
  "comments": [{
    "author": {
      "login": "HyukjinKwon"
    },
    "body": "Seems tab is used instead. Let's match it with spaces.",
    "commit": "b58f74054f9c02b0548254984dfe46516fe14e18",
    "createdAt": "2017-11-20T21:33:35Z",
    "diffHunk": "@@ -0,0 +1,56 @@\n+@echo off\n+\n+rem\n+rem Licensed to the Apache Software Foundation (ASF) under one or more\n+rem contributor license agreements.  See the NOTICE file distributed with\n+rem this work for additional information regarding copyright ownership.\n+rem The ASF licenses this file to You under the Apache License, Version 2.0\n+rem (the \"License\"); you may not use this file except in compliance with\n+rem the License.  You may obtain a copy of the License at\n+rem\n+rem    http://www.apache.org/licenses/LICENSE-2.0\n+rem\n+rem Unless required by applicable law or agreed to in writing, software\n+rem distributed under the License is distributed on an \"AS IS\" BASIS,\n+rem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+rem See the License for the specific language governing permissions and\n+rem limitations under the License.\n+rem\n+\n+rem Path to Python script finding SPARK_HOME\n+set FIND_SPARK_HOME_PYTHON_SCRIPT=%~dp0find_spark_home.py\n+\n+rem Default to standard python interpreter unless told otherwise\n+set PYTHON_RUNNER=python\n+rem If PYSPARK_DRIVER_PYTHON is set, it overwrites the python version\n+if not \"x%PYSPARK_DRIVER_PYTHON%\"==\"x\" (\n+  set PYTHON_RUNNER=%PYSPARK_DRIVER_PYTHON%\n+)\n+rem If PYSPARK_PYTHON is set, it overwrites the python version\n+if not \"x%PYSPARK_PYTHON%\"==\"x\" (\n+  set PYTHON_RUNNER=%PYSPARK_PYTHON%\n+)\n+\n+rem If there is python installed, trying to use the root dir as SPARK_HOME\n+where %PYTHON_RUNNER%\n+if %ERRORLEVEL% neq 0 (\n+\techo %PYTHON_RUNNER% wasn't found; Python doesn't seem to be installed\n+\tif \"x%SPARK_HOME%\"==\"x\" (\n+\t\tset SPARK_HOME=%~dp0..\n+\t)\n+)"
  }, {
    "author": {
      "login": "jsnowacki"
    },
    "body": "Done",
    "commit": "b58f74054f9c02b0548254984dfe46516fe14e18",
    "createdAt": "2017-11-21T12:36:34Z",
    "diffHunk": "@@ -0,0 +1,56 @@\n+@echo off\n+\n+rem\n+rem Licensed to the Apache Software Foundation (ASF) under one or more\n+rem contributor license agreements.  See the NOTICE file distributed with\n+rem this work for additional information regarding copyright ownership.\n+rem The ASF licenses this file to You under the Apache License, Version 2.0\n+rem (the \"License\"); you may not use this file except in compliance with\n+rem the License.  You may obtain a copy of the License at\n+rem\n+rem    http://www.apache.org/licenses/LICENSE-2.0\n+rem\n+rem Unless required by applicable law or agreed to in writing, software\n+rem distributed under the License is distributed on an \"AS IS\" BASIS,\n+rem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+rem See the License for the specific language governing permissions and\n+rem limitations under the License.\n+rem\n+\n+rem Path to Python script finding SPARK_HOME\n+set FIND_SPARK_HOME_PYTHON_SCRIPT=%~dp0find_spark_home.py\n+\n+rem Default to standard python interpreter unless told otherwise\n+set PYTHON_RUNNER=python\n+rem If PYSPARK_DRIVER_PYTHON is set, it overwrites the python version\n+if not \"x%PYSPARK_DRIVER_PYTHON%\"==\"x\" (\n+  set PYTHON_RUNNER=%PYSPARK_DRIVER_PYTHON%\n+)\n+rem If PYSPARK_PYTHON is set, it overwrites the python version\n+if not \"x%PYSPARK_PYTHON%\"==\"x\" (\n+  set PYTHON_RUNNER=%PYSPARK_PYTHON%\n+)\n+\n+rem If there is python installed, trying to use the root dir as SPARK_HOME\n+where %PYTHON_RUNNER%\n+if %ERRORLEVEL% neq 0 (\n+\techo %PYTHON_RUNNER% wasn't found; Python doesn't seem to be installed\n+\tif \"x%SPARK_HOME%\"==\"x\" (\n+\t\tset SPARK_HOME=%~dp0..\n+\t)\n+)"
  }],
  "prId": 19370
}, {
  "comments": [{
    "author": {
      "login": "HyukjinKwon"
    },
    "body": "Seems there is a hidden tab .. ",
    "commit": "b58f74054f9c02b0548254984dfe46516fe14e18",
    "createdAt": "2017-11-21T12:50:44Z",
    "diffHunk": "@@ -0,0 +1,56 @@\n+@echo off\n+\n+rem\n+rem Licensed to the Apache Software Foundation (ASF) under one or more\n+rem contributor license agreements.  See the NOTICE file distributed with\n+rem this work for additional information regarding copyright ownership.\n+rem The ASF licenses this file to You under the Apache License, Version 2.0\n+rem (the \"License\"); you may not use this file except in compliance with\n+rem the License.  You may obtain a copy of the License at\n+rem\n+rem    http://www.apache.org/licenses/LICENSE-2.0\n+rem\n+rem Unless required by applicable law or agreed to in writing, software\n+rem distributed under the License is distributed on an \"AS IS\" BASIS,\n+rem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+rem See the License for the specific language governing permissions and\n+rem limitations under the License.\n+rem\n+\n+rem Path to Python script finding SPARK_HOME\n+set FIND_SPARK_HOME_PYTHON_SCRIPT=%~dp0find_spark_home.py\n+\n+rem Default to standard python interpreter unless told otherwise\n+set PYTHON_RUNNER=python\n+rem If PYSPARK_DRIVER_PYTHON is set, it overwrites the python version\n+if not \"x%PYSPARK_DRIVER_PYTHON%\"==\"x\" (\n+  set PYTHON_RUNNER=%PYSPARK_DRIVER_PYTHON%\n+)\n+rem If PYSPARK_PYTHON is set, it overwrites the python version\n+if not \"x%PYSPARK_PYTHON%\"==\"x\" (\n+  set PYTHON_RUNNER=%PYSPARK_PYTHON%\n+)\n+\n+rem If there is python installed, trying to use the root dir as SPARK_HOME\n+where %PYTHON_RUNNER%\n+if %ERRORLEVEL% neq 0 (\n+  echo %PYTHON_RUNNER% wasn't found; Python doesn't seem to be installed\n+    if \"x%SPARK_HOME%\"==\"x\" (\n+\t  set SPARK_HOME=%~dp0.."
  }, {
    "author": {
      "login": "jsnowacki"
    },
    "body": "Indeed, sorry. Now it should be fine.",
    "commit": "b58f74054f9c02b0548254984dfe46516fe14e18",
    "createdAt": "2017-11-21T16:17:44Z",
    "diffHunk": "@@ -0,0 +1,56 @@\n+@echo off\n+\n+rem\n+rem Licensed to the Apache Software Foundation (ASF) under one or more\n+rem contributor license agreements.  See the NOTICE file distributed with\n+rem this work for additional information regarding copyright ownership.\n+rem The ASF licenses this file to You under the Apache License, Version 2.0\n+rem (the \"License\"); you may not use this file except in compliance with\n+rem the License.  You may obtain a copy of the License at\n+rem\n+rem    http://www.apache.org/licenses/LICENSE-2.0\n+rem\n+rem Unless required by applicable law or agreed to in writing, software\n+rem distributed under the License is distributed on an \"AS IS\" BASIS,\n+rem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+rem See the License for the specific language governing permissions and\n+rem limitations under the License.\n+rem\n+\n+rem Path to Python script finding SPARK_HOME\n+set FIND_SPARK_HOME_PYTHON_SCRIPT=%~dp0find_spark_home.py\n+\n+rem Default to standard python interpreter unless told otherwise\n+set PYTHON_RUNNER=python\n+rem If PYSPARK_DRIVER_PYTHON is set, it overwrites the python version\n+if not \"x%PYSPARK_DRIVER_PYTHON%\"==\"x\" (\n+  set PYTHON_RUNNER=%PYSPARK_DRIVER_PYTHON%\n+)\n+rem If PYSPARK_PYTHON is set, it overwrites the python version\n+if not \"x%PYSPARK_PYTHON%\"==\"x\" (\n+  set PYTHON_RUNNER=%PYSPARK_PYTHON%\n+)\n+\n+rem If there is python installed, trying to use the root dir as SPARK_HOME\n+where %PYTHON_RUNNER%\n+if %ERRORLEVEL% neq 0 (\n+  echo %PYTHON_RUNNER% wasn't found; Python doesn't seem to be installed\n+    if \"x%SPARK_HOME%\"==\"x\" (\n+\t  set SPARK_HOME=%~dp0.."
  }],
  "prId": 19370
}, {
  "comments": [{
    "author": {
      "login": "HyukjinKwon"
    },
    "body": "I think the problem here from the last commit is:\r\n\r\n- now `PYTHON_RUNNER` can't be an absolute path as `where` does not work with it\r\n\r\n  ```\r\n  ERROR: Invalid pattern is specified in \"path:pattern\".\r\n  C:\\Python27\\python.exe wasn't found; Python doesn't seem to be installed\r\n  ```\r\n\r\n- It print out the output from `where`:\r\n\r\n  ```\r\n  C:\\...>pyspark\r\n  C:\\cygwin\\bin\\python\r\n  C:\\Python27\\python.exe\r\n  ...\r\n  ```\r\n\r\n- and the error message looks not more useful than the previous one:\r\n\r\n  ```\r\n  python wasn't found; Python doesn't seem to be installed\r\n  ```",
    "commit": "b58f74054f9c02b0548254984dfe46516fe14e18",
    "createdAt": "2017-11-22T01:37:25Z",
    "diffHunk": "@@ -0,0 +1,56 @@\n+@echo off\n+\n+rem\n+rem Licensed to the Apache Software Foundation (ASF) under one or more\n+rem contributor license agreements.  See the NOTICE file distributed with\n+rem this work for additional information regarding copyright ownership.\n+rem The ASF licenses this file to You under the Apache License, Version 2.0\n+rem (the \"License\"); you may not use this file except in compliance with\n+rem the License.  You may obtain a copy of the License at\n+rem\n+rem    http://www.apache.org/licenses/LICENSE-2.0\n+rem\n+rem Unless required by applicable law or agreed to in writing, software\n+rem distributed under the License is distributed on an \"AS IS\" BASIS,\n+rem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+rem See the License for the specific language governing permissions and\n+rem limitations under the License.\n+rem\n+\n+rem Path to Python script finding SPARK_HOME\n+set FIND_SPARK_HOME_PYTHON_SCRIPT=%~dp0find_spark_home.py\n+\n+rem Default to standard python interpreter unless told otherwise\n+set PYTHON_RUNNER=python\n+rem If PYSPARK_DRIVER_PYTHON is set, it overwrites the python version\n+if not \"x%PYSPARK_DRIVER_PYTHON%\"==\"x\" (\n+  set PYTHON_RUNNER=%PYSPARK_DRIVER_PYTHON%\n+)\n+rem If PYSPARK_PYTHON is set, it overwrites the python version\n+if not \"x%PYSPARK_PYTHON%\"==\"x\" (\n+  set PYTHON_RUNNER=%PYSPARK_PYTHON%\n+)\n+\n+rem If there is python installed, trying to use the root dir as SPARK_HOME\n+where %PYTHON_RUNNER%\n+if %ERRORLEVEL% neq 0 (\n+  echo %PYTHON_RUNNER% wasn't found; Python doesn't seem to be installed\n+    if \"x%SPARK_HOME%\"==\"x\" (\n+      set SPARK_HOME=%~dp0..\n+    )\n+)"
  }],
  "prId": 19370
}]