[{
  "comments": [{
    "author": {
      "login": "HyukjinKwon"
    },
    "body": "@viirya, not a big deal but I think using `LooseVersion` would be preferred",
    "commit": "ca28829a3ef292b348368b5f28c4e46ab3c0499c",
    "createdAt": "2019-01-07T10:00:05Z",
    "diffHunk": "@@ -190,7 +190,13 @@ def toImage(self, array, origin=\"\"):\n         # Running `bytearray(numpy.array([1]))` fails in specific Python versions\n         # with a specific Numpy version, for example in Python 3.6.0 and NumPy 1.13.3.\n         # Here, it avoids it by converting it to bytes.\n-        data = bytearray(array.astype(dtype=np.uint8).ravel().tobytes())\n+        numpy_version = np.__version__.split('.')\n+        numpy_version_major = int(numpy_version[0])\n+        numpy_version_minor = int(numpy_version[1])\n+        if numpy_version_major > 1 or (numpy_version_major == 1 and numpy_version_minor >= 9):"
  }, {
    "author": {
      "login": "viirya"
    },
    "body": "Thanks for review. Changed to `LooseVersion`.",
    "commit": "ca28829a3ef292b348368b5f28c4e46ab3c0499c",
    "createdAt": "2019-01-07T10:02:56Z",
    "diffHunk": "@@ -190,7 +190,13 @@ def toImage(self, array, origin=\"\"):\n         # Running `bytearray(numpy.array([1]))` fails in specific Python versions\n         # with a specific Numpy version, for example in Python 3.6.0 and NumPy 1.13.3.\n         # Here, it avoids it by converting it to bytes.\n-        data = bytearray(array.astype(dtype=np.uint8).ravel().tobytes())\n+        numpy_version = np.__version__.split('.')\n+        numpy_version_major = int(numpy_version[0])\n+        numpy_version_minor = int(numpy_version[1])\n+        if numpy_version_major > 1 or (numpy_version_major == 1 and numpy_version_minor >= 9):"
  }],
  "prId": 23484
}, {
  "comments": [{
    "author": {
      "login": "HyukjinKwon"
    },
    "body": "Ah, actually, also @viirya, I think we can use `data = bytearray(array.astype(dtype=np.uint8).ravel())` right away. (I only turned this into bytes for Python 3.6.0 and NumPy 1.13.3 IIRC. it had to support memoryview for perf FWIW)",
    "commit": "ca28829a3ef292b348368b5f28c4e46ab3c0499c",
    "createdAt": "2019-01-07T10:04:55Z",
    "diffHunk": "@@ -190,7 +190,13 @@ def toImage(self, array, origin=\"\"):\n         # Running `bytearray(numpy.array([1]))` fails in specific Python versions\n         # with a specific Numpy version, for example in Python 3.6.0 and NumPy 1.13.3.\n         # Here, it avoids it by converting it to bytes.\n-        data = bytearray(array.astype(dtype=np.uint8).ravel().tobytes())\n+        numpy_version = np.__version__.split('.')\n+        numpy_version_major = int(numpy_version[0])\n+        numpy_version_minor = int(numpy_version[1])\n+        if numpy_version_major > 1 or (numpy_version_major == 1 and numpy_version_minor >= 9):\n+            data = bytearray(array.astype(dtype=np.uint8).ravel().tobytes())\n+        else:\n+            data = bytearray(array.astype(dtype=np.uint8).ravel().tostring())"
  }, {
    "author": {
      "login": "viirya"
    },
    "body": "oh, i see.",
    "commit": "ca28829a3ef292b348368b5f28c4e46ab3c0499c",
    "createdAt": "2019-01-07T10:08:07Z",
    "diffHunk": "@@ -190,7 +190,13 @@ def toImage(self, array, origin=\"\"):\n         # Running `bytearray(numpy.array([1]))` fails in specific Python versions\n         # with a specific Numpy version, for example in Python 3.6.0 and NumPy 1.13.3.\n         # Here, it avoids it by converting it to bytes.\n-        data = bytearray(array.astype(dtype=np.uint8).ravel().tobytes())\n+        numpy_version = np.__version__.split('.')\n+        numpy_version_major = int(numpy_version[0])\n+        numpy_version_minor = int(numpy_version[1])\n+        if numpy_version_major > 1 or (numpy_version_major == 1 and numpy_version_minor >= 9):\n+            data = bytearray(array.astype(dtype=np.uint8).ravel().tobytes())\n+        else:\n+            data = bytearray(array.astype(dtype=np.uint8).ravel().tostring())"
  }],
  "prId": 23484
}]