[{
  "comments": [{
    "author": {
      "login": "HyukjinKwon"
    },
    "body": "@inpefess, I was actually meaning upgrade cloudpickle to upper version see https://github.com/apache/spark/pull/21350. Our copy is matched to 0.4.4 for now.\r\n\r\nThe main reason we stayed in 0.4.x was that the default pickle protocol was changed as of 0.5.x.\r\nSince we're targeting to upgrade it here, It should be good to match cloudpickle copy to higher version, rather then changing the protocol in cloudpickle alone.",
    "commit": "b0df927d6ab842fd07e073aaad8b34307bdf26b0",
    "createdAt": "2019-01-15T10:57:51Z",
    "diffHunk": "@@ -852,11 +853,11 @@ def _rebuild_tornado_coroutine(func):\n \n # Shorthands for legacy support\n \n-def dump(obj, file, protocol=2):\n+def dump(obj, file, protocol=protocol):"
  }, {
    "author": {
      "login": "inpefess"
    },
    "body": "@HyukjinKwon upgrading cloudpickle copy is a different task, although related to this one. I suggest upgrading protocol here and creating a separate issue for the cloudpickle upgrade.",
    "commit": "b0df927d6ab842fd07e073aaad8b34307bdf26b0",
    "createdAt": "2019-01-15T11:15:38Z",
    "diffHunk": "@@ -852,11 +853,11 @@ def _rebuild_tornado_coroutine(func):\n \n # Shorthands for legacy support\n \n-def dump(obj, file, protocol=2):\n+def dump(obj, file, protocol=protocol):"
  }, {
    "author": {
      "login": "HyukjinKwon"
    },
    "body": "Yea, I agree that it's slightly orthogonal. But let's do it here. it's related and ususally cloudpickle copy is updated by matching a specific version of cloudpickle. Updating bit by bit actually makes bumping up the version of cloudpickle different.\r\n\r\nWe had to put a lot of efforts to match it before.",
    "commit": "b0df927d6ab842fd07e073aaad8b34307bdf26b0",
    "createdAt": "2019-01-18T02:28:01Z",
    "diffHunk": "@@ -852,11 +853,11 @@ def _rebuild_tornado_coroutine(func):\n \n # Shorthands for legacy support\n \n-def dump(obj, file, protocol=2):\n+def dump(obj, file, protocol=protocol):"
  }, {
    "author": {
      "login": "inpefess"
    },
    "body": "Ok, I'll copy the newest cloudpickle version then.",
    "commit": "b0df927d6ab842fd07e073aaad8b34307bdf26b0",
    "createdAt": "2019-01-18T06:45:02Z",
    "diffHunk": "@@ -852,11 +853,11 @@ def _rebuild_tornado_coroutine(func):\n \n # Shorthands for legacy support\n \n-def dump(obj, file, protocol=2):\n+def dump(obj, file, protocol=protocol):"
  }],
  "prId": 20691
}, {
  "comments": [{
    "author": {
      "login": "srowen"
    },
    "body": "Is this reversed? looks like this is meant to be true when running Python 3? (I know you didn't change it here)",
    "commit": "b0df927d6ab842fd07e073aaad8b34307bdf26b0",
    "createdAt": "2019-01-18T15:32:22Z",
    "diffHunk": "@@ -72,6 +78,22 @@\n     PY3 = True",
    "line": 37
  }, {
    "author": {
      "login": "inpefess"
    },
    "body": "> Is this reversed? looks like this is meant to be true when running Python 3? (I know you didn't change it here)\r\n\r\nCan you state it more precisely? What I see is `PY3 = True` is executed when `sys.version < '3'` is False --- that's OK.",
    "commit": "b0df927d6ab842fd07e073aaad8b34307bdf26b0",
    "createdAt": "2019-01-18T15:57:18Z",
    "diffHunk": "@@ -72,6 +78,22 @@\n     PY3 = True",
    "line": 37
  }, {
    "author": {
      "login": "srowen"
    },
    "body": "It's probably my misunderstanding, but sys.version < '3' on Python 2 right? PY3 seems like it indicates whether Python 3 is running?",
    "commit": "b0df927d6ab842fd07e073aaad8b34307bdf26b0",
    "createdAt": "2019-01-18T16:05:15Z",
    "diffHunk": "@@ -72,6 +78,22 @@\n     PY3 = True",
    "line": 37
  }, {
    "author": {
      "login": "srowen"
    },
    "body": "Ugh, nevermind, this is github folding out intermediate code.",
    "commit": "b0df927d6ab842fd07e073aaad8b34307bdf26b0",
    "createdAt": "2019-01-18T16:05:41Z",
    "diffHunk": "@@ -72,6 +78,22 @@\n     PY3 = True",
    "line": 37
  }],
  "prId": 20691
}, {
  "comments": [{
    "author": {
      "login": "srowen"
    },
    "body": "Not a big deal but did these imports need to shuffle? I'm not clear what was added or removed",
    "commit": "b0df927d6ab842fd07e073aaad8b34307bdf26b0",
    "createdAt": "2019-01-18T15:32:49Z",
    "diffHunk": "@@ -42,20 +42,26 @@\n \"\"\"\n from __future__ import print_function\n \n-import dis\n-from functools import partial\n-import imp\n import io\n-import itertools\n-import logging\n+import dis",
    "line": 10
  }, {
    "author": {
      "login": "HyukjinKwon"
    },
    "body": "This is a copy of cloudpickle 0.6.1. I think we should match it and avoid some divergence. It needed a lot of effort to match it before.",
    "commit": "b0df927d6ab842fd07e073aaad8b34307bdf26b0",
    "createdAt": "2019-01-18T15:38:24Z",
    "diffHunk": "@@ -42,20 +42,26 @@\n \"\"\"\n from __future__ import print_function\n \n-import dis\n-from functools import partial\n-import imp\n import io\n-import itertools\n-import logging\n+import dis",
    "line": 10
  }, {
    "author": {
      "login": "srowen"
    },
    "body": "Ah OK I understand.",
    "commit": "b0df927d6ab842fd07e073aaad8b34307bdf26b0",
    "createdAt": "2019-01-18T15:45:22Z",
    "diffHunk": "@@ -42,20 +42,26 @@\n \"\"\"\n from __future__ import print_function\n \n-import dis\n-from functools import partial\n-import imp\n import io\n-import itertools\n-import logging\n+import dis",
    "line": 10
  }, {
    "author": {
      "login": "inpefess"
    },
    "body": "> Not a big deal but did these imports need to shuffle? I'm not clear what was added or removed\r\n\r\nIt's an exact copy of cloudpickle 0.6.1 code. So the import order was not shuffled by me on purpose.",
    "commit": "b0df927d6ab842fd07e073aaad8b34307bdf26b0",
    "createdAt": "2019-01-18T15:51:15Z",
    "diffHunk": "@@ -42,20 +42,26 @@\n \"\"\"\n from __future__ import print_function\n \n-import dis\n-from functools import partial\n-import imp\n import io\n-import itertools\n-import logging\n+import dis",
    "line": 10
  }],
  "prId": 20691
}]