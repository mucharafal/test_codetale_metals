[{
  "comments": [{
    "author": {
      "login": "liyinan926"
    },
    "body": "With a `StatefulSet`, you don't need to explicitly manage PVCs. You can use `.spec.persistentVolumeClaimTemplate`. The StatefulSet controller automatically creates the PV (or binds to the existing one it created before).",
    "commit": "0de8c87f971d9dccb681678faffe92231a1f0c38",
    "createdAt": "2018-10-30T23:38:16Z",
    "diffHunk": "@@ -0,0 +1,49 @@\n+#\n+# Licensed to the Apache Software Foundation (ASF) under one or more\n+# contributor license agreements.  See the NOTICE file distributed with\n+# this work for additional information regarding copyright ownership.\n+# The ASF licenses this file to You under the Apache License, Version 2.0\n+# (the \"License\"); you may not use this file except in compliance with\n+# the License.  You may obtain a copy of the License at\n+#\n+#    http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+#\n+apiVersion: apps/v1\n+kind: StatefulSet\n+metadata:\n+  name: kerberos\n+spec:\n+  replicas: 1\n+  selector:\n+    matchLabels:\n+      name: hdfs-kerberos\n+      kerberosService: kerberos\n+      job: kerberostest\n+  template:\n+    metadata:\n+      annotations:\n+        pod.beta.kubernetes.io/hostname: kerberos\n+      labels:\n+        name: hdfs-kerberos\n+        kerberosService: kerberos\n+        job: kerberostest\n+    spec:\n+      containers:\n+      - command: [\"sh\"]\n+        args: [\"/start-kdc.sh\"]\n+        name: kerberos\n+        imagePullPolicy: IfNotPresent\n+        volumeMounts:\n+        - mountPath: /var/keytabs\n+          name: kerb-keytab\n+      restartPolicy: Always\n+      volumes:\n+      - name: kerb-keytab\n+        persistentVolumeClaim:",
    "line": 48
  }, {
    "author": {
      "login": "mccheah"
    },
    "body": "+1",
    "commit": "0de8c87f971d9dccb681678faffe92231a1f0c38",
    "createdAt": "2018-11-01T16:37:04Z",
    "diffHunk": "@@ -0,0 +1,49 @@\n+#\n+# Licensed to the Apache Software Foundation (ASF) under one or more\n+# contributor license agreements.  See the NOTICE file distributed with\n+# this work for additional information regarding copyright ownership.\n+# The ASF licenses this file to You under the Apache License, Version 2.0\n+# (the \"License\"); you may not use this file except in compliance with\n+# the License.  You may obtain a copy of the License at\n+#\n+#    http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+#\n+apiVersion: apps/v1\n+kind: StatefulSet\n+metadata:\n+  name: kerberos\n+spec:\n+  replicas: 1\n+  selector:\n+    matchLabels:\n+      name: hdfs-kerberos\n+      kerberosService: kerberos\n+      job: kerberostest\n+  template:\n+    metadata:\n+      annotations:\n+        pod.beta.kubernetes.io/hostname: kerberos\n+      labels:\n+        name: hdfs-kerberos\n+        kerberosService: kerberos\n+        job: kerberostest\n+    spec:\n+      containers:\n+      - command: [\"sh\"]\n+        args: [\"/start-kdc.sh\"]\n+        name: kerberos\n+        imagePullPolicy: IfNotPresent\n+        volumeMounts:\n+        - mountPath: /var/keytabs\n+          name: kerb-keytab\n+      restartPolicy: Always\n+      volumes:\n+      - name: kerb-keytab\n+        persistentVolumeClaim:",
    "line": 48
  }],
  "prId": 22608
}]