[{
  "comments": [{
    "author": {
      "login": "holdenk"
    },
    "body": "I think I'm missing some context, and others may be as well. Could we add a comment about why we need to upload the non-Java main resource?",
    "commit": "f8df2273f426a92c6742b1520d7fc480ba75c975",
    "createdAt": "2019-10-01T01:22:37Z",
    "diffHunk": "@@ -259,12 +259,19 @@ private[spark] object KubernetesUtils extends Logging {\n       isLocalDependency(Utils.resolveURI(resource))\n   }\n \n-  def renameMainAppResource(resource: String, conf: SparkConf): String = {\n+  def renameMainAppResource(\n+      resource: String,\n+      conf: Option[SparkConf] = None,\n+      isJava: Boolean = true): String = {\n     if (isLocalAndResolvable(resource)) {\n-      SparkLauncher.NO_RESOURCE\n+      if (isJava) {",
    "line": 11
  }, {
    "author": {
      "login": "skonto"
    },
    "body": "I upload it because it resided at the client machine",
    "commit": "f8df2273f426a92c6742b1520d7fc480ba75c975",
    "createdAt": "2019-10-02T17:06:25Z",
    "diffHunk": "@@ -259,12 +259,19 @@ private[spark] object KubernetesUtils extends Logging {\n       isLocalDependency(Utils.resolveURI(resource))\n   }\n \n-  def renameMainAppResource(resource: String, conf: SparkConf): String = {\n+  def renameMainAppResource(\n+      resource: String,\n+      conf: Option[SparkConf] = None,\n+      isJava: Boolean = true): String = {\n     if (isLocalAndResolvable(resource)) {\n-      SparkLauncher.NO_RESOURCE\n+      if (isJava) {",
    "line": 11
  }, {
    "author": {
      "login": "holdenk"
    },
    "body": "So I guess the part I don't understand is why would it not need to be uploaded if it was Java? Presumably we upload the java somewhere else, why isn't the Python being uploaded in the same place?",
    "commit": "f8df2273f426a92c6742b1520d7fc480ba75c975",
    "createdAt": "2019-10-04T15:45:16Z",
    "diffHunk": "@@ -259,12 +259,19 @@ private[spark] object KubernetesUtils extends Logging {\n       isLocalDependency(Utils.resolveURI(resource))\n   }\n \n-  def renameMainAppResource(resource: String, conf: SparkConf): String = {\n+  def renameMainAppResource(\n+      resource: String,\n+      conf: Option[SparkConf] = None,\n+      isJava: Boolean = true): String = {\n     if (isLocalAndResolvable(resource)) {\n-      SparkLauncher.NO_RESOURCE\n+      if (isJava) {",
    "line": 11
  }, {
    "author": {
      "login": "erikerlandson"
    },
    "body": "@holdenk does the java loading explaination work for you:\r\nhttps://github.com/apache/spark/pull/25870#issuecomment-541001902\r\n\r\nTo confirm - the timing of the java loading is to ensure java code can execute when its needed?",
    "commit": "f8df2273f426a92c6742b1520d7fc480ba75c975",
    "createdAt": "2019-10-15T19:17:32Z",
    "diffHunk": "@@ -259,12 +259,19 @@ private[spark] object KubernetesUtils extends Logging {\n       isLocalDependency(Utils.resolveURI(resource))\n   }\n \n-  def renameMainAppResource(resource: String, conf: SparkConf): String = {\n+  def renameMainAppResource(\n+      resource: String,\n+      conf: Option[SparkConf] = None,\n+      isJava: Boolean = true): String = {\n     if (isLocalAndResolvable(resource)) {\n-      SparkLauncher.NO_RESOURCE\n+      if (isJava) {",
    "line": 11
  }, {
    "author": {
      "login": "holdenk"
    },
    "body": "I think so, I was hoping we'd unify the code paths a bit more but that make sense.",
    "commit": "f8df2273f426a92c6742b1520d7fc480ba75c975",
    "createdAt": "2019-10-17T06:03:25Z",
    "diffHunk": "@@ -259,12 +259,19 @@ private[spark] object KubernetesUtils extends Logging {\n       isLocalDependency(Utils.resolveURI(resource))\n   }\n \n-  def renameMainAppResource(resource: String, conf: SparkConf): String = {\n+  def renameMainAppResource(\n+      resource: String,\n+      conf: Option[SparkConf] = None,\n+      isJava: Boolean = true): String = {\n     if (isLocalAndResolvable(resource)) {\n-      SparkLauncher.NO_RESOURCE\n+      if (isJava) {",
    "line": 11
  }],
  "prId": 25870
}, {
  "comments": [{
    "author": {
      "login": "dongjoon-hyun"
    },
    "body": "Can we use `language-neural` parameter name, @skonto ? Then, this function can be reused for `SparkR` later.",
    "commit": "f8df2273f426a92c6742b1520d7fc480ba75c975",
    "createdAt": "2019-10-28T01:43:19Z",
    "diffHunk": "@@ -259,12 +259,19 @@ private[spark] object KubernetesUtils extends Logging {\n       isLocalDependency(Utils.resolveURI(resource))\n   }\n \n-  def renameMainAppResource(resource: String, conf: SparkConf): String = {\n+  def renameMainAppResource(\n+      resource: String,\n+      conf: Option[SparkConf] = None,\n+      isJava: Boolean = true): String = {",
    "line": 8
  }, {
    "author": {
      "login": "dongjoon-hyun"
    },
    "body": "Also, let's not have the default value. This function is used only twice. And you changed both places in this PR. There is no reason to introduce a new default value.",
    "commit": "f8df2273f426a92c6742b1520d7fc480ba75c975",
    "createdAt": "2019-10-28T02:45:25Z",
    "diffHunk": "@@ -259,12 +259,19 @@ private[spark] object KubernetesUtils extends Logging {\n       isLocalDependency(Utils.resolveURI(resource))\n   }\n \n-  def renameMainAppResource(resource: String, conf: SparkConf): String = {\n+  def renameMainAppResource(\n+      resource: String,\n+      conf: Option[SparkConf] = None,\n+      isJava: Boolean = true): String = {",
    "line": 8
  }, {
    "author": {
      "login": "skonto"
    },
    "body": "@dongjoon-hyun ok sure.",
    "commit": "f8df2273f426a92c6742b1520d7fc480ba75c975",
    "createdAt": "2019-11-08T20:29:51Z",
    "diffHunk": "@@ -259,12 +259,19 @@ private[spark] object KubernetesUtils extends Logging {\n       isLocalDependency(Utils.resolveURI(resource))\n   }\n \n-  def renameMainAppResource(resource: String, conf: SparkConf): String = {\n+  def renameMainAppResource(\n+      resource: String,\n+      conf: Option[SparkConf] = None,\n+      isJava: Boolean = true): String = {",
    "line": 8
  }],
  "prId": 25870
}]