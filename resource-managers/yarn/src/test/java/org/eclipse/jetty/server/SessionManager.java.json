[{
  "comments": [{
    "author": {
      "login": "srowen"
    },
    "body": "OK yeah, seems like the least-bad option to get this working.",
    "commit": "49f0d8a49c1c75775d22e7c4117e854a9facbfa6",
    "createdAt": "2019-03-30T18:30:56Z",
    "diffHunk": "@@ -0,0 +1,289 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.eclipse.jetty.server;\n+\n+import javax.servlet.SessionCookieConfig;\n+import javax.servlet.SessionTrackingMode;\n+import javax.servlet.http.Cookie;\n+import javax.servlet.http.HttpServletRequest;\n+import javax.servlet.http.HttpSession;\n+import java.util.EventListener;\n+import java.util.Set;\n+\n+import org.eclipse.jetty.http.HttpCookie;\n+import org.eclipse.jetty.server.session.SessionHandler;\n+import org.eclipse.jetty.util.component.LifeCycle;\n+\n+/**\n+ * Adapted from https://github.com/eclipse/jetty.project/blob/jetty-9.3.25.v20180904/",
    "line": 34
  }, {
    "author": {
      "login": "felixcheung"
    },
    "body": "I think if the original file has a license, we can't replace or change it to Apache v2 at the topic.\r\n\r\nFYI, jetty eclipse license here https://github.com/eclipse/jetty.project/blob/jetty-9.4.x/LICENSE",
    "commit": "49f0d8a49c1c75775d22e7c4117e854a9facbfa6",
    "createdAt": "2019-03-30T23:11:17Z",
    "diffHunk": "@@ -0,0 +1,289 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.eclipse.jetty.server;\n+\n+import javax.servlet.SessionCookieConfig;\n+import javax.servlet.SessionTrackingMode;\n+import javax.servlet.http.Cookie;\n+import javax.servlet.http.HttpServletRequest;\n+import javax.servlet.http.HttpSession;\n+import java.util.EventListener;\n+import java.util.Set;\n+\n+import org.eclipse.jetty.http.HttpCookie;\n+import org.eclipse.jetty.server.session.SessionHandler;\n+import org.eclipse.jetty.util.component.LifeCycle;\n+\n+/**\n+ * Adapted from https://github.com/eclipse/jetty.project/blob/jetty-9.3.25.v20180904/",
    "line": 34
  }, {
    "author": {
      "login": "wangyum"
    },
    "body": "It will fail when running RAT checks:\r\n```\r\n========================================================================\r\nRunning Apache RAT checks\r\n========================================================================\r\nAttempting to fetch rat\r\nCould not find Apache license headers in the following files:\r\n !????? /home/jenkins/workspace/SparkPullRequestBuilder/resource-managers/yarn/src/test/java/org/eclipse/jetty/server/SessionManager.java\r\n !????? /home/jenkins/workspace/SparkPullRequestBuilder/resource-managers/yarn/src/test/java/org/eclipse/jetty/server/session/SessionHandler.java\r\n[error] running /home/jenkins/workspace/SparkPullRequestBuilder/dev/check-license ; received return code 1\r\n```",
    "commit": "49f0d8a49c1c75775d22e7c4117e854a9facbfa6",
    "createdAt": "2019-03-31T01:36:49Z",
    "diffHunk": "@@ -0,0 +1,289 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.eclipse.jetty.server;\n+\n+import javax.servlet.SessionCookieConfig;\n+import javax.servlet.SessionTrackingMode;\n+import javax.servlet.http.Cookie;\n+import javax.servlet.http.HttpServletRequest;\n+import javax.servlet.http.HttpSession;\n+import java.util.EventListener;\n+import java.util.Set;\n+\n+import org.eclipse.jetty.http.HttpCookie;\n+import org.eclipse.jetty.server.session.SessionHandler;\n+import org.eclipse.jetty.util.component.LifeCycle;\n+\n+/**\n+ * Adapted from https://github.com/eclipse/jetty.project/blob/jetty-9.3.25.v20180904/",
    "line": 34
  }, {
    "author": {
      "login": "srowen"
    },
    "body": "If these are a straight copy, then it needs the original source's copyright to be retained as-is, yes, and we can't add an ASF header. You can exclude this file from RAT in `dev/.rat-excludes` (You are welcome to update it to 0.13 too while you're at it.)\r\n\r\nHandling of EPL v1.0 is a little more nuanced:\r\nhttps://apache.org/legal/resolved.html#weak-copyleft-licenses\r\n\r\nThe notes don't quite cover this case, of test-only code. The logic is that we want to avoid users creating a derivative work of this code. I don't see any case where a downstream user would modify this or include it in a software product; I can imagine someone bundling the Spark test code as-is, but not depending on it.\r\n\r\nI'll ask legal if there's more to it.",
    "commit": "49f0d8a49c1c75775d22e7c4117e854a9facbfa6",
    "createdAt": "2019-03-31T17:01:26Z",
    "diffHunk": "@@ -0,0 +1,289 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.eclipse.jetty.server;\n+\n+import javax.servlet.SessionCookieConfig;\n+import javax.servlet.SessionTrackingMode;\n+import javax.servlet.http.Cookie;\n+import javax.servlet.http.HttpServletRequest;\n+import javax.servlet.http.HttpSession;\n+import java.util.EventListener;\n+import java.util.Set;\n+\n+import org.eclipse.jetty.http.HttpCookie;\n+import org.eclipse.jetty.server.session.SessionHandler;\n+import org.eclipse.jetty.util.component.LifeCycle;\n+\n+/**\n+ * Adapted from https://github.com/eclipse/jetty.project/blob/jetty-9.3.25.v20180904/",
    "line": 34
  }, {
    "author": {
      "login": "srowen"
    },
    "body": "Actually, it's dual licensed under the Apache License 2.0 and EPL v1.0. We need to keep the original header and exclude the RAT check in both files, but there's no other issue here.",
    "commit": "49f0d8a49c1c75775d22e7c4117e854a9facbfa6",
    "createdAt": "2019-03-31T19:09:52Z",
    "diffHunk": "@@ -0,0 +1,289 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.eclipse.jetty.server;\n+\n+import javax.servlet.SessionCookieConfig;\n+import javax.servlet.SessionTrackingMode;\n+import javax.servlet.http.Cookie;\n+import javax.servlet.http.HttpServletRequest;\n+import javax.servlet.http.HttpSession;\n+import java.util.EventListener;\n+import java.util.Set;\n+\n+import org.eclipse.jetty.http.HttpCookie;\n+import org.eclipse.jetty.server.session.SessionHandler;\n+import org.eclipse.jetty.util.component.LifeCycle;\n+\n+/**\n+ * Adapted from https://github.com/eclipse/jetty.project/blob/jetty-9.3.25.v20180904/",
    "line": 34
  }],
  "prId": 24115
}]