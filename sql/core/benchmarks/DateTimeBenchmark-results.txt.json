[{
  "comments": [{
    "author": {
      "login": "MaxGekk"
    },
    "body": "This is interesting. Performance drop ~x12. /cc @hvanhovell ",
    "commit": "cb12aaecdff40b63f4cb0cf8df0c8ceecc7b5440",
    "createdAt": "2019-01-27T10:39:23Z",
    "diffHunk": "@@ -0,0 +1,416 @@\n+================================================================================================\n+Extract components\n+================================================================================================\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+cast to timestamp:                       Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+cast to timestamp wholestage off               276 /  290         36.2          27.6       1.0X\n+cast to timestamp wholestage on                254 /  267         39.4          25.4       1.1X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+year of timestamp:                       Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+year of timestamp wholestage off               699 /  700         14.3          69.9       1.0X\n+year of timestamp wholestage on                680 /  689         14.7          68.0       1.0X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+quarter of timestamp:                    Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+quarter of timestamp wholestage off            848 /  864         11.8          84.8       1.0X\n+quarter of timestamp wholestage on             784 /  797         12.8          78.4       1.1X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+month of timestamp:                      Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+month of timestamp wholestage off              652 /  653         15.3          65.2       1.0X\n+month of timestamp wholestage on               671 /  677         14.9          67.1       1.0X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+weekofyear of timestamp:                 Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+weekofyear of timestamp wholestage off        1233 / 1233          8.1         123.3       1.0X\n+weekofyear of timestamp wholestage on         1236 / 1240          8.1         123.6       1.0X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+day of timestamp:                        Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+day of timestamp wholestage off                649 /  655         15.4          64.9       1.0X\n+day of timestamp wholestage on                 670 /  678         14.9          67.0       1.0X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+dayofyear of timestamp:                  Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+dayofyear of timestamp wholestage off          692 /  704         14.5          69.2       1.0X\n+dayofyear of timestamp wholestage on           695 /  698         14.4          69.5       1.0X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+dayofmonth of timestamp:                 Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+dayofmonth of timestamp wholestage off         660 /  660         15.1          66.0       1.0X\n+dayofmonth of timestamp wholestage on          667 /  671         15.0          66.7       1.0X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+dayofweek of timestamp:                  Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+dayofweek of timestamp wholestage off          798 /  802         12.5          79.8       1.0X\n+dayofweek of timestamp wholestage on           804 /  820         12.4          80.4       1.0X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+weekday of timestamp:                    Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+weekday of timestamp wholestage off            759 /  760         13.2          75.9       1.0X\n+weekday of timestamp wholestage on             774 /  813         12.9          77.4       1.0X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+hour of timestamp:                       Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+hour of timestamp wholestage off               465 /  468         21.5          46.5       1.0X\n+hour of timestamp wholestage on                443 /  451         22.6          44.3       1.0X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+minute of timestamp:                     Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+minute of timestamp wholestage off             439 /  440         22.8          43.9       1.0X\n+minute of timestamp wholestage on              448 /  452         22.3          44.8       1.0X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+second of timestamp:                     Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+second of timestamp wholestage off             438 /  448         22.8          43.8       1.0X\n+second of timestamp wholestage on              430 /  445         23.3          43.0       1.0X\n+\n+\n+================================================================================================\n+Current date and time\n+================================================================================================\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+current_date:                            Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+current_date wholestage off                    212 /  213         47.2          21.2       1.0X\n+current_date wholestage on                     225 /  230         44.4          22.5       0.9X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+current_timestamp:                       Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+current_timestamp wholestage off               216 /  217         46.3          21.6       1.0X\n+current_timestamp wholestage on                210 /  216         47.7          21.0       1.0X\n+\n+\n+================================================================================================\n+Date arithmetic\n+================================================================================================\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+cast to date:                            Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+cast to date wholestage off                    463 /  464         21.6          46.3       1.0X\n+cast to date wholestage on                     502 /  508         19.9          50.2       0.9X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+last_day:                                Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+last_day wholestage off                        693 /  701         14.4          69.3       1.0X\n+last_day wholestage on                         697 /  706         14.3          69.7       1.0X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+next_day:                                Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+next_day wholestage off                        553 /  570         18.1          55.3       1.0X\n+next_day wholestage on                         595 /  597         16.8          59.5       0.9X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+date_add:                                Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+date_add wholestage off                        459 /  463         21.8          45.9       1.0X\n+date_add wholestage on                         473 /  477         21.1          47.3       1.0X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+date_sub:                                Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+date_sub wholestage off                        473 /  475         21.1          47.3       1.0X\n+date_sub wholestage on                         479 /  497         20.9          47.9       1.0X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+add_months:                              Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+add_months wholestage off                      898 /  908         11.1          89.8       1.0X\n+add_months wholestage on                       898 /  906         11.1          89.8       1.0X\n+\n+\n+================================================================================================\n+Formatting dates\n+================================================================================================\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+format date:                             Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+format date wholestage off                    7181 / 7228          1.4         718.1       1.0X\n+format date wholestage on                     7303 / 7356          1.4         730.3       1.0X\n+\n+\n+================================================================================================\n+Formatting timestamps\n+================================================================================================\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+from_unixtime:                           Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+from_unixtime wholestage off                  7472 / 7476          1.3         747.2       1.0X\n+from_unixtime wholestage on                   7453 / 7460          1.3         745.3       1.0X\n+\n+\n+================================================================================================\n+Convert timestamps\n+================================================================================================\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+from_utc_timestamp:                      Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+from_utc_timestamp wholestage off              894 /  895         11.2          89.4       1.0X\n+from_utc_timestamp wholestage on               881 /  883         11.4          88.1       1.0X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+to_utc_timestamp:                        Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+to_utc_timestamp wholestage off                909 /  910         11.0          90.9       1.0X\n+to_utc_timestamp wholestage on                 903 /  906         11.1          90.3       1.0X\n+\n+\n+================================================================================================\n+Intervals\n+================================================================================================\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+cast interval:                           Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+cast interval wholestage off                   245 /  256         40.7          24.5       1.0X\n+cast interval wholestage on                    227 /  230         44.0          22.7       1.1X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+datediff:                                Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+datediff wholestage off                        735 /  738         13.6          73.5       1.0X\n+datediff wholestage on                         687 /  689         14.6          68.7       1.1X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+months_between:                          Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+months_between wholestage off                 1653 / 1654          6.1         165.3       1.0X\n+months_between wholestage on                  1630 / 1636          6.1         163.0       1.0X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+window:                                  Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+window wholestage off                         1636 / 1661          0.6        1635.9       1.0X\n+window wholestage on                        19997 / 20240          0.1       19997.4       0.1X",
    "line": 236
  }, {
    "author": {
      "login": "hvanhovell"
    },
    "body": "It is, let's address this in a follow-up.",
    "commit": "cb12aaecdff40b63f4cb0cf8df0c8ceecc7b5440",
    "createdAt": "2019-01-28T13:20:34Z",
    "diffHunk": "@@ -0,0 +1,416 @@\n+================================================================================================\n+Extract components\n+================================================================================================\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+cast to timestamp:                       Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+cast to timestamp wholestage off               276 /  290         36.2          27.6       1.0X\n+cast to timestamp wholestage on                254 /  267         39.4          25.4       1.1X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+year of timestamp:                       Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+year of timestamp wholestage off               699 /  700         14.3          69.9       1.0X\n+year of timestamp wholestage on                680 /  689         14.7          68.0       1.0X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+quarter of timestamp:                    Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+quarter of timestamp wholestage off            848 /  864         11.8          84.8       1.0X\n+quarter of timestamp wholestage on             784 /  797         12.8          78.4       1.1X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+month of timestamp:                      Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+month of timestamp wholestage off              652 /  653         15.3          65.2       1.0X\n+month of timestamp wholestage on               671 /  677         14.9          67.1       1.0X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+weekofyear of timestamp:                 Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+weekofyear of timestamp wholestage off        1233 / 1233          8.1         123.3       1.0X\n+weekofyear of timestamp wholestage on         1236 / 1240          8.1         123.6       1.0X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+day of timestamp:                        Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+day of timestamp wholestage off                649 /  655         15.4          64.9       1.0X\n+day of timestamp wholestage on                 670 /  678         14.9          67.0       1.0X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+dayofyear of timestamp:                  Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+dayofyear of timestamp wholestage off          692 /  704         14.5          69.2       1.0X\n+dayofyear of timestamp wholestage on           695 /  698         14.4          69.5       1.0X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+dayofmonth of timestamp:                 Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+dayofmonth of timestamp wholestage off         660 /  660         15.1          66.0       1.0X\n+dayofmonth of timestamp wholestage on          667 /  671         15.0          66.7       1.0X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+dayofweek of timestamp:                  Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+dayofweek of timestamp wholestage off          798 /  802         12.5          79.8       1.0X\n+dayofweek of timestamp wholestage on           804 /  820         12.4          80.4       1.0X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+weekday of timestamp:                    Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+weekday of timestamp wholestage off            759 /  760         13.2          75.9       1.0X\n+weekday of timestamp wholestage on             774 /  813         12.9          77.4       1.0X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+hour of timestamp:                       Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+hour of timestamp wholestage off               465 /  468         21.5          46.5       1.0X\n+hour of timestamp wholestage on                443 /  451         22.6          44.3       1.0X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+minute of timestamp:                     Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+minute of timestamp wholestage off             439 /  440         22.8          43.9       1.0X\n+minute of timestamp wholestage on              448 /  452         22.3          44.8       1.0X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+second of timestamp:                     Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+second of timestamp wholestage off             438 /  448         22.8          43.8       1.0X\n+second of timestamp wholestage on              430 /  445         23.3          43.0       1.0X\n+\n+\n+================================================================================================\n+Current date and time\n+================================================================================================\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+current_date:                            Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+current_date wholestage off                    212 /  213         47.2          21.2       1.0X\n+current_date wholestage on                     225 /  230         44.4          22.5       0.9X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+current_timestamp:                       Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+current_timestamp wholestage off               216 /  217         46.3          21.6       1.0X\n+current_timestamp wholestage on                210 /  216         47.7          21.0       1.0X\n+\n+\n+================================================================================================\n+Date arithmetic\n+================================================================================================\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+cast to date:                            Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+cast to date wholestage off                    463 /  464         21.6          46.3       1.0X\n+cast to date wholestage on                     502 /  508         19.9          50.2       0.9X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+last_day:                                Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+last_day wholestage off                        693 /  701         14.4          69.3       1.0X\n+last_day wholestage on                         697 /  706         14.3          69.7       1.0X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+next_day:                                Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+next_day wholestage off                        553 /  570         18.1          55.3       1.0X\n+next_day wholestage on                         595 /  597         16.8          59.5       0.9X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+date_add:                                Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+date_add wholestage off                        459 /  463         21.8          45.9       1.0X\n+date_add wholestage on                         473 /  477         21.1          47.3       1.0X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+date_sub:                                Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+date_sub wholestage off                        473 /  475         21.1          47.3       1.0X\n+date_sub wholestage on                         479 /  497         20.9          47.9       1.0X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+add_months:                              Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+add_months wholestage off                      898 /  908         11.1          89.8       1.0X\n+add_months wholestage on                       898 /  906         11.1          89.8       1.0X\n+\n+\n+================================================================================================\n+Formatting dates\n+================================================================================================\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+format date:                             Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+format date wholestage off                    7181 / 7228          1.4         718.1       1.0X\n+format date wholestage on                     7303 / 7356          1.4         730.3       1.0X\n+\n+\n+================================================================================================\n+Formatting timestamps\n+================================================================================================\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+from_unixtime:                           Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+from_unixtime wholestage off                  7472 / 7476          1.3         747.2       1.0X\n+from_unixtime wholestage on                   7453 / 7460          1.3         745.3       1.0X\n+\n+\n+================================================================================================\n+Convert timestamps\n+================================================================================================\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+from_utc_timestamp:                      Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+from_utc_timestamp wholestage off              894 /  895         11.2          89.4       1.0X\n+from_utc_timestamp wholestage on               881 /  883         11.4          88.1       1.0X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+to_utc_timestamp:                        Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+to_utc_timestamp wholestage off                909 /  910         11.0          90.9       1.0X\n+to_utc_timestamp wholestage on                 903 /  906         11.1          90.3       1.0X\n+\n+\n+================================================================================================\n+Intervals\n+================================================================================================\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+cast interval:                           Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+cast interval wholestage off                   245 /  256         40.7          24.5       1.0X\n+cast interval wholestage on                    227 /  230         44.0          22.7       1.1X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+datediff:                                Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+datediff wholestage off                        735 /  738         13.6          73.5       1.0X\n+datediff wholestage on                         687 /  689         14.6          68.7       1.1X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+months_between:                          Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+months_between wholestage off                 1653 / 1654          6.1         165.3       1.0X\n+months_between wholestage on                  1630 / 1636          6.1         163.0       1.0X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+window:                                  Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+window wholestage off                         1636 / 1661          0.6        1635.9       1.0X\n+window wholestage on                        19997 / 20240          0.1       19997.4       0.1X",
    "line": 236
  }, {
    "author": {
      "login": "gatorsmile"
    },
    "body": "Do we have a JIRA to track this?",
    "commit": "cb12aaecdff40b63f4cb0cf8df0c8ceecc7b5440",
    "createdAt": "2019-01-30T03:47:10Z",
    "diffHunk": "@@ -0,0 +1,416 @@\n+================================================================================================\n+Extract components\n+================================================================================================\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+cast to timestamp:                       Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+cast to timestamp wholestage off               276 /  290         36.2          27.6       1.0X\n+cast to timestamp wholestage on                254 /  267         39.4          25.4       1.1X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+year of timestamp:                       Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+year of timestamp wholestage off               699 /  700         14.3          69.9       1.0X\n+year of timestamp wholestage on                680 /  689         14.7          68.0       1.0X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+quarter of timestamp:                    Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+quarter of timestamp wholestage off            848 /  864         11.8          84.8       1.0X\n+quarter of timestamp wholestage on             784 /  797         12.8          78.4       1.1X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+month of timestamp:                      Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+month of timestamp wholestage off              652 /  653         15.3          65.2       1.0X\n+month of timestamp wholestage on               671 /  677         14.9          67.1       1.0X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+weekofyear of timestamp:                 Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+weekofyear of timestamp wholestage off        1233 / 1233          8.1         123.3       1.0X\n+weekofyear of timestamp wholestage on         1236 / 1240          8.1         123.6       1.0X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+day of timestamp:                        Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+day of timestamp wholestage off                649 /  655         15.4          64.9       1.0X\n+day of timestamp wholestage on                 670 /  678         14.9          67.0       1.0X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+dayofyear of timestamp:                  Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+dayofyear of timestamp wholestage off          692 /  704         14.5          69.2       1.0X\n+dayofyear of timestamp wholestage on           695 /  698         14.4          69.5       1.0X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+dayofmonth of timestamp:                 Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+dayofmonth of timestamp wholestage off         660 /  660         15.1          66.0       1.0X\n+dayofmonth of timestamp wholestage on          667 /  671         15.0          66.7       1.0X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+dayofweek of timestamp:                  Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+dayofweek of timestamp wholestage off          798 /  802         12.5          79.8       1.0X\n+dayofweek of timestamp wholestage on           804 /  820         12.4          80.4       1.0X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+weekday of timestamp:                    Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+weekday of timestamp wholestage off            759 /  760         13.2          75.9       1.0X\n+weekday of timestamp wholestage on             774 /  813         12.9          77.4       1.0X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+hour of timestamp:                       Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+hour of timestamp wholestage off               465 /  468         21.5          46.5       1.0X\n+hour of timestamp wholestage on                443 /  451         22.6          44.3       1.0X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+minute of timestamp:                     Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+minute of timestamp wholestage off             439 /  440         22.8          43.9       1.0X\n+minute of timestamp wholestage on              448 /  452         22.3          44.8       1.0X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+second of timestamp:                     Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+second of timestamp wholestage off             438 /  448         22.8          43.8       1.0X\n+second of timestamp wholestage on              430 /  445         23.3          43.0       1.0X\n+\n+\n+================================================================================================\n+Current date and time\n+================================================================================================\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+current_date:                            Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+current_date wholestage off                    212 /  213         47.2          21.2       1.0X\n+current_date wholestage on                     225 /  230         44.4          22.5       0.9X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+current_timestamp:                       Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+current_timestamp wholestage off               216 /  217         46.3          21.6       1.0X\n+current_timestamp wholestage on                210 /  216         47.7          21.0       1.0X\n+\n+\n+================================================================================================\n+Date arithmetic\n+================================================================================================\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+cast to date:                            Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+cast to date wholestage off                    463 /  464         21.6          46.3       1.0X\n+cast to date wholestage on                     502 /  508         19.9          50.2       0.9X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+last_day:                                Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+last_day wholestage off                        693 /  701         14.4          69.3       1.0X\n+last_day wholestage on                         697 /  706         14.3          69.7       1.0X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+next_day:                                Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+next_day wholestage off                        553 /  570         18.1          55.3       1.0X\n+next_day wholestage on                         595 /  597         16.8          59.5       0.9X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+date_add:                                Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+date_add wholestage off                        459 /  463         21.8          45.9       1.0X\n+date_add wholestage on                         473 /  477         21.1          47.3       1.0X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+date_sub:                                Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+date_sub wholestage off                        473 /  475         21.1          47.3       1.0X\n+date_sub wholestage on                         479 /  497         20.9          47.9       1.0X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+add_months:                              Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+add_months wholestage off                      898 /  908         11.1          89.8       1.0X\n+add_months wholestage on                       898 /  906         11.1          89.8       1.0X\n+\n+\n+================================================================================================\n+Formatting dates\n+================================================================================================\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+format date:                             Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+format date wholestage off                    7181 / 7228          1.4         718.1       1.0X\n+format date wholestage on                     7303 / 7356          1.4         730.3       1.0X\n+\n+\n+================================================================================================\n+Formatting timestamps\n+================================================================================================\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+from_unixtime:                           Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+from_unixtime wholestage off                  7472 / 7476          1.3         747.2       1.0X\n+from_unixtime wholestage on                   7453 / 7460          1.3         745.3       1.0X\n+\n+\n+================================================================================================\n+Convert timestamps\n+================================================================================================\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+from_utc_timestamp:                      Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+from_utc_timestamp wholestage off              894 /  895         11.2          89.4       1.0X\n+from_utc_timestamp wholestage on               881 /  883         11.4          88.1       1.0X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+to_utc_timestamp:                        Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+to_utc_timestamp wholestage off                909 /  910         11.0          90.9       1.0X\n+to_utc_timestamp wholestage on                 903 /  906         11.1          90.3       1.0X\n+\n+\n+================================================================================================\n+Intervals\n+================================================================================================\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+cast interval:                           Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+cast interval wholestage off                   245 /  256         40.7          24.5       1.0X\n+cast interval wholestage on                    227 /  230         44.0          22.7       1.1X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+datediff:                                Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+datediff wholestage off                        735 /  738         13.6          73.5       1.0X\n+datediff wholestage on                         687 /  689         14.6          68.7       1.1X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+months_between:                          Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+months_between wholestage off                 1653 / 1654          6.1         165.3       1.0X\n+months_between wholestage on                  1630 / 1636          6.1         163.0       1.0X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+window:                                  Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+window wholestage off                         1636 / 1661          0.6        1635.9       1.0X\n+window wholestage on                        19997 / 20240          0.1       19997.4       0.1X",
    "line": 236
  }],
  "prId": 23661
}, {
  "comments": [{
    "author": {
      "login": "MaxGekk"
    },
    "body": "Truncation to `QUARTER` is comparable slow. Need to re-run the benchmark with new implementation: https://github.com/apache/spark/pull/23641/files#diff-da60f07e1826788aaeb07f295fae4b8aL747",
    "commit": "cb12aaecdff40b63f4cb0cf8df0c8ceecc7b5440",
    "createdAt": "2019-01-27T10:41:31Z",
    "diffHunk": "@@ -0,0 +1,416 @@\n+================================================================================================\n+Extract components\n+================================================================================================\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+cast to timestamp:                       Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+cast to timestamp wholestage off               276 /  290         36.2          27.6       1.0X\n+cast to timestamp wholestage on                254 /  267         39.4          25.4       1.1X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+year of timestamp:                       Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+year of timestamp wholestage off               699 /  700         14.3          69.9       1.0X\n+year of timestamp wholestage on                680 /  689         14.7          68.0       1.0X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+quarter of timestamp:                    Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+quarter of timestamp wholestage off            848 /  864         11.8          84.8       1.0X\n+quarter of timestamp wholestage on             784 /  797         12.8          78.4       1.1X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+month of timestamp:                      Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+month of timestamp wholestage off              652 /  653         15.3          65.2       1.0X\n+month of timestamp wholestage on               671 /  677         14.9          67.1       1.0X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+weekofyear of timestamp:                 Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+weekofyear of timestamp wholestage off        1233 / 1233          8.1         123.3       1.0X\n+weekofyear of timestamp wholestage on         1236 / 1240          8.1         123.6       1.0X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+day of timestamp:                        Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+day of timestamp wholestage off                649 /  655         15.4          64.9       1.0X\n+day of timestamp wholestage on                 670 /  678         14.9          67.0       1.0X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+dayofyear of timestamp:                  Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+dayofyear of timestamp wholestage off          692 /  704         14.5          69.2       1.0X\n+dayofyear of timestamp wholestage on           695 /  698         14.4          69.5       1.0X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+dayofmonth of timestamp:                 Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+dayofmonth of timestamp wholestage off         660 /  660         15.1          66.0       1.0X\n+dayofmonth of timestamp wholestage on          667 /  671         15.0          66.7       1.0X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+dayofweek of timestamp:                  Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+dayofweek of timestamp wholestage off          798 /  802         12.5          79.8       1.0X\n+dayofweek of timestamp wholestage on           804 /  820         12.4          80.4       1.0X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+weekday of timestamp:                    Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+weekday of timestamp wholestage off            759 /  760         13.2          75.9       1.0X\n+weekday of timestamp wholestage on             774 /  813         12.9          77.4       1.0X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+hour of timestamp:                       Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+hour of timestamp wholestage off               465 /  468         21.5          46.5       1.0X\n+hour of timestamp wholestage on                443 /  451         22.6          44.3       1.0X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+minute of timestamp:                     Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+minute of timestamp wholestage off             439 /  440         22.8          43.9       1.0X\n+minute of timestamp wholestage on              448 /  452         22.3          44.8       1.0X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+second of timestamp:                     Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+second of timestamp wholestage off             438 /  448         22.8          43.8       1.0X\n+second of timestamp wholestage on              430 /  445         23.3          43.0       1.0X\n+\n+\n+================================================================================================\n+Current date and time\n+================================================================================================\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+current_date:                            Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+current_date wholestage off                    212 /  213         47.2          21.2       1.0X\n+current_date wholestage on                     225 /  230         44.4          22.5       0.9X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+current_timestamp:                       Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+current_timestamp wholestage off               216 /  217         46.3          21.6       1.0X\n+current_timestamp wholestage on                210 /  216         47.7          21.0       1.0X\n+\n+\n+================================================================================================\n+Date arithmetic\n+================================================================================================\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+cast to date:                            Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+cast to date wholestage off                    463 /  464         21.6          46.3       1.0X\n+cast to date wholestage on                     502 /  508         19.9          50.2       0.9X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+last_day:                                Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+last_day wholestage off                        693 /  701         14.4          69.3       1.0X\n+last_day wholestage on                         697 /  706         14.3          69.7       1.0X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+next_day:                                Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+next_day wholestage off                        553 /  570         18.1          55.3       1.0X\n+next_day wholestage on                         595 /  597         16.8          59.5       0.9X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+date_add:                                Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+date_add wholestage off                        459 /  463         21.8          45.9       1.0X\n+date_add wholestage on                         473 /  477         21.1          47.3       1.0X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+date_sub:                                Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+date_sub wholestage off                        473 /  475         21.1          47.3       1.0X\n+date_sub wholestage on                         479 /  497         20.9          47.9       1.0X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+add_months:                              Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+add_months wholestage off                      898 /  908         11.1          89.8       1.0X\n+add_months wholestage on                       898 /  906         11.1          89.8       1.0X\n+\n+\n+================================================================================================\n+Formatting dates\n+================================================================================================\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+format date:                             Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+format date wholestage off                    7181 / 7228          1.4         718.1       1.0X\n+format date wholestage on                     7303 / 7356          1.4         730.3       1.0X\n+\n+\n+================================================================================================\n+Formatting timestamps\n+================================================================================================\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+from_unixtime:                           Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+from_unixtime wholestage off                  7472 / 7476          1.3         747.2       1.0X\n+from_unixtime wholestage on                   7453 / 7460          1.3         745.3       1.0X\n+\n+\n+================================================================================================\n+Convert timestamps\n+================================================================================================\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+from_utc_timestamp:                      Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+from_utc_timestamp wholestage off              894 /  895         11.2          89.4       1.0X\n+from_utc_timestamp wholestage on               881 /  883         11.4          88.1       1.0X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+to_utc_timestamp:                        Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+to_utc_timestamp wholestage off                909 /  910         11.0          90.9       1.0X\n+to_utc_timestamp wholestage on                 903 /  906         11.1          90.3       1.0X\n+\n+\n+================================================================================================\n+Intervals\n+================================================================================================\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+cast interval:                           Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+cast interval wholestage off                   245 /  256         40.7          24.5       1.0X\n+cast interval wholestage on                    227 /  230         44.0          22.7       1.1X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+datediff:                                Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+datediff wholestage off                        735 /  738         13.6          73.5       1.0X\n+datediff wholestage on                         687 /  689         14.6          68.7       1.1X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+months_between:                          Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+months_between wholestage off                 1653 / 1654          6.1         165.3       1.0X\n+months_between wholestage on                  1630 / 1636          6.1         163.0       1.0X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+window:                                  Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+window wholestage off                         1636 / 1661          0.6        1635.9       1.0X\n+window wholestage on                        19997 / 20240          0.1       19997.4       0.1X\n+\n+\n+================================================================================================\n+Truncation\n+================================================================================================\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+date_trunc YEAR:                         Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+date_trunc YEAR wholestage off                 889 /  892         11.2          88.9       1.0X\n+date_trunc YEAR wholestage on                  831 /  837         12.0          83.1       1.1X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+date_trunc YYYY:                         Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+date_trunc YYYY wholestage off                 910 /  917         11.0          91.0       1.0X\n+date_trunc YYYY wholestage on                  834 /  849         12.0          83.4       1.1X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+date_trunc YY:                           Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+date_trunc YY wholestage off                   897 /  901         11.2          89.7       1.0X\n+date_trunc YY wholestage on                    836 /  841         12.0          83.6       1.1X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+date_trunc MON:                          Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+date_trunc MON wholestage off                  942 /  944         10.6          94.2       1.0X\n+date_trunc MON wholestage on                   881 /  887         11.3          88.1       1.1X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+date_trunc MONTH:                        Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+date_trunc MONTH wholestage off                935 /  937         10.7          93.5       1.0X\n+date_trunc MONTH wholestage on                 881 /  886         11.4          88.1       1.1X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+date_trunc MM:                           Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+date_trunc MM wholestage off                   934 /  935         10.7          93.4       1.0X\n+date_trunc MM wholestage on                    878 /  880         11.4          87.8       1.1X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+date_trunc DAY:                          Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+date_trunc DAY wholestage off                  472 /  478         21.2          47.2       1.0X\n+date_trunc DAY wholestage on                   415 /  418         24.1          41.5       1.1X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+date_trunc DD:                           Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+date_trunc DD wholestage off                   472 /  485         21.2          47.2       1.0X\n+date_trunc DD wholestage on                    414 /  417         24.1          41.4       1.1X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+date_trunc HOUR:                         Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+date_trunc HOUR wholestage off                 451 /  462         22.2          45.1       1.0X\n+date_trunc HOUR wholestage on                  422 /  429         23.7          42.2       1.1X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+date_trunc MINUTE:                       Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+date_trunc MINUTE wholestage off               291 /  291         34.4          29.1       1.0X\n+date_trunc MINUTE wholestage on                268 /  272         37.3          26.8       1.1X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+date_trunc SECOND:                       Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+date_trunc SECOND wholestage off               290 /  290         34.5          29.0       1.0X\n+date_trunc SECOND wholestage on                266 /  270         37.6          26.6       1.1X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+date_trunc WEEK:                         Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+date_trunc WEEK wholestage off                 794 /  797         12.6          79.4       1.0X\n+date_trunc WEEK wholestage on                  754 /  761         13.3          75.4       1.1X\n+\n+Java HotSpot(TM) 64-Bit Server VM 1.8.0_202-ea-b03 on Mac OS X 10.14.2\n+Intel(R) Core(TM) i7-4850HQ CPU @ 2.30GHz\n+date_trunc QUARTER:                      Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+------------------------------------------------------------------------------------------------\n+date_trunc QUARTER wholestage off             5261 / 5271          1.9         526.1       1.0X\n+date_trunc QUARTER wholestage on              5145 / 5151          1.9         514.5       1.0X",
    "line": 332
  }],
  "prId": 23661
}]