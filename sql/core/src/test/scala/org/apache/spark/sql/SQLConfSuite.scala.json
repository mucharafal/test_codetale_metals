[{
  "comments": [{
    "author": {
      "login": "andrewor14"
    },
    "body": "should this be in a try finally?\n",
    "commit": "26c42912fee12ea1327e0380f84e14375e590038",
    "createdAt": "2015-09-04T18:38:57Z",
    "diffHunk": "@@ -73,8 +77,10 @@ class SQLConfSuite extends QueryTest with SharedSQLContext {\n \n   test(\"deprecated property\") {\n     ctx.conf.clear()\n+    val original = ctx.conf.numShufflePartitions\n     sql(s\"set ${SQLConf.Deprecated.MAPRED_REDUCE_TASKS}=10\")\n     assert(ctx.conf.numShufflePartitions === 10)\n+    sql(s\"set ${SQLConf.SHUFFLE_PARTITIONS}=$original\")"
  }],
  "prId": 8602
}, {
  "comments": [{
    "author": {
      "login": "andrewor14"
    },
    "body": "also, should we assert that `original` is not already equal to 10?\n",
    "commit": "26c42912fee12ea1327e0380f84e14375e590038",
    "createdAt": "2015-09-04T18:39:41Z",
    "diffHunk": "@@ -73,8 +77,10 @@ class SQLConfSuite extends QueryTest with SharedSQLContext {\n \n   test(\"deprecated property\") {\n     ctx.conf.clear()\n+    val original = ctx.conf.numShufflePartitions\n     sql(s\"set ${SQLConf.Deprecated.MAPRED_REDUCE_TASKS}=10\")\n     assert(ctx.conf.numShufflePartitions === 10)"
  }, {
    "author": {
      "login": "davies"
    },
    "body": "Won't change much the existing test in this PR.\n",
    "commit": "26c42912fee12ea1327e0380f84e14375e590038",
    "createdAt": "2015-09-04T18:47:51Z",
    "diffHunk": "@@ -73,8 +77,10 @@ class SQLConfSuite extends QueryTest with SharedSQLContext {\n \n   test(\"deprecated property\") {\n     ctx.conf.clear()\n+    val original = ctx.conf.numShufflePartitions\n     sql(s\"set ${SQLConf.Deprecated.MAPRED_REDUCE_TASKS}=10\")\n     assert(ctx.conf.numShufflePartitions === 10)"
  }],
  "prId": 8602
}, {
  "comments": [{
    "author": {
      "login": "cloud-fan"
    },
    "body": "There is a merge conflict with https://github.com/apache/spark/pull/8584 here, we should change `ctx` to `sparkContext`. https://github.com/apache/spark/pull/8612 fixed it.\n",
    "commit": "26c42912fee12ea1327e0380f84e14375e590038",
    "createdAt": "2015-09-05T08:18:32Z",
    "diffHunk": "@@ -73,8 +77,13 @@ class SQLConfSuite extends QueryTest with SharedSQLContext {\n \n   test(\"deprecated property\") {\n     sqlContext.conf.clear()\n-    sql(s\"set ${SQLConf.Deprecated.MAPRED_REDUCE_TASKS}=10\")\n-    assert(sqlContext.conf.numShufflePartitions === 10)\n+    val original = sqlContext.conf.numShufflePartitions\n+    try{\n+      sql(s\"set ${SQLConf.Deprecated.MAPRED_REDUCE_TASKS}=10\")\n+      assert(ctx.conf.numShufflePartitions === 10)",
    "line": 41
  }, {
    "author": {
      "login": "davies"
    },
    "body": "Thanks\n",
    "commit": "26c42912fee12ea1327e0380f84e14375e590038",
    "createdAt": "2015-09-05T16:42:23Z",
    "diffHunk": "@@ -73,8 +77,13 @@ class SQLConfSuite extends QueryTest with SharedSQLContext {\n \n   test(\"deprecated property\") {\n     sqlContext.conf.clear()\n-    sql(s\"set ${SQLConf.Deprecated.MAPRED_REDUCE_TASKS}=10\")\n-    assert(sqlContext.conf.numShufflePartitions === 10)\n+    val original = sqlContext.conf.numShufflePartitions\n+    try{\n+      sql(s\"set ${SQLConf.Deprecated.MAPRED_REDUCE_TASKS}=10\")\n+      assert(ctx.conf.numShufflePartitions === 10)",
    "line": 41
  }],
  "prId": 8602
}]