[{
  "comments": [{
    "author": {
      "login": "tdas"
    },
    "body": "I think we should still check whether re-executing the last batch uses the watermark from the offset log correctly or not.\r\n\r\nSo i suggest deleting the commit log to force execution of the last batch.",
    "commit": "0c3e20c2e3586ad406796014397a1791c2305fe5",
    "createdAt": "2017-03-17T22:01:03Z",
    "diffHunk": "@@ -327,7 +328,8 @@ class StreamingAggregationSuite extends StateStoreMetricsTest with BeforeAndAfte\n         true\n       },\n       StartStream(ProcessingTime(\"10 day\"), triggerClock = clock),\n-      CheckLastBatch((20L, 1), (85L, 1)),\n+      // Commit log should prevent batch from running again"
  }],
  "prId": 17219
}, {
  "comments": [{
    "author": {
      "login": "tdas"
    },
    "body": "Same comment as below.",
    "commit": "0c3e20c2e3586ad406796014397a1791c2305fe5",
    "createdAt": "2017-03-17T22:01:46Z",
    "diffHunk": "@@ -277,7 +277,8 @@ class StreamingAggregationSuite extends StateStoreMetricsTest with BeforeAndAfte\n         true\n       },\n       StartStream(ProcessingTime(\"10 seconds\"), triggerClock = clock),\n-      CheckLastBatch((20L, 1), (85L, 1)),\n+      // The commit log should ensure that we do not run another batch\n+      CheckLastBatch(),"
  }],
  "prId": 17219
}]