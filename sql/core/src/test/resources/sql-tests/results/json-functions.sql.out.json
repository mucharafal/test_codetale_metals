[{
  "comments": [{
    "author": {
      "login": "HyukjinKwon"
    },
    "body": "The changed lines happened to look a bit a lot but I had to add this in the middle of the sql file - https://github.com/apache/spark/pull/17192/files#diff-3b8a538abd658a260aa32c4aa593bed7R6 to represent this is not the case of the error.\r\n\r\nActual change mostly here `select to_json(array(named_struct('a', 1, 'b', 2)))`.",
    "commit": "6ac57d3a2b8d5df9851aa06e8e2fb6fafb76005d",
    "createdAt": "2017-03-08T10:24:08Z",
    "diffHunk": "@@ -32,32 +34,40 @@ Usage: to_json(expr[, options]) - Returns a json string with a given struct valu\n -- !query 2\n select to_json(named_struct('a', 1, 'b', 2))\n -- !query 2 schema\n-struct<structtojson(named_struct(a, 1, b, 2)):string>\n+struct<structorarraytojson(named_struct(a, 1, b, 2)):string>\n -- !query 2 output\n {\"a\":1,\"b\":2}\n \n \n -- !query 3\n select to_json(named_struct('time', to_timestamp('2015-08-26', 'yyyy-MM-dd')), map('timestampFormat', 'dd/MM/yyyy'))\n -- !query 3 schema\n-struct<structtojson(named_struct(time, to_timestamp('2015-08-26', 'yyyy-MM-dd'))):string>\n+struct<structorarraytojson(named_struct(time, to_timestamp('2015-08-26', 'yyyy-MM-dd'))):string>\n -- !query 3 output\n {\"time\":\"26/08/2015\"}\n \n \n -- !query 4\n-select to_json(named_struct('a', 1, 'b', 2), named_struct('mode', 'PERMISSIVE'))\n+select to_json(array(named_struct('a', 1, 'b', 2)))",
    "line": 54
  }, {
    "author": {
      "login": "HyukjinKwon"
    },
    "body": "Cc @maropu, thia adds an test in the file you latelly wrote. Could you check if this follows your indention?",
    "commit": "6ac57d3a2b8d5df9851aa06e8e2fb6fafb76005d",
    "createdAt": "2017-03-08T23:33:27Z",
    "diffHunk": "@@ -32,32 +34,40 @@ Usage: to_json(expr[, options]) - Returns a json string with a given struct valu\n -- !query 2\n select to_json(named_struct('a', 1, 'b', 2))\n -- !query 2 schema\n-struct<structtojson(named_struct(a, 1, b, 2)):string>\n+struct<structorarraytojson(named_struct(a, 1, b, 2)):string>\n -- !query 2 output\n {\"a\":1,\"b\":2}\n \n \n -- !query 3\n select to_json(named_struct('time', to_timestamp('2015-08-26', 'yyyy-MM-dd')), map('timestampFormat', 'dd/MM/yyyy'))\n -- !query 3 schema\n-struct<structtojson(named_struct(time, to_timestamp('2015-08-26', 'yyyy-MM-dd'))):string>\n+struct<structorarraytojson(named_struct(time, to_timestamp('2015-08-26', 'yyyy-MM-dd'))):string>\n -- !query 3 output\n {\"time\":\"26/08/2015\"}\n \n \n -- !query 4\n-select to_json(named_struct('a', 1, 'b', 2), named_struct('mode', 'PERMISSIVE'))\n+select to_json(array(named_struct('a', 1, 'b', 2)))",
    "line": 54
  }, {
    "author": {
      "login": "maropu"
    },
    "body": "yea, it looks okay!",
    "commit": "6ac57d3a2b8d5df9851aa06e8e2fb6fafb76005d",
    "createdAt": "2017-03-08T23:53:46Z",
    "diffHunk": "@@ -32,32 +34,40 @@ Usage: to_json(expr[, options]) - Returns a json string with a given struct valu\n -- !query 2\n select to_json(named_struct('a', 1, 'b', 2))\n -- !query 2 schema\n-struct<structtojson(named_struct(a, 1, b, 2)):string>\n+struct<structorarraytojson(named_struct(a, 1, b, 2)):string>\n -- !query 2 output\n {\"a\":1,\"b\":2}\n \n \n -- !query 3\n select to_json(named_struct('time', to_timestamp('2015-08-26', 'yyyy-MM-dd')), map('timestampFormat', 'dd/MM/yyyy'))\n -- !query 3 schema\n-struct<structtojson(named_struct(time, to_timestamp('2015-08-26', 'yyyy-MM-dd'))):string>\n+struct<structorarraytojson(named_struct(time, to_timestamp('2015-08-26', 'yyyy-MM-dd'))):string>\n -- !query 3 output\n {\"time\":\"26/08/2015\"}\n \n \n -- !query 4\n-select to_json(named_struct('a', 1, 'b', 2), named_struct('mode', 'PERMISSIVE'))\n+select to_json(array(named_struct('a', 1, 'b', 2)))",
    "line": 54
  }, {
    "author": {
      "login": "HyukjinKwon"
    },
    "body": "Thank you for your confirmation.",
    "commit": "6ac57d3a2b8d5df9851aa06e8e2fb6fafb76005d",
    "createdAt": "2017-03-09T00:18:33Z",
    "diffHunk": "@@ -32,32 +34,40 @@ Usage: to_json(expr[, options]) - Returns a json string with a given struct valu\n -- !query 2\n select to_json(named_struct('a', 1, 'b', 2))\n -- !query 2 schema\n-struct<structtojson(named_struct(a, 1, b, 2)):string>\n+struct<structorarraytojson(named_struct(a, 1, b, 2)):string>\n -- !query 2 output\n {\"a\":1,\"b\":2}\n \n \n -- !query 3\n select to_json(named_struct('time', to_timestamp('2015-08-26', 'yyyy-MM-dd')), map('timestampFormat', 'dd/MM/yyyy'))\n -- !query 3 schema\n-struct<structtojson(named_struct(time, to_timestamp('2015-08-26', 'yyyy-MM-dd'))):string>\n+struct<structorarraytojson(named_struct(time, to_timestamp('2015-08-26', 'yyyy-MM-dd'))):string>\n -- !query 3 output\n {\"time\":\"26/08/2015\"}\n \n \n -- !query 4\n-select to_json(named_struct('a', 1, 'b', 2), named_struct('mode', 'PERMISSIVE'))\n+select to_json(array(named_struct('a', 1, 'b', 2)))",
    "line": 54
  }],
  "prId": 17192
}]