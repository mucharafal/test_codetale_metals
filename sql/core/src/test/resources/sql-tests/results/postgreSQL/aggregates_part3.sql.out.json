[{
  "comments": [{
    "author": {
      "login": "maropu"
    },
    "body": "This result is different form one in PgSQL: https://github.com/postgres/postgres/blob/REL_12_BETA2/src/test/regress/expected/aggregates.out#L1543-L1552",
    "commit": "cb31eea000d316305830ffb149f10fa5f3c5d333",
    "createdAt": "2019-11-29T00:15:13Z",
    "diffHunk": "@@ -12,11 +12,41 @@ It is not allowed to use an aggregate function in the argument of another aggreg\n \n \n -- !query 1\n+select min(unique1) filter (where unique1 > 100) from tenk1\n+-- !query 1 schema\n+struct<min(unique1):int>\n+-- !query 1 output\n+101\n+\n+\n+-- !query 2\n+select sum(1/ten) filter (where ten > 0) from tenk1\n+-- !query 2 schema\n+struct<sum((1 div ten)):bigint>\n+-- !query 2 output\n+1000\n+\n+\n+-- !query 3\n+select ten, sum(distinct four) filter (where four > 10) from onek a\n+group by ten\n+having exists (select 1 from onek b where sum(distinct a.four) = b.four)\n+-- !query 3 schema\n+struct<ten:int,sum(DISTINCT four):bigint>\n+-- !query 3 output\n+0\t2\n+2\t2\n+4\t2\n+6\t2\n+8\t2\n+",
    "line": 38
  }, {
    "author": {
      "login": "beliefer"
    },
    "body": "I will check this issue.",
    "commit": "cb31eea000d316305830ffb149f10fa5f3c5d333",
    "createdAt": "2019-11-29T10:39:12Z",
    "diffHunk": "@@ -12,11 +12,41 @@ It is not allowed to use an aggregate function in the argument of another aggreg\n \n \n -- !query 1\n+select min(unique1) filter (where unique1 > 100) from tenk1\n+-- !query 1 schema\n+struct<min(unique1):int>\n+-- !query 1 output\n+101\n+\n+\n+-- !query 2\n+select sum(1/ten) filter (where ten > 0) from tenk1\n+-- !query 2 schema\n+struct<sum((1 div ten)):bigint>\n+-- !query 2 output\n+1000\n+\n+\n+-- !query 3\n+select ten, sum(distinct four) filter (where four > 10) from onek a\n+group by ten\n+having exists (select 1 from onek b where sum(distinct a.four) = b.four)\n+-- !query 3 schema\n+struct<ten:int,sum(DISTINCT four):bigint>\n+-- !query 3 output\n+0\t2\n+2\t2\n+4\t2\n+6\t2\n+8\t2\n+",
    "line": 38
  }, {
    "author": {
      "login": "beliefer"
    },
    "body": "I have resolved this issue.",
    "commit": "cb31eea000d316305830ffb149f10fa5f3c5d333",
    "createdAt": "2019-11-29T12:36:44Z",
    "diffHunk": "@@ -12,11 +12,41 @@ It is not allowed to use an aggregate function in the argument of another aggreg\n \n \n -- !query 1\n+select min(unique1) filter (where unique1 > 100) from tenk1\n+-- !query 1 schema\n+struct<min(unique1):int>\n+-- !query 1 output\n+101\n+\n+\n+-- !query 2\n+select sum(1/ten) filter (where ten > 0) from tenk1\n+-- !query 2 schema\n+struct<sum((1 div ten)):bigint>\n+-- !query 2 output\n+1000\n+\n+\n+-- !query 3\n+select ten, sum(distinct four) filter (where four > 10) from onek a\n+group by ten\n+having exists (select 1 from onek b where sum(distinct a.four) = b.four)\n+-- !query 3 schema\n+struct<ten:int,sum(DISTINCT four):bigint>\n+-- !query 3 output\n+0\t2\n+2\t2\n+4\t2\n+6\t2\n+8\t2\n+",
    "line": 38
  }],
  "prId": 26656
}]