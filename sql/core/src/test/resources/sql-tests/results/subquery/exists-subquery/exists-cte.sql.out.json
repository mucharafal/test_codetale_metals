[{
  "comments": [{
    "author": {
      "login": "nsyca"
    },
    "body": "I have verified the answer sets in this file match with the ones in DB2.",
    "commit": "3ebd654bca1cad01fa96b924ececd12fd33ef516",
    "createdAt": "2017-02-04T13:04:01Z",
    "diffHunk": "@@ -0,0 +1,200 @@\n+-- Automatically generated by SQLQueryTestSuite\n+-- Number of queries: 8\n+\n+\n+-- !query 0\n+CREATE TEMPORARY VIEW EMP AS SELECT * FROM VALUES\n+  (100, \"emp 1\", date \"2005-01-01\", 100.00D, 10),\n+  (100, \"emp 1\", date \"2005-01-01\", 100.00D, 10),\n+  (200, \"emp 2\", date \"2003-01-01\", 200.00D, 10),\n+  (300, \"emp 3\", date \"2002-01-01\", 300.00D, 20),\n+  (400, \"emp 4\", date \"2005-01-01\", 400.00D, 30),\n+  (500, \"emp 5\", date \"2001-01-01\", 400.00D, NULL),\n+  (600, \"emp 6 - no dept\", date \"2001-01-01\", 400.00D, 100),\n+  (700, \"emp 7\", date \"2010-01-01\", 400.00D, 100),\n+  (800, \"emp 8\", date \"2016-01-01\", 150.00D, 70)\n+AS EMP(id, emp_name, hiredate, salary, dept_id)\n+-- !query 0 schema\n+struct<>\n+-- !query 0 output\n+\n+\n+\n+-- !query 1\n+CREATE TEMPORARY VIEW DEPT AS SELECT * FROM VALUES\n+  (10, \"dept 1\", \"CA\"),\n+  (20, \"dept 2\", \"NY\"),\n+  (30, \"dept 3\", \"TX\"),\n+  (40, \"dept 4 - unassigned\", \"OR\"),\n+  (50, \"dept 5 - unassigned\", \"NJ\"),\n+  (70, \"dept 7\", \"FL\")\n+AS DEPT(dept_id, dept_name, state)\n+-- !query 1 schema\n+struct<>\n+-- !query 1 output\n+\n+\n+\n+-- !query 2\n+CREATE TEMPORARY VIEW BONUS AS SELECT * FROM VALUES\n+  (\"emp 1\", 10.00D),\n+  (\"emp 1\", 20.00D),\n+  (\"emp 2\", 300.00D),\n+  (\"emp 2\", 100.00D),\n+  (\"emp 3\", 300.00D),\n+  (\"emp 4\", 100.00D),\n+  (\"emp 5\", 1000.00D),\n+  (\"emp 6 - no dept\", 500.00D)\n+AS BONUS(emp_name, bonus_amt)\n+-- !query 2 schema\n+struct<>\n+-- !query 2 output\n+\n+\n+\n+-- !query 3\n+WITH bonus_cte \n+     AS (SELECT * \n+         FROM   bonus \n+         WHERE  EXISTS (SELECT dept.dept_id, \n+                                 emp.emp_name, \n+                                 Max(salary), \n+                                 Count(*) \n+                          FROM   emp \n+                                 JOIN dept \n+                                   ON dept.dept_id = emp.dept_id \n+                          WHERE  bonus.emp_name = emp.emp_name \n+                          GROUP  BY dept.dept_id, \n+                                    emp.emp_name \n+                          ORDER  BY emp.emp_name)) \n+SELECT * \n+FROM   bonus a \n+WHERE  a.bonus_amt > 30 \n+       AND EXISTS (SELECT 1 \n+                   FROM   bonus_cte b \n+                   WHERE  a.emp_name = b.emp_name)\n+-- !query 3 schema\n+struct<emp_name:string,bonus_amt:double>\n+-- !query 3 output\n+emp 2\t100.0\n+emp 2\t300.0\n+emp 3\t300.0\n+emp 4\t100.0\n+\n+\n+-- !query 4\n+WITH emp_cte \n+     AS (SELECT * \n+         FROM   emp \n+         WHERE  id >= 100 \n+                AND id <= 300), \n+     dept_cte \n+     AS (SELECT * \n+         FROM   dept \n+         WHERE  dept_id = 10) \n+SELECT * \n+FROM   bonus \n+WHERE  EXISTS (SELECT * \n+               FROM   emp_cte a \n+                      JOIN dept_cte b \n+                        ON a.dept_id = b.dept_id \n+               WHERE  bonus.emp_name = a.emp_name)\n+-- !query 4 schema\n+struct<emp_name:string,bonus_amt:double>\n+-- !query 4 output\n+emp 1\t10.0\n+emp 1\t20.0\n+emp 2\t100.0\n+emp 2\t300.0\n+\n+\n+-- !query 5\n+WITH emp_cte \n+     AS (SELECT * \n+         FROM   emp \n+         WHERE  id >= 100 \n+                AND id <= 300), \n+     dept_cte \n+     AS (SELECT * \n+         FROM   dept \n+         WHERE  dept_id = 10) \n+SELECT DISTINCT b.emp_name, \n+                b.bonus_amt \n+FROM   bonus b, \n+       emp_cte e, \n+       dept d \n+WHERE  e.dept_id = d.dept_id \n+       AND e.emp_name = b.emp_name \n+       AND EXISTS (SELECT * \n+                   FROM   emp_cte a \n+                          LEFT JOIN dept_cte b \n+                                 ON a.dept_id = b.dept_id \n+                   WHERE  e.emp_name = a.emp_name)\n+-- !query 5 schema\n+struct<emp_name:string,bonus_amt:double>\n+-- !query 5 output\n+emp 1\t10.0\n+emp 1\t20.0\n+emp 2\t100.0\n+emp 2\t300.0\n+emp 3\t300.0\n+\n+\n+-- !query 6\n+WITH empdept \n+     AS (SELECT id, \n+                salary, \n+                emp_name, \n+                dept.dept_id \n+         FROM   emp \n+                LEFT JOIN dept \n+                       ON emp.dept_id = dept.dept_id \n+         WHERE  emp.id IN ( 100, 200 )) \n+SELECT emp_name, \n+       Sum(bonus_amt) \n+FROM   bonus \n+WHERE  EXISTS (SELECT dept_id, \n+                      max(salary) \n+               FROM   empdept \n+               GROUP  BY dept_id \n+               HAVING count(*) > 1) \n+GROUP  BY emp_name\n+-- !query 6 schema\n+struct<emp_name:string,sum(bonus_amt):double>\n+-- !query 6 output\n+emp 1\t30.0\n+emp 2\t400.0\n+emp 3\t300.0\n+emp 4\t100.0\n+emp 5\t1000.0\n+emp 6 - no dept\t500.0\n+\n+\n+-- !query 7\n+WITH empdept \n+     AS (SELECT id, \n+                salary, \n+                emp_name, \n+                dept.dept_id \n+         FROM   emp \n+                LEFT JOIN dept \n+                       ON emp.dept_id = dept.dept_id \n+         WHERE  emp.id IN ( 100, 200 )) \n+SELECT emp_name, \n+       Sum(bonus_amt) \n+FROM   bonus \n+WHERE  NOT EXISTS (SELECT dept_id, \n+                          Max(salary) \n+                   FROM   empdept \n+                   GROUP  BY dept_id \n+                   HAVING count(*) < 1) \n+GROUP  BY emp_name\n+-- !query 7 schema\n+struct<emp_name:string,sum(bonus_amt):double>\n+-- !query 7 output\n+emp 1\t30.0\n+emp 2\t400.0\n+emp 3\t300.0\n+emp 4\t100.0\n+emp 5\t1000.0\n+emp 6 - no dept\t500.0",
    "line": 170
  }],
  "prId": 16802
}]