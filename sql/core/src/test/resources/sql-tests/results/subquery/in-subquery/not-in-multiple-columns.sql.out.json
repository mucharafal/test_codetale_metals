[{
  "comments": [{
    "author": {
      "login": "nsyca"
    },
    "body": "It returns an empty set without this fix.",
    "commit": "6a1a4159f54397ef81baaf618e3b816866f589e9",
    "createdAt": "2017-01-04T01:41:24Z",
    "diffHunk": "@@ -0,0 +1,59 @@\n+-- Automatically generated by SQLQueryTestSuite\n+-- Number of queries: 5\n+\n+\n+-- !query 0\n+create temporary view t1 as select * from values\n+  (1, 1), (2, 1), (null, 1),\n+  (1, 3), (null, 3),\n+  (1, null), (null, 2)\n+as t1(a1, b1)\n+-- !query 0 schema\n+struct<>\n+-- !query 0 output\n+\n+\n+\n+-- !query 1\n+create temporary view t2 as select * from values\n+  (1, 1),\n+  (null, 3),\n+  (1, null)\n+as t2(a2, b2)\n+-- !query 1 schema\n+struct<>\n+-- !query 1 output\n+\n+\n+\n+-- !query 2\n+select a1,b1\n+from   t1\n+where  (a1,b1) not in (select a2,b2\n+                       from   t2)\n+-- !query 2 schema\n+struct<a1:int,b1:int>\n+-- !query 2 output\n+2\t1\n+",
    "line": 38
  }, {
    "author": {
      "login": "hvanhovell"
    },
    "body": "Why is `(null, 2)` missing? There is no tuple in t2 for which b2=2.",
    "commit": "6a1a4159f54397ef81baaf618e3b816866f589e9",
    "createdAt": "2017-01-05T23:24:48Z",
    "diffHunk": "@@ -0,0 +1,59 @@\n+-- Automatically generated by SQLQueryTestSuite\n+-- Number of queries: 5\n+\n+\n+-- !query 0\n+create temporary view t1 as select * from values\n+  (1, 1), (2, 1), (null, 1),\n+  (1, 3), (null, 3),\n+  (1, null), (null, 2)\n+as t1(a1, b1)\n+-- !query 0 schema\n+struct<>\n+-- !query 0 output\n+\n+\n+\n+-- !query 1\n+create temporary view t2 as select * from values\n+  (1, 1),\n+  (null, 3),\n+  (1, null)\n+as t2(a2, b2)\n+-- !query 1 schema\n+struct<>\n+-- !query 1 output\n+\n+\n+\n+-- !query 2\n+select a1,b1\n+from   t1\n+where  (a1,b1) not in (select a2,b2\n+                       from   t2)\n+-- !query 2 schema\n+struct<a1:int,b1:int>\n+-- !query 2 output\n+2\t1\n+",
    "line": 38
  }, {
    "author": {
      "login": "nsyca"
    },
    "body": "Let's consider this:\r\n\r\n`(null, 2) NOT IN { (1, 1), (null, 3), (1, null) }`\r\n\r\nwhich is equal to\r\n````\r\n.... AND (null <> 1 OR 2 <> null) => ... AND (unknown OR unknown)\r\n                                  => ... AND unknown\r\n                                  => unknown\r\n````\r\nTherefore `(null, 2)` is not part of the result set.",
    "commit": "6a1a4159f54397ef81baaf618e3b816866f589e9",
    "createdAt": "2017-01-06T01:49:43Z",
    "diffHunk": "@@ -0,0 +1,59 @@\n+-- Automatically generated by SQLQueryTestSuite\n+-- Number of queries: 5\n+\n+\n+-- !query 0\n+create temporary view t1 as select * from values\n+  (1, 1), (2, 1), (null, 1),\n+  (1, 3), (null, 3),\n+  (1, null), (null, 2)\n+as t1(a1, b1)\n+-- !query 0 schema\n+struct<>\n+-- !query 0 output\n+\n+\n+\n+-- !query 1\n+create temporary view t2 as select * from values\n+  (1, 1),\n+  (null, 3),\n+  (1, null)\n+as t2(a2, b2)\n+-- !query 1 schema\n+struct<>\n+-- !query 1 output\n+\n+\n+\n+-- !query 2\n+select a1,b1\n+from   t1\n+where  (a1,b1) not in (select a2,b2\n+                       from   t2)\n+-- !query 2 schema\n+struct<a1:int,b1:int>\n+-- !query 2 output\n+2\t1\n+",
    "line": 38
  }, {
    "author": {
      "login": "hvanhovell"
    },
    "body": "Ok yeah you are right. I was confusing this with the or rules.",
    "commit": "6a1a4159f54397ef81baaf618e3b816866f589e9",
    "createdAt": "2017-01-24T22:29:42Z",
    "diffHunk": "@@ -0,0 +1,59 @@\n+-- Automatically generated by SQLQueryTestSuite\n+-- Number of queries: 5\n+\n+\n+-- !query 0\n+create temporary view t1 as select * from values\n+  (1, 1), (2, 1), (null, 1),\n+  (1, 3), (null, 3),\n+  (1, null), (null, 2)\n+as t1(a1, b1)\n+-- !query 0 schema\n+struct<>\n+-- !query 0 output\n+\n+\n+\n+-- !query 1\n+create temporary view t2 as select * from values\n+  (1, 1),\n+  (null, 3),\n+  (1, null)\n+as t2(a2, b2)\n+-- !query 1 schema\n+struct<>\n+-- !query 1 output\n+\n+\n+\n+-- !query 2\n+select a1,b1\n+from   t1\n+where  (a1,b1) not in (select a2,b2\n+                       from   t2)\n+-- !query 2 schema\n+struct<a1:int,b1:int>\n+-- !query 2 output\n+2\t1\n+",
    "line": 38
  }],
  "prId": 16467
}, {
  "comments": [{
    "author": {
      "login": "nsyca"
    },
    "body": "It returns an empty set without this fix.",
    "commit": "6a1a4159f54397ef81baaf618e3b816866f589e9",
    "createdAt": "2017-01-04T01:41:33Z",
    "diffHunk": "@@ -0,0 +1,59 @@\n+-- Automatically generated by SQLQueryTestSuite\n+-- Number of queries: 5\n+\n+\n+-- !query 0\n+create temporary view t1 as select * from values\n+  (1, 1), (2, 1), (null, 1),\n+  (1, 3), (null, 3),\n+  (1, null), (null, 2)\n+as t1(a1, b1)\n+-- !query 0 schema\n+struct<>\n+-- !query 0 output\n+\n+\n+\n+-- !query 1\n+create temporary view t2 as select * from values\n+  (1, 1),\n+  (null, 3),\n+  (1, null)\n+as t2(a2, b2)\n+-- !query 1 schema\n+struct<>\n+-- !query 1 output\n+\n+\n+\n+-- !query 2\n+select a1,b1\n+from   t1\n+where  (a1,b1) not in (select a2,b2\n+                       from   t2)\n+-- !query 2 schema\n+struct<a1:int,b1:int>\n+-- !query 2 output\n+2\t1\n+\n+\n+-- !query 3\n+select a1,b1\n+from   t1\n+where  (a1-1,b1) not in (select a2,b2\n+                         from   t2)\n+-- !query 3 schema\n+struct<a1:int,b1:int>\n+-- !query 3 output\n+1\t1\n+",
    "line": 49
  }],
  "prId": 16467
}, {
  "comments": [{
    "author": {
      "login": "nsyca"
    },
    "body": "It returns an empty set without this fix.",
    "commit": "6a1a4159f54397ef81baaf618e3b816866f589e9",
    "createdAt": "2017-01-04T01:41:39Z",
    "diffHunk": "@@ -0,0 +1,59 @@\n+-- Automatically generated by SQLQueryTestSuite\n+-- Number of queries: 5\n+\n+\n+-- !query 0\n+create temporary view t1 as select * from values\n+  (1, 1), (2, 1), (null, 1),\n+  (1, 3), (null, 3),\n+  (1, null), (null, 2)\n+as t1(a1, b1)\n+-- !query 0 schema\n+struct<>\n+-- !query 0 output\n+\n+\n+\n+-- !query 1\n+create temporary view t2 as select * from values\n+  (1, 1),\n+  (null, 3),\n+  (1, null)\n+as t2(a2, b2)\n+-- !query 1 schema\n+struct<>\n+-- !query 1 output\n+\n+\n+\n+-- !query 2\n+select a1,b1\n+from   t1\n+where  (a1,b1) not in (select a2,b2\n+                       from   t2)\n+-- !query 2 schema\n+struct<a1:int,b1:int>\n+-- !query 2 output\n+2\t1\n+\n+\n+-- !query 3\n+select a1,b1\n+from   t1\n+where  (a1-1,b1) not in (select a2,b2\n+                         from   t2)\n+-- !query 3 schema\n+struct<a1:int,b1:int>\n+-- !query 3 output\n+1\t1\n+\n+\n+-- !query 4\n+select a1,b1\n+from   t1\n+where  (a1,b1) not in (select a2+1,b2\n+                       from   t2)\n+-- !query 4 schema\n+struct<a1:int,b1:int>\n+-- !query 4 output\n+1\t1",
    "line": 59
  }],
  "prId": 16467
}]