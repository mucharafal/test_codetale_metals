[{
  "comments": [{
    "author": {
      "login": "HyukjinKwon"
    },
    "body": "It's closer to the original output:\r\n\r\nhttps://github.com/apache/spark/blob/fe3e34dda68fd54212df1dd01b8acb9a9bc6a0ad/sql/core/src/test/resources/sql-tests/results/pgSQL/case.sql.out#L205-L208",
    "commit": "720eea7bbd95c74065add08f6195f78d355d7e3a",
    "createdAt": "2019-07-12T06:10:21Z",
    "diffHunk": "@@ -184,34 +184,34 @@ struct<None:string,NULL on no matches:int>\n -- !query 19\n SELECT CASE WHEN CAST(udf(1=0) AS boolean) THEN 1/0 WHEN 1=1 THEN 1 ELSE 2/0 END\n -- !query 19 schema\n-struct<CASE WHEN CAST(udf((1 = 0)) AS BOOLEAN) THEN (CAST(1 AS DOUBLE) / CAST(0 AS DOUBLE)) WHEN (1 = 1) THEN CAST(1 AS DOUBLE) ELSE (CAST(2 AS DOUBLE) / CAST(0 AS DOUBLE)) END:double>\n+struct<CASE WHEN CAST(CAST(udf(cast((1 = 0) as string)) AS BOOLEAN) AS BOOLEAN) THEN (CAST(1 AS DOUBLE) / CAST(0 AS DOUBLE)) WHEN (1 = 1) THEN CAST(1 AS DOUBLE) ELSE (CAST(2 AS DOUBLE) / CAST(0 AS DOUBLE)) END:double>\n -- !query 19 output\n 1.0\n \n \n -- !query 20\n SELECT CASE 1 WHEN 0 THEN 1/udf(0) WHEN 1 THEN 1 ELSE 2/0 END\n -- !query 20 schema\n-struct<CASE WHEN (1 = 0) THEN (CAST(1 AS DOUBLE) / CAST(CAST(udf(0) AS DOUBLE) AS DOUBLE)) WHEN (1 = 1) THEN CAST(1 AS DOUBLE) ELSE (CAST(2 AS DOUBLE) / CAST(0 AS DOUBLE)) END:double>\n+struct<CASE WHEN (1 = 0) THEN (CAST(1 AS DOUBLE) / CAST(CAST(udf(cast(0 as string)) AS INT) AS DOUBLE)) WHEN (1 = 1) THEN CAST(1 AS DOUBLE) ELSE (CAST(2 AS DOUBLE) / CAST(0 AS DOUBLE)) END:double>\n -- !query 20 output\n 1.0\n \n \n -- !query 21\n SELECT CASE WHEN i > 100 THEN udf(1/0) ELSE udf(0) END FROM case_tbl\n -- !query 21 schema\n-struct<CASE WHEN (i > 100) THEN udf((cast(1 as double) / cast(0 as double))) ELSE udf(0) END:string>\n+struct<CASE WHEN (i > 100) THEN CAST(udf(cast((cast(1 as double) / cast(0 as double)) as string)) AS DOUBLE) ELSE CAST(CAST(udf(cast(0 as string)) AS INT) AS DOUBLE) END:double>\n -- !query 21 output\n-0\n-0\n-0\n-0\n+0.0\n+0.0\n+0.0\n+0.0"
  }],
  "prId": 25130
}]