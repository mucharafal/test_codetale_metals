[{
  "comments": [{
    "author": {
      "login": "maropu"
    },
    "body": "you don't need this.",
    "commit": "9ec6eaf3f1b992ae3c0101464483f3a7c9c8f70a",
    "createdAt": "2019-07-01T22:59:28Z",
    "diffHunk": "@@ -0,0 +1,59 @@\n+create temporary view t as select * from values 0, 1, 2 as t(id);\n+create temporary view t2 as select * from values 0, 1 as t(id);\n+\n+-- CTE legacy substitution\n+SET spark.sql.legacy.cte.substitution.enabled=true;\n+\n+-- CTE in CTE definition shadows outer\n+WITH\n+  t AS (SELECT 1),\n+  t2 AS (\n+    WITH t AS (SELECT 2)\n+    SELECT * FROM t\n+  )\n+SELECT * FROM t2;\n+\n+-- CTE in CTE definition shadows outer 3\n+WITH\n+  t AS (SELECT 1),\n+  t2 AS (\n+    WITH t AS (SELECT 2),\n+    t2 AS (\n+      WITH t AS (SELECT 3)\n+      SELECT * FROM t\n+    )\n+    SELECT * FROM t2\n+  )\n+SELECT * FROM t2;\n+\n+-- CTE in subquery expression shadows outer\n+WITH t AS (SELECT 1)\n+SELECT (\n+  WITH t AS (SELECT 2)\n+  SELECT * FROM t\n+);\n+\n+-- CTE in subquery expression shadows outer 2\n+WITH t AS (SELECT 1)\n+SELECT (\n+  SELECT (\n+    WITH t AS (SELECT 2)\n+    SELECT * FROM t\n+  )\n+);\n+\n+-- CTE in subquery expression shadows outer 3\n+WITH t AS (SELECT 1)\n+SELECT (\n+  WITH t AS (SELECT 2)\n+  SELECT (\n+    WITH t AS (SELECT 3)\n+    SELECT * FROM t\n+  )\n+);\n+\n+SET spark.sql.legacy.cte.substitution.enabled=false;"
  }],
  "prId": 24831
}]