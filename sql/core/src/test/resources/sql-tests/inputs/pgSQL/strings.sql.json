[{
  "comments": [{
    "author": {
      "login": "HyukjinKwon"
    },
    "body": "Why the tests are different? Those tests were ported from PostgresSQL's so we should better keep it consistent.",
    "commit": "88fee2d4583d96d4912e69f7b04ceee7d9820cde",
    "createdAt": "2019-09-10T04:09:38Z",
    "diffHunk": "@@ -653,8 +653,9 @@ SELECT trim(binary('\\\\000') from binary('\\\\000Tom\\\\000'));\n -- SELECT btrim(E'\\\\000trim\\\\000'::bytea, ''::bytea);\n -- [SPARK-28121] decode can not accept 'escape' as charset\n -- [SPARK-28412][SQL] ANSI SQL: OVERLAY function support byte array\n--- SELECT encode(overlay(E'Th\\\\000omas'::bytea placing E'Th\\\\001omas'::bytea from 2),'escape');\n--- SELECT encode(overlay(E'Th\\\\000omas'::bytea placing E'\\\\002\\\\003'::bytea from 8),'escape');\n--- SELECT encode(overlay(E'Th\\\\000omas'::bytea placing E'\\\\002\\\\003'::bytea from 5 for 3),'escape');",
    "line": 6
  }, {
    "author": {
      "login": "beliefer"
    },
    "body": "Because `Spark SQL` not support `::bytea` and  encode with escape.\r\nShould I change the tests as \r\n`SELECT overlay(binary('Th\\\\000omas') PLACING binary('Th\\\\001omas') FROM 2);` ?",
    "commit": "88fee2d4583d96d4912e69f7b04ceee7d9820cde",
    "createdAt": "2019-09-10T07:43:08Z",
    "diffHunk": "@@ -653,8 +653,9 @@ SELECT trim(binary('\\\\000') from binary('\\\\000Tom\\\\000'));\n -- SELECT btrim(E'\\\\000trim\\\\000'::bytea, ''::bytea);\n -- [SPARK-28121] decode can not accept 'escape' as charset\n -- [SPARK-28412][SQL] ANSI SQL: OVERLAY function support byte array\n--- SELECT encode(overlay(E'Th\\\\000omas'::bytea placing E'Th\\\\001omas'::bytea from 2),'escape');\n--- SELECT encode(overlay(E'Th\\\\000omas'::bytea placing E'\\\\002\\\\003'::bytea from 8),'escape');\n--- SELECT encode(overlay(E'Th\\\\000omas'::bytea placing E'\\\\002\\\\003'::bytea from 5 for 3),'escape');",
    "line": 6
  }, {
    "author": {
      "login": "wangyum"
    },
    "body": "I think the expected SQL is:\r\n```sql\r\nSELECT encode(overlay(binary(E'Th\\\\000omas') placing binary(E'Th\\\\001omas') from 2),'escape');\r\n```\r\nBut we don't support **String Constants with C-style Escapes**(SPARK-29034) and **`decode` can not accept 'escape' as charset**(SPARK-28121) now.",
    "commit": "88fee2d4583d96d4912e69f7b04ceee7d9820cde",
    "createdAt": "2019-09-10T08:28:40Z",
    "diffHunk": "@@ -653,8 +653,9 @@ SELECT trim(binary('\\\\000') from binary('\\\\000Tom\\\\000'));\n -- SELECT btrim(E'\\\\000trim\\\\000'::bytea, ''::bytea);\n -- [SPARK-28121] decode can not accept 'escape' as charset\n -- [SPARK-28412][SQL] ANSI SQL: OVERLAY function support byte array\n--- SELECT encode(overlay(E'Th\\\\000omas'::bytea placing E'Th\\\\001omas'::bytea from 2),'escape');\n--- SELECT encode(overlay(E'Th\\\\000omas'::bytea placing E'\\\\002\\\\003'::bytea from 8),'escape');\n--- SELECT encode(overlay(E'Th\\\\000omas'::bytea placing E'\\\\002\\\\003'::bytea from 5 for 3),'escape');",
    "line": 6
  }, {
    "author": {
      "login": "HyukjinKwon"
    },
    "body": "Shall we wait for two JIRAs and enable this tests later? Once we fix the tests differently from PostgreSQL, it will be more difficult to find and fix later each instance, and we can't measure the feature party coverage properly and officially.",
    "commit": "88fee2d4583d96d4912e69f7b04ceee7d9820cde",
    "createdAt": "2019-09-10T08:43:32Z",
    "diffHunk": "@@ -653,8 +653,9 @@ SELECT trim(binary('\\\\000') from binary('\\\\000Tom\\\\000'));\n -- SELECT btrim(E'\\\\000trim\\\\000'::bytea, ''::bytea);\n -- [SPARK-28121] decode can not accept 'escape' as charset\n -- [SPARK-28412][SQL] ANSI SQL: OVERLAY function support byte array\n--- SELECT encode(overlay(E'Th\\\\000omas'::bytea placing E'Th\\\\001omas'::bytea from 2),'escape');\n--- SELECT encode(overlay(E'Th\\\\000omas'::bytea placing E'\\\\002\\\\003'::bytea from 8),'escape');\n--- SELECT encode(overlay(E'Th\\\\000omas'::bytea placing E'\\\\002\\\\003'::bytea from 5 for 3),'escape');",
    "line": 6
  }, {
    "author": {
      "login": "beliefer"
    },
    "body": "@HyukjinKwon OK. please suspend this PR. ",
    "commit": "88fee2d4583d96d4912e69f7b04ceee7d9820cde",
    "createdAt": "2019-09-10T09:31:30Z",
    "diffHunk": "@@ -653,8 +653,9 @@ SELECT trim(binary('\\\\000') from binary('\\\\000Tom\\\\000'));\n -- SELECT btrim(E'\\\\000trim\\\\000'::bytea, ''::bytea);\n -- [SPARK-28121] decode can not accept 'escape' as charset\n -- [SPARK-28412][SQL] ANSI SQL: OVERLAY function support byte array\n--- SELECT encode(overlay(E'Th\\\\000omas'::bytea placing E'Th\\\\001omas'::bytea from 2),'escape');\n--- SELECT encode(overlay(E'Th\\\\000omas'::bytea placing E'\\\\002\\\\003'::bytea from 8),'escape');\n--- SELECT encode(overlay(E'Th\\\\000omas'::bytea placing E'\\\\002\\\\003'::bytea from 5 for 3),'escape');",
    "line": 6
  }, {
    "author": {
      "login": "beliefer"
    },
    "body": "@HyukjinKwon I read the source code again and find `String Constants with C-style Escapes` seems supported now. I have two comment in the SPARK-29034.",
    "commit": "88fee2d4583d96d4912e69f7b04ceee7d9820cde",
    "createdAt": "2019-09-20T02:05:01Z",
    "diffHunk": "@@ -653,8 +653,9 @@ SELECT trim(binary('\\\\000') from binary('\\\\000Tom\\\\000'));\n -- SELECT btrim(E'\\\\000trim\\\\000'::bytea, ''::bytea);\n -- [SPARK-28121] decode can not accept 'escape' as charset\n -- [SPARK-28412][SQL] ANSI SQL: OVERLAY function support byte array\n--- SELECT encode(overlay(E'Th\\\\000omas'::bytea placing E'Th\\\\001omas'::bytea from 2),'escape');\n--- SELECT encode(overlay(E'Th\\\\000omas'::bytea placing E'\\\\002\\\\003'::bytea from 8),'escape');\n--- SELECT encode(overlay(E'Th\\\\000omas'::bytea placing E'\\\\002\\\\003'::bytea from 5 for 3),'escape');",
    "line": 6
  }, {
    "author": {
      "login": "wangyum"
    },
    "body": "It seems we still do not support `[SPARK-28121] decode can not accept 'escape' as charset`.",
    "commit": "88fee2d4583d96d4912e69f7b04ceee7d9820cde",
    "createdAt": "2019-09-20T02:17:17Z",
    "diffHunk": "@@ -653,8 +653,9 @@ SELECT trim(binary('\\\\000') from binary('\\\\000Tom\\\\000'));\n -- SELECT btrim(E'\\\\000trim\\\\000'::bytea, ''::bytea);\n -- [SPARK-28121] decode can not accept 'escape' as charset\n -- [SPARK-28412][SQL] ANSI SQL: OVERLAY function support byte array\n--- SELECT encode(overlay(E'Th\\\\000omas'::bytea placing E'Th\\\\001omas'::bytea from 2),'escape');\n--- SELECT encode(overlay(E'Th\\\\000omas'::bytea placing E'\\\\002\\\\003'::bytea from 8),'escape');\n--- SELECT encode(overlay(E'Th\\\\000omas'::bytea placing E'\\\\002\\\\003'::bytea from 5 for 3),'escape');",
    "line": 6
  }],
  "prId": 25740
}]