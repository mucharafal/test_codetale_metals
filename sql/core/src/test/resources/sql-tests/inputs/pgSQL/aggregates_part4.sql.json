[{
  "comments": [{
    "author": {
      "login": "dongjoon-hyun"
    },
    "body": "It seems that we need a JIRA issue for `pg_collation_for`.",
    "commit": "2a2b2029622746c0e08a8b12a38bd6b1171a6396",
    "createdAt": "2019-08-08T22:07:41Z",
    "diffHunk": "@@ -0,0 +1,419 @@\n+--\n+-- Portions Copyright (c) 1996-2019, PostgreSQL Global Development Group\n+--\n+--\n+-- AGGREGATES [Part 4]\n+-- https://github.com/postgres/postgres/blob/REL_12_BETA2/src/test/regress/sql/aggregates.sql#L607-L997\n+\n+-- [SPARK-27980] Ordered-Set Aggregate Functions\n+-- ordered-set aggregates\n+\n+-- select p, percentile_cont(p) within group (order by x::float8)\n+-- from generate_series(1,5) x,\n+--      (values (0::float8),(0.1),(0.25),(0.4),(0.5),(0.6),(0.75),(0.9),(1)) v(p)\n+-- group by p order by p;\n+\n+-- select p, percentile_cont(p order by p) within group (order by x)  -- error\n+-- from generate_series(1,5) x,\n+--      (values (0::float8),(0.1),(0.25),(0.4),(0.5),(0.6),(0.75),(0.9),(1)) v(p)\n+-- group by p order by p;\n+\n+-- select p, sum() within group (order by x::float8)  -- error\n+-- from generate_series(1,5) x,\n+--      (values (0::float8),(0.1),(0.25),(0.4),(0.5),(0.6),(0.75),(0.9),(1)) v(p)\n+-- group by p order by p;\n+\n+-- select p, percentile_cont(p,p)  -- error\n+-- from generate_series(1,5) x,\n+--      (values (0::float8),(0.1),(0.25),(0.4),(0.5),(0.6),(0.75),(0.9),(1)) v(p)\n+-- group by p order by p;\n+\n+-- select percentile_cont(0.5) within group (order by b) from aggtest;\n+-- select percentile_cont(0.5) within group (order by b), sum(b) from aggtest;\n+-- select percentile_cont(0.5) within group (order by thousand) from tenk1;\n+-- select percentile_disc(0.5) within group (order by thousand) from tenk1;\n+-- [SPARK-28661] Hypothetical-Set Aggregate Functions\n+-- select rank(3) within group (order by x)\n+-- from (values (1),(1),(2),(2),(3),(3),(4)) v(x);\n+-- select cume_dist(3) within group (order by x)\n+-- from (values (1),(1),(2),(2),(3),(3),(4)) v(x);\n+-- select percent_rank(3) within group (order by x)\n+-- from (values (1),(1),(2),(2),(3),(3),(4),(5)) v(x);\n+-- select dense_rank(3) within group (order by x)\n+-- from (values (1),(1),(2),(2),(3),(3),(4)) v(x);\n+\n+-- [SPARK-27980] Ordered-Set Aggregate Functions\n+-- select percentile_disc(array[0,0.1,0.25,0.5,0.75,0.9,1]) within group (order by thousand)\n+-- from tenk1;\n+-- select percentile_cont(array[0,0.25,0.5,0.75,1]) within group (order by thousand)\n+-- from tenk1;\n+-- select percentile_disc(array[[null,1,0.5],[0.75,0.25,null]]) within group (order by thousand)\n+-- from tenk1;\n+-- select percentile_cont(array[0,1,0.25,0.75,0.5,1,0.3,0.32,0.35,0.38,0.4]) within group (order by x)\n+-- from generate_series(1,6) x;\n+\n+-- [SPARK-27980] Ordered-Set Aggregate Functions\n+-- [SPARK-28382] Array Functions: unnest\n+-- select ten, mode() within group (order by string4) from tenk1 group by ten;\n+\n+-- select percentile_disc(array[0.25,0.5,0.75]) within group (order by x)\n+-- from unnest('{fred,jim,fred,jack,jill,fred,jill,jim,jim,sheila,jim,sheila}'::text[]) u(x);\n+\n+-- pg_collation_for is PostgreSQL system information functions"
  }],
  "prId": 25392
}]