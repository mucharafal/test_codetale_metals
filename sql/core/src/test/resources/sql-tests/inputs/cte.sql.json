[{
  "comments": [{
    "author": {
      "login": "maropu"
    },
    "body": "Could we split these tests into two separate files: the legacy one and non-legacy one?\r\n",
    "commit": "9ec6eaf3f1b992ae3c0101464483f3a7c9c8f70a",
    "createdAt": "2019-07-01T02:31:28Z",
    "diffHunk": "@@ -28,6 +28,177 @@ FROM   CTE1 t1\n WITH t(x) AS (SELECT 1)\n SELECT * FROM t WHERE x = 1;\n \n+-- CTE in CTE definition\n+WITH t as (\n+  WITH t2 AS (SELECT 1)\n+  SELECT * FROM t2\n+)\n+SELECT * FROM t;\n+\n+-- CTE in subquery\n+SELECT max(c) FROM (\n+  WITH t(c) AS (SELECT 1)\n+  SELECT * FROM t\n+);\n+\n+-- CTE in subquery expression\n+SELECT (\n+  WITH t AS (SELECT 1)\n+  SELECT * FROM t\n+);\n+\n+-- CTE in CTE definition shadows outer (legacy substitution)\n+SET spark.sql.legacy.cte.substitution.enabled=true;"
  }, {
    "author": {
      "login": "peter-toth"
    },
    "body": "ok, done",
    "commit": "9ec6eaf3f1b992ae3c0101464483f3a7c9c8f70a",
    "createdAt": "2019-07-01T12:10:12Z",
    "diffHunk": "@@ -28,6 +28,177 @@ FROM   CTE1 t1\n WITH t(x) AS (SELECT 1)\n SELECT * FROM t WHERE x = 1;\n \n+-- CTE in CTE definition\n+WITH t as (\n+  WITH t2 AS (SELECT 1)\n+  SELECT * FROM t2\n+)\n+SELECT * FROM t;\n+\n+-- CTE in subquery\n+SELECT max(c) FROM (\n+  WITH t(c) AS (SELECT 1)\n+  SELECT * FROM t\n+);\n+\n+-- CTE in subquery expression\n+SELECT (\n+  WITH t AS (SELECT 1)\n+  SELECT * FROM t\n+);\n+\n+-- CTE in CTE definition shadows outer (legacy substitution)\n+SET spark.sql.legacy.cte.substitution.enabled=true;"
  }],
  "prId": 24831
}]