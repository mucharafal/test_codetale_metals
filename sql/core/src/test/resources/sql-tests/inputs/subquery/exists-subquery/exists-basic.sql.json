[{
  "comments": [{
    "author": {
      "login": "gatorsmile"
    },
    "body": "Could you also add one more test case, which is very like `TC.01.08`? This test case is used very often in the real world. BTW, you do not need to run DB2. We can know the results using our naked eyes. : ) \r\n```SQL\r\n-- select values present in one table but missing in another one\r\n\r\nSELECT emp.*\r\nFROM   emp\r\nWHERE  NOT EXISTS (SELECT NULL\r\n                   FROM   bonus\r\n                   WHERE  bonus.emp_name = emp.emp_name);\r\n```",
    "commit": "0e93a64212847b54f199044cd4210d5bf8a5ce91",
    "createdAt": "2017-01-29T05:51:18Z",
    "diffHunk": "@@ -0,0 +1,115 @@\n+-- Tests EXISTS subquery support. Tests basic form \n+-- of EXISTS subquery (both EXISTS and NOT EXISTS)\n+\n+CREATE TEMPORARY VIEW EMP AS SELECT * FROM VALUES\n+  (100, \"emp 1\", date \"2005-01-01\", 100.00D, 10),\n+  (100, \"emp 1\", date \"2005-01-01\", 100.00D, 10),\n+  (200, \"emp 2\", date \"2003-01-01\", 200.00D, 10),\n+  (300, \"emp 3\", date \"2002-01-01\", 300.00D, 20),\n+  (400, \"emp 4\", date \"2005-01-01\", 400.00D, 30),\n+  (500, \"emp 5\", date \"2001-01-01\", 400.00D, NULL),\n+  (600, \"emp 6 - no dept\", date \"2001-01-01\", 400.00D, 100),\n+  (700, \"emp 7\", date \"2010-01-01\", 400.00D, 100),\n+  (800, \"emp 8\", date \"2016-01-01\", 150.00D, 70)\n+AS EMP(id, emp_name, hiredate, salary, dept_id);\n+\n+CREATE TEMPORARY VIEW DEPT AS SELECT * FROM VALUES\n+  (10, \"dept 1\", \"CA\"),\n+  (20, \"dept 2\", \"NY\"),\n+  (30, \"dept 3\", \"TX\"),\n+  (40, \"dept 4 - unassigned\", \"OR\"),\n+  (50, \"dept 5 - unassigned\", \"NJ\"),\n+  (70, \"dept 7\", \"FL\")\n+AS DEPT(dept_id, dept_name, state);\n+\n+CREATE TEMPORARY VIEW BONUS AS SELECT * FROM VALUES\n+  (\"emp 1\", 10.00D),\n+  (\"emp 1\", 20.00D),\n+  (\"emp 2\", 300.00D),\n+  (\"emp 2\", 100.00D),\n+  (\"emp 3\", 300.00D),\n+  (\"emp 4\", 100.00D),\n+  (\"emp 5\", 1000.00D),\n+  (\"emp 6 - no dept\", 500.00D)\n+AS BONUS(emp_name, bonus_amt);\n+\n+-- uncorrelated exist query \n+-- TC.01.01\n+SELECT * \n+FROM   emp \n+WHERE  EXISTS (SELECT 1 \n+               FROM   dept \n+               WHERE  dept.dept_id > 10 \n+                      AND dept.dept_id < 30); \n+\n+-- simple correlated predicate in exist subquery\n+-- TC.01.02\n+SELECT * \n+FROM   emp \n+WHERE  EXISTS (SELECT dept.dept_name \n+               FROM   dept \n+               WHERE  emp.dept_id = dept.dept_id); \n+\n+-- correlated outer isnull predicate\n+-- TC.01.03\n+SELECT * \n+FROM   emp \n+WHERE  EXISTS (SELECT dept.dept_name \n+               FROM   dept \n+               WHERE  emp.dept_id = dept.dept_id \n+                       OR emp.dept_id IS NULL);\n+\n+-- Simple correlation with a local predicate in outer query\n+-- TC.01.04\n+SELECT * \n+FROM   emp \n+WHERE  EXISTS (SELECT dept.dept_name \n+               FROM   dept \n+               WHERE  emp.dept_id = dept.dept_id) \n+       AND emp.id > 200; \n+\n+-- Outer references (emp.id) should not be pruned from outer plan\n+-- TC.01.05\n+SELECT emp.emp_name \n+FROM   emp \n+WHERE  EXISTS (SELECT dept.state \n+               FROM   dept \n+               WHERE  emp.dept_id = dept.dept_id) \n+       AND emp.id > 200;\n+\n+-- not exists with correlated predicate\n+-- TC.01.06\n+SELECT * \n+FROM   dept \n+WHERE  NOT EXISTS (SELECT emp_name \n+                   FROM   emp \n+                   WHERE  emp.dept_id = dept.dept_id);\n+\n+-- not exists with correlated predicate + local predicate\n+-- TC.01.07\n+SELECT * \n+FROM   dept \n+WHERE  NOT EXISTS (SELECT emp_name \n+                   FROM   emp \n+                   WHERE  emp.dept_id = dept.dept_id \n+                           OR state = 'NJ');\n+\n+-- not exist both equal and greaterthan predicate\n+-- TC.01.08\n+SELECT * \n+FROM   bonus \n+WHERE  NOT EXISTS (SELECT * \n+                   FROM   emp \n+                   WHERE  emp.emp_name = emp_name \n+                          AND bonus_amt > emp.salary); ",
    "line": 104
  }, {
    "author": {
      "login": "dilipbiswal"
    },
    "body": "@gatorsmile Thanks .. I have added the suggested test case and have updated the PR description.",
    "commit": "0e93a64212847b54f199044cd4210d5bf8a5ce91",
    "createdAt": "2017-01-29T06:52:55Z",
    "diffHunk": "@@ -0,0 +1,115 @@\n+-- Tests EXISTS subquery support. Tests basic form \n+-- of EXISTS subquery (both EXISTS and NOT EXISTS)\n+\n+CREATE TEMPORARY VIEW EMP AS SELECT * FROM VALUES\n+  (100, \"emp 1\", date \"2005-01-01\", 100.00D, 10),\n+  (100, \"emp 1\", date \"2005-01-01\", 100.00D, 10),\n+  (200, \"emp 2\", date \"2003-01-01\", 200.00D, 10),\n+  (300, \"emp 3\", date \"2002-01-01\", 300.00D, 20),\n+  (400, \"emp 4\", date \"2005-01-01\", 400.00D, 30),\n+  (500, \"emp 5\", date \"2001-01-01\", 400.00D, NULL),\n+  (600, \"emp 6 - no dept\", date \"2001-01-01\", 400.00D, 100),\n+  (700, \"emp 7\", date \"2010-01-01\", 400.00D, 100),\n+  (800, \"emp 8\", date \"2016-01-01\", 150.00D, 70)\n+AS EMP(id, emp_name, hiredate, salary, dept_id);\n+\n+CREATE TEMPORARY VIEW DEPT AS SELECT * FROM VALUES\n+  (10, \"dept 1\", \"CA\"),\n+  (20, \"dept 2\", \"NY\"),\n+  (30, \"dept 3\", \"TX\"),\n+  (40, \"dept 4 - unassigned\", \"OR\"),\n+  (50, \"dept 5 - unassigned\", \"NJ\"),\n+  (70, \"dept 7\", \"FL\")\n+AS DEPT(dept_id, dept_name, state);\n+\n+CREATE TEMPORARY VIEW BONUS AS SELECT * FROM VALUES\n+  (\"emp 1\", 10.00D),\n+  (\"emp 1\", 20.00D),\n+  (\"emp 2\", 300.00D),\n+  (\"emp 2\", 100.00D),\n+  (\"emp 3\", 300.00D),\n+  (\"emp 4\", 100.00D),\n+  (\"emp 5\", 1000.00D),\n+  (\"emp 6 - no dept\", 500.00D)\n+AS BONUS(emp_name, bonus_amt);\n+\n+-- uncorrelated exist query \n+-- TC.01.01\n+SELECT * \n+FROM   emp \n+WHERE  EXISTS (SELECT 1 \n+               FROM   dept \n+               WHERE  dept.dept_id > 10 \n+                      AND dept.dept_id < 30); \n+\n+-- simple correlated predicate in exist subquery\n+-- TC.01.02\n+SELECT * \n+FROM   emp \n+WHERE  EXISTS (SELECT dept.dept_name \n+               FROM   dept \n+               WHERE  emp.dept_id = dept.dept_id); \n+\n+-- correlated outer isnull predicate\n+-- TC.01.03\n+SELECT * \n+FROM   emp \n+WHERE  EXISTS (SELECT dept.dept_name \n+               FROM   dept \n+               WHERE  emp.dept_id = dept.dept_id \n+                       OR emp.dept_id IS NULL);\n+\n+-- Simple correlation with a local predicate in outer query\n+-- TC.01.04\n+SELECT * \n+FROM   emp \n+WHERE  EXISTS (SELECT dept.dept_name \n+               FROM   dept \n+               WHERE  emp.dept_id = dept.dept_id) \n+       AND emp.id > 200; \n+\n+-- Outer references (emp.id) should not be pruned from outer plan\n+-- TC.01.05\n+SELECT emp.emp_name \n+FROM   emp \n+WHERE  EXISTS (SELECT dept.state \n+               FROM   dept \n+               WHERE  emp.dept_id = dept.dept_id) \n+       AND emp.id > 200;\n+\n+-- not exists with correlated predicate\n+-- TC.01.06\n+SELECT * \n+FROM   dept \n+WHERE  NOT EXISTS (SELECT emp_name \n+                   FROM   emp \n+                   WHERE  emp.dept_id = dept.dept_id);\n+\n+-- not exists with correlated predicate + local predicate\n+-- TC.01.07\n+SELECT * \n+FROM   dept \n+WHERE  NOT EXISTS (SELECT emp_name \n+                   FROM   emp \n+                   WHERE  emp.dept_id = dept.dept_id \n+                           OR state = 'NJ');\n+\n+-- not exist both equal and greaterthan predicate\n+-- TC.01.08\n+SELECT * \n+FROM   bonus \n+WHERE  NOT EXISTS (SELECT * \n+                   FROM   emp \n+                   WHERE  emp.emp_name = emp_name \n+                          AND bonus_amt > emp.salary); ",
    "line": 104
  }],
  "prId": 16710
}]