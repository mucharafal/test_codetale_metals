[{
  "comments": [{
    "author": {
      "login": "gatorsmile"
    },
    "body": "No need to add the test cases now. We can deliver the cases with the bug fixes. ",
    "commit": "895bb35cf951e68936d26e81490a89e56a08d834",
    "createdAt": "2016-12-24T02:44:58Z",
    "diffHunk": "@@ -0,0 +1,92 @@\n+-- A test suite for simple IN predicate subquery\n+-- It includes correlated cases.\n+\n+-- tables and data types\n+\n+CREATE DATABASE indb;\n+CREATE TABLE t1(t1a String, t1b Short, t1c Int, t1d Long, t1e float, t1f double, t1g DECIMAL, t1h TIMESTAMP, t1i Date)\n+using parquet;\n+CREATE TABLE t2(t2a String, t2b Short, t2c Int, t2d Long, t2e float, t2f double, t2g DECIMAL, t2h TIMESTAMP, t2i Date)\n+using parquet;\n+CREATE TABLE t3(t3a String, t3b Short, t3c Int, t3d Long, t3e float, t3f double, t3g DECIMAL, t3h TIMESTAMP, t3i Date)\n+using parquet;\n+\n+-- insert to tables\n+INSERT INTO t1 VALUES\n+ ('t1a', 6, 8, 10, 15, 20, 20.00, timestamp(date(\"2014-04-04\")), date(\"2014-04-04\")),\n+ ('t1b', 8, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-04\")),\n+ ('t1a', 16, 12, 21, 15, 20, 20.00, timestamp(date(\"2014-06-04\")), date(\"2014-06-04\")),\n+ ('t1a', 16, 12, 10, 15, 20, 20.00, timestamp(date(\"2014-07-04\")), date(\"2014-07-04\")),\n+ ('t1c', 8, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-05\")),\n+ ('t1d', null, 16, 22, 17, 25, 26.00, timestamp(date(\"2014-06-04\")), null),\n+ ('t1d', null, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-07-04\")), null),\n+ ('t1e', 10, null, 25, 17, 25, 26.00, timestamp(date(\"2014-08-04\")), date(\"2014-08-04\")),\n+ ('t1e', 10, null, 19, 17, 25, 26.00, timestamp(date(\"2014-09-04\")), date(\"2014-09-04\")),\n+ ('t1d', 10, null, 12, 17, 25, 26.00, timestamp(date(\"2015-05-04\")), date(\"2015-05-04\")),\n+ ('t1a', 6, 8, 10, 15, 20, 20.00, timestamp(date(\"2014-04-04\")), date(\"2014-04-04\")),\n+ ('t1e', 10, null, 19, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-0=4\"));\n+\n+INSERT INTO t2 VALUES\n+ ('t2a', 6, 12, 14, 15, 20, 20.00, timestamp(date(\"2014-04-04\")), date(\"2014-04-04\")),\n+ ('t1b', 10, 12, 19, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-04\")),\n+ ('t1b', 8, 16, 119, 17, 25, 26.00, timestamp(date(\"2015-05-04\")), date(\"2015-05-04\")),\n+ ('t1c', 12, 16, 219, 17, 25, 26.00, timestamp(date(\"2016-05-04\")), date(\"2016-05-04\")),\n+ ('t1b', null, 16, 319, 17, 25, 26.00, timestamp(date(\"2017-05-04\")), null),\n+ ('t2e', 8, null, 419, 17, 25, 26.00, timestamp(date(\"2014-06-04\")), date(\"2014-06-04\")),\n+ ('t1f', 19, null, 519, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-04\")),\n+ ('t1b', 10, 12, 19, 17, 25, 26.00, timestamp(date(\"2014-06-04\")), date(\"2014-06-04\")),\n+ ('t1b', 8, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-07-04\")), date(\"2014-07-04\")),\n+ ('t1c', 12, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-08-04\")), date(\"2014-08-05\")),\n+ ('t1e', 8, null, 19, 17, 25, 26.00, timestamp(date(\"2014-09-04\")), date(\"2014-09-04\")),\n+ ('t1f', 19, null, 19, 17, 25, 26.00, timestamp(date(\"2014-10-04\")), date(\"2014-10-04\")),\n+ ('t1b', null, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), null);\n+\n+INSERT INTO t3 VALUES\n+ ('t3a', 6, 12, 110, 15, 20, 20.00, timestamp(date(\"2014-04-04\")), date(\"2014-04-04\")),\n+ ('t3a', 6, 12, 10, 15, 20, 20.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-04\")),\n+ ('t1b', 10, 12, 219, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-04\")),\n+ ('t1b', 10, 12, 19, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-04\")),\n+ ('t1b', 8, 16, 319, 17, 25, 26.00, timestamp(date(\"2014-06-04\")), date(\"2014-06-04\")),\n+ ('t1b', 8, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-07-04\")), date(\"2014-07-04\")),\n+ ('t3c', 17, 16, 519, 17, 25, 26.00, timestamp(date(\"2014-08-04\")), date(\"2014-08-04\")),\n+ ('t3c', 17, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-09-04\")), date(\"2014-09-05\")),\n+ ('t1b', null, 16, 419, 17, 25, 26.00, timestamp(date(\"2014-10-04\")), null),\n+ ('t1b', null, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-11-04\")), null),\n+ ('t3b', 8, null, 719, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-04\")),\n+ ('t3b', 8, null, 19, 17, 25, 26.00, timestamp(date(\"2015-05-04\")), date(\"2015-05-04\"));\n+\n+-- correlated IN subquery\n+-- simple select\n+-- TC 01.01\n+select * from t1 where t1a in (select t2a from t2);\n+-- TC 01.02\n+select * from t1 where t1b in (select t2b from t2 where t1a = t2a);\n+-- TC 01.03\n+select t1a, t1b from t1 where t1c in (select t2b from t2 where t1a != t2a);\n+-- TC 01.04\n+select t1a, t1b from t1 where t1c in (select t2b from t2 where t1a = t2a or t1b > t2b);\n+-- TC 01.05\n+select t1a, t1b from t1 where t1c in (select t2b from t2 where t2i in (select t3i from t3 where t2c = t3c));\n+-- TC 01.06\n+select t1a, t1b from t1 where t1c in (select t2b from t2 where t2a in\n+                      (select t3a from t3 where t2c = t3c and t2b is not NULL));\n+-- simple select for NOT IN\n+-- TC 01.07\n+select distinct(t1a), t1b, t1h from t1 where t1a not in (select t2a from t2);\n+-- TC 01.08, comment out pending on SPARK-18966\n+--select t1d, t1h, t1i from t1 where t1d not in (select t2d from t2 where t2h > t1h or t2i > t1i);\n+-- TC 01.09\n+select distinct(t1a), t1b from t1 where t1b not in (select t2b from t2 where t1a < t2a and t2b > 8);\n+-- TC 01.10, comment out pending on SPARK-18966\n+--select t1a, t1b from t1 where t1c not in (select t2b from t2 where t2a not in\n+--                      (select t3a from t3 where t2c = t3c and t2b is NULL));"
  }, {
    "author": {
      "login": "gatorsmile"
    },
    "body": "Please add these two cases into the JIRA. I think that is good enough. ",
    "commit": "895bb35cf951e68936d26e81490a89e56a08d834",
    "createdAt": "2016-12-24T02:45:27Z",
    "diffHunk": "@@ -0,0 +1,92 @@\n+-- A test suite for simple IN predicate subquery\n+-- It includes correlated cases.\n+\n+-- tables and data types\n+\n+CREATE DATABASE indb;\n+CREATE TABLE t1(t1a String, t1b Short, t1c Int, t1d Long, t1e float, t1f double, t1g DECIMAL, t1h TIMESTAMP, t1i Date)\n+using parquet;\n+CREATE TABLE t2(t2a String, t2b Short, t2c Int, t2d Long, t2e float, t2f double, t2g DECIMAL, t2h TIMESTAMP, t2i Date)\n+using parquet;\n+CREATE TABLE t3(t3a String, t3b Short, t3c Int, t3d Long, t3e float, t3f double, t3g DECIMAL, t3h TIMESTAMP, t3i Date)\n+using parquet;\n+\n+-- insert to tables\n+INSERT INTO t1 VALUES\n+ ('t1a', 6, 8, 10, 15, 20, 20.00, timestamp(date(\"2014-04-04\")), date(\"2014-04-04\")),\n+ ('t1b', 8, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-04\")),\n+ ('t1a', 16, 12, 21, 15, 20, 20.00, timestamp(date(\"2014-06-04\")), date(\"2014-06-04\")),\n+ ('t1a', 16, 12, 10, 15, 20, 20.00, timestamp(date(\"2014-07-04\")), date(\"2014-07-04\")),\n+ ('t1c', 8, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-05\")),\n+ ('t1d', null, 16, 22, 17, 25, 26.00, timestamp(date(\"2014-06-04\")), null),\n+ ('t1d', null, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-07-04\")), null),\n+ ('t1e', 10, null, 25, 17, 25, 26.00, timestamp(date(\"2014-08-04\")), date(\"2014-08-04\")),\n+ ('t1e', 10, null, 19, 17, 25, 26.00, timestamp(date(\"2014-09-04\")), date(\"2014-09-04\")),\n+ ('t1d', 10, null, 12, 17, 25, 26.00, timestamp(date(\"2015-05-04\")), date(\"2015-05-04\")),\n+ ('t1a', 6, 8, 10, 15, 20, 20.00, timestamp(date(\"2014-04-04\")), date(\"2014-04-04\")),\n+ ('t1e', 10, null, 19, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-0=4\"));\n+\n+INSERT INTO t2 VALUES\n+ ('t2a', 6, 12, 14, 15, 20, 20.00, timestamp(date(\"2014-04-04\")), date(\"2014-04-04\")),\n+ ('t1b', 10, 12, 19, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-04\")),\n+ ('t1b', 8, 16, 119, 17, 25, 26.00, timestamp(date(\"2015-05-04\")), date(\"2015-05-04\")),\n+ ('t1c', 12, 16, 219, 17, 25, 26.00, timestamp(date(\"2016-05-04\")), date(\"2016-05-04\")),\n+ ('t1b', null, 16, 319, 17, 25, 26.00, timestamp(date(\"2017-05-04\")), null),\n+ ('t2e', 8, null, 419, 17, 25, 26.00, timestamp(date(\"2014-06-04\")), date(\"2014-06-04\")),\n+ ('t1f', 19, null, 519, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-04\")),\n+ ('t1b', 10, 12, 19, 17, 25, 26.00, timestamp(date(\"2014-06-04\")), date(\"2014-06-04\")),\n+ ('t1b', 8, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-07-04\")), date(\"2014-07-04\")),\n+ ('t1c', 12, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-08-04\")), date(\"2014-08-05\")),\n+ ('t1e', 8, null, 19, 17, 25, 26.00, timestamp(date(\"2014-09-04\")), date(\"2014-09-04\")),\n+ ('t1f', 19, null, 19, 17, 25, 26.00, timestamp(date(\"2014-10-04\")), date(\"2014-10-04\")),\n+ ('t1b', null, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), null);\n+\n+INSERT INTO t3 VALUES\n+ ('t3a', 6, 12, 110, 15, 20, 20.00, timestamp(date(\"2014-04-04\")), date(\"2014-04-04\")),\n+ ('t3a', 6, 12, 10, 15, 20, 20.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-04\")),\n+ ('t1b', 10, 12, 219, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-04\")),\n+ ('t1b', 10, 12, 19, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-04\")),\n+ ('t1b', 8, 16, 319, 17, 25, 26.00, timestamp(date(\"2014-06-04\")), date(\"2014-06-04\")),\n+ ('t1b', 8, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-07-04\")), date(\"2014-07-04\")),\n+ ('t3c', 17, 16, 519, 17, 25, 26.00, timestamp(date(\"2014-08-04\")), date(\"2014-08-04\")),\n+ ('t3c', 17, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-09-04\")), date(\"2014-09-05\")),\n+ ('t1b', null, 16, 419, 17, 25, 26.00, timestamp(date(\"2014-10-04\")), null),\n+ ('t1b', null, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-11-04\")), null),\n+ ('t3b', 8, null, 719, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-04\")),\n+ ('t3b', 8, null, 19, 17, 25, 26.00, timestamp(date(\"2015-05-04\")), date(\"2015-05-04\"));\n+\n+-- correlated IN subquery\n+-- simple select\n+-- TC 01.01\n+select * from t1 where t1a in (select t2a from t2);\n+-- TC 01.02\n+select * from t1 where t1b in (select t2b from t2 where t1a = t2a);\n+-- TC 01.03\n+select t1a, t1b from t1 where t1c in (select t2b from t2 where t1a != t2a);\n+-- TC 01.04\n+select t1a, t1b from t1 where t1c in (select t2b from t2 where t1a = t2a or t1b > t2b);\n+-- TC 01.05\n+select t1a, t1b from t1 where t1c in (select t2b from t2 where t2i in (select t3i from t3 where t2c = t3c));\n+-- TC 01.06\n+select t1a, t1b from t1 where t1c in (select t2b from t2 where t2a in\n+                      (select t3a from t3 where t2c = t3c and t2b is not NULL));\n+-- simple select for NOT IN\n+-- TC 01.07\n+select distinct(t1a), t1b, t1h from t1 where t1a not in (select t2a from t2);\n+-- TC 01.08, comment out pending on SPARK-18966\n+--select t1d, t1h, t1i from t1 where t1d not in (select t2d from t2 where t2h > t1h or t2i > t1i);\n+-- TC 01.09\n+select distinct(t1a), t1b from t1 where t1b not in (select t2b from t2 where t1a < t2a and t2b > 8);\n+-- TC 01.10, comment out pending on SPARK-18966\n+--select t1a, t1b from t1 where t1c not in (select t2b from t2 where t2a not in\n+--                      (select t3a from t3 where t2c = t3c and t2b is NULL));"
  }, {
    "author": {
      "login": "nsyca"
    },
    "body": "SPARK-18966 has a simplified test case to demonstrate the problem. The complexity of these two test cases makes it difficult for us to walk through the root cause of the problem. We should enable the test cases here once we fix SPARK-18966 to demonstrate the test coverage of NOT IN in with correlated expressions. I can add a remark on SPARK-18966 to enable these test cases as part of its PR. Once this PR is reviewed and merged, I will have the file and the test cases' numbers recorded in SPARK-18966.",
    "commit": "895bb35cf951e68936d26e81490a89e56a08d834",
    "createdAt": "2016-12-24T13:38:31Z",
    "diffHunk": "@@ -0,0 +1,92 @@\n+-- A test suite for simple IN predicate subquery\n+-- It includes correlated cases.\n+\n+-- tables and data types\n+\n+CREATE DATABASE indb;\n+CREATE TABLE t1(t1a String, t1b Short, t1c Int, t1d Long, t1e float, t1f double, t1g DECIMAL, t1h TIMESTAMP, t1i Date)\n+using parquet;\n+CREATE TABLE t2(t2a String, t2b Short, t2c Int, t2d Long, t2e float, t2f double, t2g DECIMAL, t2h TIMESTAMP, t2i Date)\n+using parquet;\n+CREATE TABLE t3(t3a String, t3b Short, t3c Int, t3d Long, t3e float, t3f double, t3g DECIMAL, t3h TIMESTAMP, t3i Date)\n+using parquet;\n+\n+-- insert to tables\n+INSERT INTO t1 VALUES\n+ ('t1a', 6, 8, 10, 15, 20, 20.00, timestamp(date(\"2014-04-04\")), date(\"2014-04-04\")),\n+ ('t1b', 8, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-04\")),\n+ ('t1a', 16, 12, 21, 15, 20, 20.00, timestamp(date(\"2014-06-04\")), date(\"2014-06-04\")),\n+ ('t1a', 16, 12, 10, 15, 20, 20.00, timestamp(date(\"2014-07-04\")), date(\"2014-07-04\")),\n+ ('t1c', 8, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-05\")),\n+ ('t1d', null, 16, 22, 17, 25, 26.00, timestamp(date(\"2014-06-04\")), null),\n+ ('t1d', null, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-07-04\")), null),\n+ ('t1e', 10, null, 25, 17, 25, 26.00, timestamp(date(\"2014-08-04\")), date(\"2014-08-04\")),\n+ ('t1e', 10, null, 19, 17, 25, 26.00, timestamp(date(\"2014-09-04\")), date(\"2014-09-04\")),\n+ ('t1d', 10, null, 12, 17, 25, 26.00, timestamp(date(\"2015-05-04\")), date(\"2015-05-04\")),\n+ ('t1a', 6, 8, 10, 15, 20, 20.00, timestamp(date(\"2014-04-04\")), date(\"2014-04-04\")),\n+ ('t1e', 10, null, 19, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-0=4\"));\n+\n+INSERT INTO t2 VALUES\n+ ('t2a', 6, 12, 14, 15, 20, 20.00, timestamp(date(\"2014-04-04\")), date(\"2014-04-04\")),\n+ ('t1b', 10, 12, 19, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-04\")),\n+ ('t1b', 8, 16, 119, 17, 25, 26.00, timestamp(date(\"2015-05-04\")), date(\"2015-05-04\")),\n+ ('t1c', 12, 16, 219, 17, 25, 26.00, timestamp(date(\"2016-05-04\")), date(\"2016-05-04\")),\n+ ('t1b', null, 16, 319, 17, 25, 26.00, timestamp(date(\"2017-05-04\")), null),\n+ ('t2e', 8, null, 419, 17, 25, 26.00, timestamp(date(\"2014-06-04\")), date(\"2014-06-04\")),\n+ ('t1f', 19, null, 519, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-04\")),\n+ ('t1b', 10, 12, 19, 17, 25, 26.00, timestamp(date(\"2014-06-04\")), date(\"2014-06-04\")),\n+ ('t1b', 8, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-07-04\")), date(\"2014-07-04\")),\n+ ('t1c', 12, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-08-04\")), date(\"2014-08-05\")),\n+ ('t1e', 8, null, 19, 17, 25, 26.00, timestamp(date(\"2014-09-04\")), date(\"2014-09-04\")),\n+ ('t1f', 19, null, 19, 17, 25, 26.00, timestamp(date(\"2014-10-04\")), date(\"2014-10-04\")),\n+ ('t1b', null, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), null);\n+\n+INSERT INTO t3 VALUES\n+ ('t3a', 6, 12, 110, 15, 20, 20.00, timestamp(date(\"2014-04-04\")), date(\"2014-04-04\")),\n+ ('t3a', 6, 12, 10, 15, 20, 20.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-04\")),\n+ ('t1b', 10, 12, 219, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-04\")),\n+ ('t1b', 10, 12, 19, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-04\")),\n+ ('t1b', 8, 16, 319, 17, 25, 26.00, timestamp(date(\"2014-06-04\")), date(\"2014-06-04\")),\n+ ('t1b', 8, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-07-04\")), date(\"2014-07-04\")),\n+ ('t3c', 17, 16, 519, 17, 25, 26.00, timestamp(date(\"2014-08-04\")), date(\"2014-08-04\")),\n+ ('t3c', 17, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-09-04\")), date(\"2014-09-05\")),\n+ ('t1b', null, 16, 419, 17, 25, 26.00, timestamp(date(\"2014-10-04\")), null),\n+ ('t1b', null, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-11-04\")), null),\n+ ('t3b', 8, null, 719, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-04\")),\n+ ('t3b', 8, null, 19, 17, 25, 26.00, timestamp(date(\"2015-05-04\")), date(\"2015-05-04\"));\n+\n+-- correlated IN subquery\n+-- simple select\n+-- TC 01.01\n+select * from t1 where t1a in (select t2a from t2);\n+-- TC 01.02\n+select * from t1 where t1b in (select t2b from t2 where t1a = t2a);\n+-- TC 01.03\n+select t1a, t1b from t1 where t1c in (select t2b from t2 where t1a != t2a);\n+-- TC 01.04\n+select t1a, t1b from t1 where t1c in (select t2b from t2 where t1a = t2a or t1b > t2b);\n+-- TC 01.05\n+select t1a, t1b from t1 where t1c in (select t2b from t2 where t2i in (select t3i from t3 where t2c = t3c));\n+-- TC 01.06\n+select t1a, t1b from t1 where t1c in (select t2b from t2 where t2a in\n+                      (select t3a from t3 where t2c = t3c and t2b is not NULL));\n+-- simple select for NOT IN\n+-- TC 01.07\n+select distinct(t1a), t1b, t1h from t1 where t1a not in (select t2a from t2);\n+-- TC 01.08, comment out pending on SPARK-18966\n+--select t1d, t1h, t1i from t1 where t1d not in (select t2d from t2 where t2h > t1h or t2i > t1i);\n+-- TC 01.09\n+select distinct(t1a), t1b from t1 where t1b not in (select t2b from t2 where t1a < t2a and t2b > 8);\n+-- TC 01.10, comment out pending on SPARK-18966\n+--select t1a, t1b from t1 where t1c not in (select t2b from t2 where t2a not in\n+--                      (select t3a from t3 where t2c = t3c and t2b is NULL));"
  }, {
    "author": {
      "login": "gatorsmile"
    },
    "body": "Based on my experience, we do not add them until the fix is ready. ",
    "commit": "895bb35cf951e68936d26e81490a89e56a08d834",
    "createdAt": "2016-12-24T17:34:24Z",
    "diffHunk": "@@ -0,0 +1,92 @@\n+-- A test suite for simple IN predicate subquery\n+-- It includes correlated cases.\n+\n+-- tables and data types\n+\n+CREATE DATABASE indb;\n+CREATE TABLE t1(t1a String, t1b Short, t1c Int, t1d Long, t1e float, t1f double, t1g DECIMAL, t1h TIMESTAMP, t1i Date)\n+using parquet;\n+CREATE TABLE t2(t2a String, t2b Short, t2c Int, t2d Long, t2e float, t2f double, t2g DECIMAL, t2h TIMESTAMP, t2i Date)\n+using parquet;\n+CREATE TABLE t3(t3a String, t3b Short, t3c Int, t3d Long, t3e float, t3f double, t3g DECIMAL, t3h TIMESTAMP, t3i Date)\n+using parquet;\n+\n+-- insert to tables\n+INSERT INTO t1 VALUES\n+ ('t1a', 6, 8, 10, 15, 20, 20.00, timestamp(date(\"2014-04-04\")), date(\"2014-04-04\")),\n+ ('t1b', 8, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-04\")),\n+ ('t1a', 16, 12, 21, 15, 20, 20.00, timestamp(date(\"2014-06-04\")), date(\"2014-06-04\")),\n+ ('t1a', 16, 12, 10, 15, 20, 20.00, timestamp(date(\"2014-07-04\")), date(\"2014-07-04\")),\n+ ('t1c', 8, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-05\")),\n+ ('t1d', null, 16, 22, 17, 25, 26.00, timestamp(date(\"2014-06-04\")), null),\n+ ('t1d', null, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-07-04\")), null),\n+ ('t1e', 10, null, 25, 17, 25, 26.00, timestamp(date(\"2014-08-04\")), date(\"2014-08-04\")),\n+ ('t1e', 10, null, 19, 17, 25, 26.00, timestamp(date(\"2014-09-04\")), date(\"2014-09-04\")),\n+ ('t1d', 10, null, 12, 17, 25, 26.00, timestamp(date(\"2015-05-04\")), date(\"2015-05-04\")),\n+ ('t1a', 6, 8, 10, 15, 20, 20.00, timestamp(date(\"2014-04-04\")), date(\"2014-04-04\")),\n+ ('t1e', 10, null, 19, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-0=4\"));\n+\n+INSERT INTO t2 VALUES\n+ ('t2a', 6, 12, 14, 15, 20, 20.00, timestamp(date(\"2014-04-04\")), date(\"2014-04-04\")),\n+ ('t1b', 10, 12, 19, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-04\")),\n+ ('t1b', 8, 16, 119, 17, 25, 26.00, timestamp(date(\"2015-05-04\")), date(\"2015-05-04\")),\n+ ('t1c', 12, 16, 219, 17, 25, 26.00, timestamp(date(\"2016-05-04\")), date(\"2016-05-04\")),\n+ ('t1b', null, 16, 319, 17, 25, 26.00, timestamp(date(\"2017-05-04\")), null),\n+ ('t2e', 8, null, 419, 17, 25, 26.00, timestamp(date(\"2014-06-04\")), date(\"2014-06-04\")),\n+ ('t1f', 19, null, 519, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-04\")),\n+ ('t1b', 10, 12, 19, 17, 25, 26.00, timestamp(date(\"2014-06-04\")), date(\"2014-06-04\")),\n+ ('t1b', 8, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-07-04\")), date(\"2014-07-04\")),\n+ ('t1c', 12, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-08-04\")), date(\"2014-08-05\")),\n+ ('t1e', 8, null, 19, 17, 25, 26.00, timestamp(date(\"2014-09-04\")), date(\"2014-09-04\")),\n+ ('t1f', 19, null, 19, 17, 25, 26.00, timestamp(date(\"2014-10-04\")), date(\"2014-10-04\")),\n+ ('t1b', null, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), null);\n+\n+INSERT INTO t3 VALUES\n+ ('t3a', 6, 12, 110, 15, 20, 20.00, timestamp(date(\"2014-04-04\")), date(\"2014-04-04\")),\n+ ('t3a', 6, 12, 10, 15, 20, 20.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-04\")),\n+ ('t1b', 10, 12, 219, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-04\")),\n+ ('t1b', 10, 12, 19, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-04\")),\n+ ('t1b', 8, 16, 319, 17, 25, 26.00, timestamp(date(\"2014-06-04\")), date(\"2014-06-04\")),\n+ ('t1b', 8, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-07-04\")), date(\"2014-07-04\")),\n+ ('t3c', 17, 16, 519, 17, 25, 26.00, timestamp(date(\"2014-08-04\")), date(\"2014-08-04\")),\n+ ('t3c', 17, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-09-04\")), date(\"2014-09-05\")),\n+ ('t1b', null, 16, 419, 17, 25, 26.00, timestamp(date(\"2014-10-04\")), null),\n+ ('t1b', null, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-11-04\")), null),\n+ ('t3b', 8, null, 719, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-04\")),\n+ ('t3b', 8, null, 19, 17, 25, 26.00, timestamp(date(\"2015-05-04\")), date(\"2015-05-04\"));\n+\n+-- correlated IN subquery\n+-- simple select\n+-- TC 01.01\n+select * from t1 where t1a in (select t2a from t2);\n+-- TC 01.02\n+select * from t1 where t1b in (select t2b from t2 where t1a = t2a);\n+-- TC 01.03\n+select t1a, t1b from t1 where t1c in (select t2b from t2 where t1a != t2a);\n+-- TC 01.04\n+select t1a, t1b from t1 where t1c in (select t2b from t2 where t1a = t2a or t1b > t2b);\n+-- TC 01.05\n+select t1a, t1b from t1 where t1c in (select t2b from t2 where t2i in (select t3i from t3 where t2c = t3c));\n+-- TC 01.06\n+select t1a, t1b from t1 where t1c in (select t2b from t2 where t2a in\n+                      (select t3a from t3 where t2c = t3c and t2b is not NULL));\n+-- simple select for NOT IN\n+-- TC 01.07\n+select distinct(t1a), t1b, t1h from t1 where t1a not in (select t2a from t2);\n+-- TC 01.08, comment out pending on SPARK-18966\n+--select t1d, t1h, t1i from t1 where t1d not in (select t2d from t2 where t2h > t1h or t2i > t1i);\n+-- TC 01.09\n+select distinct(t1a), t1b from t1 where t1b not in (select t2b from t2 where t1a < t2a and t2b > 8);\n+-- TC 01.10, comment out pending on SPARK-18966\n+--select t1a, t1b from t1 where t1c not in (select t2b from t2 where t2a not in\n+--                      (select t3a from t3 where t2c = t3c and t2b is NULL));"
  }, {
    "author": {
      "login": "nsyca"
    },
    "body": "What is your recommendation to move this forward? Wouldn't commenting out the failing test cases be sufficient and at the same time, leave a trace that we had thought about these scenarios while we were writing tests for IN subquery?",
    "commit": "895bb35cf951e68936d26e81490a89e56a08d834",
    "createdAt": "2016-12-24T20:19:26Z",
    "diffHunk": "@@ -0,0 +1,92 @@\n+-- A test suite for simple IN predicate subquery\n+-- It includes correlated cases.\n+\n+-- tables and data types\n+\n+CREATE DATABASE indb;\n+CREATE TABLE t1(t1a String, t1b Short, t1c Int, t1d Long, t1e float, t1f double, t1g DECIMAL, t1h TIMESTAMP, t1i Date)\n+using parquet;\n+CREATE TABLE t2(t2a String, t2b Short, t2c Int, t2d Long, t2e float, t2f double, t2g DECIMAL, t2h TIMESTAMP, t2i Date)\n+using parquet;\n+CREATE TABLE t3(t3a String, t3b Short, t3c Int, t3d Long, t3e float, t3f double, t3g DECIMAL, t3h TIMESTAMP, t3i Date)\n+using parquet;\n+\n+-- insert to tables\n+INSERT INTO t1 VALUES\n+ ('t1a', 6, 8, 10, 15, 20, 20.00, timestamp(date(\"2014-04-04\")), date(\"2014-04-04\")),\n+ ('t1b', 8, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-04\")),\n+ ('t1a', 16, 12, 21, 15, 20, 20.00, timestamp(date(\"2014-06-04\")), date(\"2014-06-04\")),\n+ ('t1a', 16, 12, 10, 15, 20, 20.00, timestamp(date(\"2014-07-04\")), date(\"2014-07-04\")),\n+ ('t1c', 8, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-05\")),\n+ ('t1d', null, 16, 22, 17, 25, 26.00, timestamp(date(\"2014-06-04\")), null),\n+ ('t1d', null, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-07-04\")), null),\n+ ('t1e', 10, null, 25, 17, 25, 26.00, timestamp(date(\"2014-08-04\")), date(\"2014-08-04\")),\n+ ('t1e', 10, null, 19, 17, 25, 26.00, timestamp(date(\"2014-09-04\")), date(\"2014-09-04\")),\n+ ('t1d', 10, null, 12, 17, 25, 26.00, timestamp(date(\"2015-05-04\")), date(\"2015-05-04\")),\n+ ('t1a', 6, 8, 10, 15, 20, 20.00, timestamp(date(\"2014-04-04\")), date(\"2014-04-04\")),\n+ ('t1e', 10, null, 19, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-0=4\"));\n+\n+INSERT INTO t2 VALUES\n+ ('t2a', 6, 12, 14, 15, 20, 20.00, timestamp(date(\"2014-04-04\")), date(\"2014-04-04\")),\n+ ('t1b', 10, 12, 19, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-04\")),\n+ ('t1b', 8, 16, 119, 17, 25, 26.00, timestamp(date(\"2015-05-04\")), date(\"2015-05-04\")),\n+ ('t1c', 12, 16, 219, 17, 25, 26.00, timestamp(date(\"2016-05-04\")), date(\"2016-05-04\")),\n+ ('t1b', null, 16, 319, 17, 25, 26.00, timestamp(date(\"2017-05-04\")), null),\n+ ('t2e', 8, null, 419, 17, 25, 26.00, timestamp(date(\"2014-06-04\")), date(\"2014-06-04\")),\n+ ('t1f', 19, null, 519, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-04\")),\n+ ('t1b', 10, 12, 19, 17, 25, 26.00, timestamp(date(\"2014-06-04\")), date(\"2014-06-04\")),\n+ ('t1b', 8, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-07-04\")), date(\"2014-07-04\")),\n+ ('t1c', 12, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-08-04\")), date(\"2014-08-05\")),\n+ ('t1e', 8, null, 19, 17, 25, 26.00, timestamp(date(\"2014-09-04\")), date(\"2014-09-04\")),\n+ ('t1f', 19, null, 19, 17, 25, 26.00, timestamp(date(\"2014-10-04\")), date(\"2014-10-04\")),\n+ ('t1b', null, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), null);\n+\n+INSERT INTO t3 VALUES\n+ ('t3a', 6, 12, 110, 15, 20, 20.00, timestamp(date(\"2014-04-04\")), date(\"2014-04-04\")),\n+ ('t3a', 6, 12, 10, 15, 20, 20.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-04\")),\n+ ('t1b', 10, 12, 219, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-04\")),\n+ ('t1b', 10, 12, 19, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-04\")),\n+ ('t1b', 8, 16, 319, 17, 25, 26.00, timestamp(date(\"2014-06-04\")), date(\"2014-06-04\")),\n+ ('t1b', 8, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-07-04\")), date(\"2014-07-04\")),\n+ ('t3c', 17, 16, 519, 17, 25, 26.00, timestamp(date(\"2014-08-04\")), date(\"2014-08-04\")),\n+ ('t3c', 17, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-09-04\")), date(\"2014-09-05\")),\n+ ('t1b', null, 16, 419, 17, 25, 26.00, timestamp(date(\"2014-10-04\")), null),\n+ ('t1b', null, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-11-04\")), null),\n+ ('t3b', 8, null, 719, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-04\")),\n+ ('t3b', 8, null, 19, 17, 25, 26.00, timestamp(date(\"2015-05-04\")), date(\"2015-05-04\"));\n+\n+-- correlated IN subquery\n+-- simple select\n+-- TC 01.01\n+select * from t1 where t1a in (select t2a from t2);\n+-- TC 01.02\n+select * from t1 where t1b in (select t2b from t2 where t1a = t2a);\n+-- TC 01.03\n+select t1a, t1b from t1 where t1c in (select t2b from t2 where t1a != t2a);\n+-- TC 01.04\n+select t1a, t1b from t1 where t1c in (select t2b from t2 where t1a = t2a or t1b > t2b);\n+-- TC 01.05\n+select t1a, t1b from t1 where t1c in (select t2b from t2 where t2i in (select t3i from t3 where t2c = t3c));\n+-- TC 01.06\n+select t1a, t1b from t1 where t1c in (select t2b from t2 where t2a in\n+                      (select t3a from t3 where t2c = t3c and t2b is not NULL));\n+-- simple select for NOT IN\n+-- TC 01.07\n+select distinct(t1a), t1b, t1h from t1 where t1a not in (select t2a from t2);\n+-- TC 01.08, comment out pending on SPARK-18966\n+--select t1d, t1h, t1i from t1 where t1d not in (select t2d from t2 where t2h > t1h or t2i > t1i);\n+-- TC 01.09\n+select distinct(t1a), t1b from t1 where t1b not in (select t2b from t2 where t1a < t2a and t2b > 8);\n+-- TC 01.10, comment out pending on SPARK-18966\n+--select t1a, t1b from t1 where t1c not in (select t2b from t2 where t2a not in\n+--                      (select t3a from t3 where t2c = t3c and t2b is NULL));"
  }, {
    "author": {
      "login": "kevinyu98"
    },
    "body": "Sure, will do. Thanks.",
    "commit": "895bb35cf951e68936d26e81490a89e56a08d834",
    "createdAt": "2016-12-25T03:29:03Z",
    "diffHunk": "@@ -0,0 +1,92 @@\n+-- A test suite for simple IN predicate subquery\n+-- It includes correlated cases.\n+\n+-- tables and data types\n+\n+CREATE DATABASE indb;\n+CREATE TABLE t1(t1a String, t1b Short, t1c Int, t1d Long, t1e float, t1f double, t1g DECIMAL, t1h TIMESTAMP, t1i Date)\n+using parquet;\n+CREATE TABLE t2(t2a String, t2b Short, t2c Int, t2d Long, t2e float, t2f double, t2g DECIMAL, t2h TIMESTAMP, t2i Date)\n+using parquet;\n+CREATE TABLE t3(t3a String, t3b Short, t3c Int, t3d Long, t3e float, t3f double, t3g DECIMAL, t3h TIMESTAMP, t3i Date)\n+using parquet;\n+\n+-- insert to tables\n+INSERT INTO t1 VALUES\n+ ('t1a', 6, 8, 10, 15, 20, 20.00, timestamp(date(\"2014-04-04\")), date(\"2014-04-04\")),\n+ ('t1b', 8, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-04\")),\n+ ('t1a', 16, 12, 21, 15, 20, 20.00, timestamp(date(\"2014-06-04\")), date(\"2014-06-04\")),\n+ ('t1a', 16, 12, 10, 15, 20, 20.00, timestamp(date(\"2014-07-04\")), date(\"2014-07-04\")),\n+ ('t1c', 8, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-05\")),\n+ ('t1d', null, 16, 22, 17, 25, 26.00, timestamp(date(\"2014-06-04\")), null),\n+ ('t1d', null, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-07-04\")), null),\n+ ('t1e', 10, null, 25, 17, 25, 26.00, timestamp(date(\"2014-08-04\")), date(\"2014-08-04\")),\n+ ('t1e', 10, null, 19, 17, 25, 26.00, timestamp(date(\"2014-09-04\")), date(\"2014-09-04\")),\n+ ('t1d', 10, null, 12, 17, 25, 26.00, timestamp(date(\"2015-05-04\")), date(\"2015-05-04\")),\n+ ('t1a', 6, 8, 10, 15, 20, 20.00, timestamp(date(\"2014-04-04\")), date(\"2014-04-04\")),\n+ ('t1e', 10, null, 19, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-0=4\"));\n+\n+INSERT INTO t2 VALUES\n+ ('t2a', 6, 12, 14, 15, 20, 20.00, timestamp(date(\"2014-04-04\")), date(\"2014-04-04\")),\n+ ('t1b', 10, 12, 19, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-04\")),\n+ ('t1b', 8, 16, 119, 17, 25, 26.00, timestamp(date(\"2015-05-04\")), date(\"2015-05-04\")),\n+ ('t1c', 12, 16, 219, 17, 25, 26.00, timestamp(date(\"2016-05-04\")), date(\"2016-05-04\")),\n+ ('t1b', null, 16, 319, 17, 25, 26.00, timestamp(date(\"2017-05-04\")), null),\n+ ('t2e', 8, null, 419, 17, 25, 26.00, timestamp(date(\"2014-06-04\")), date(\"2014-06-04\")),\n+ ('t1f', 19, null, 519, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-04\")),\n+ ('t1b', 10, 12, 19, 17, 25, 26.00, timestamp(date(\"2014-06-04\")), date(\"2014-06-04\")),\n+ ('t1b', 8, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-07-04\")), date(\"2014-07-04\")),\n+ ('t1c', 12, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-08-04\")), date(\"2014-08-05\")),\n+ ('t1e', 8, null, 19, 17, 25, 26.00, timestamp(date(\"2014-09-04\")), date(\"2014-09-04\")),\n+ ('t1f', 19, null, 19, 17, 25, 26.00, timestamp(date(\"2014-10-04\")), date(\"2014-10-04\")),\n+ ('t1b', null, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), null);\n+\n+INSERT INTO t3 VALUES\n+ ('t3a', 6, 12, 110, 15, 20, 20.00, timestamp(date(\"2014-04-04\")), date(\"2014-04-04\")),\n+ ('t3a', 6, 12, 10, 15, 20, 20.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-04\")),\n+ ('t1b', 10, 12, 219, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-04\")),\n+ ('t1b', 10, 12, 19, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-04\")),\n+ ('t1b', 8, 16, 319, 17, 25, 26.00, timestamp(date(\"2014-06-04\")), date(\"2014-06-04\")),\n+ ('t1b', 8, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-07-04\")), date(\"2014-07-04\")),\n+ ('t3c', 17, 16, 519, 17, 25, 26.00, timestamp(date(\"2014-08-04\")), date(\"2014-08-04\")),\n+ ('t3c', 17, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-09-04\")), date(\"2014-09-05\")),\n+ ('t1b', null, 16, 419, 17, 25, 26.00, timestamp(date(\"2014-10-04\")), null),\n+ ('t1b', null, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-11-04\")), null),\n+ ('t3b', 8, null, 719, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-04\")),\n+ ('t3b', 8, null, 19, 17, 25, 26.00, timestamp(date(\"2015-05-04\")), date(\"2015-05-04\"));\n+\n+-- correlated IN subquery\n+-- simple select\n+-- TC 01.01\n+select * from t1 where t1a in (select t2a from t2);\n+-- TC 01.02\n+select * from t1 where t1b in (select t2b from t2 where t1a = t2a);\n+-- TC 01.03\n+select t1a, t1b from t1 where t1c in (select t2b from t2 where t1a != t2a);\n+-- TC 01.04\n+select t1a, t1b from t1 where t1c in (select t2b from t2 where t1a = t2a or t1b > t2b);\n+-- TC 01.05\n+select t1a, t1b from t1 where t1c in (select t2b from t2 where t2i in (select t3i from t3 where t2c = t3c));\n+-- TC 01.06\n+select t1a, t1b from t1 where t1c in (select t2b from t2 where t2a in\n+                      (select t3a from t3 where t2c = t3c and t2b is not NULL));\n+-- simple select for NOT IN\n+-- TC 01.07\n+select distinct(t1a), t1b, t1h from t1 where t1a not in (select t2a from t2);\n+-- TC 01.08, comment out pending on SPARK-18966\n+--select t1d, t1h, t1i from t1 where t1d not in (select t2d from t2 where t2h > t1h or t2i > t1i);\n+-- TC 01.09\n+select distinct(t1a), t1b from t1 where t1b not in (select t2b from t2 where t1a < t2a and t2b > 8);\n+-- TC 01.10, comment out pending on SPARK-18966\n+--select t1a, t1b from t1 where t1c not in (select t2b from t2 where t2a not in\n+--                      (select t3a from t3 where t2c = t3c and t2b is NULL));"
  }, {
    "author": {
      "login": "gatorsmile"
    },
    "body": "Normally, remove all the unnecessary changes. If any issue/bug exists, create a JIRA to track it.",
    "commit": "895bb35cf951e68936d26e81490a89e56a08d834",
    "createdAt": "2016-12-25T07:40:34Z",
    "diffHunk": "@@ -0,0 +1,92 @@\n+-- A test suite for simple IN predicate subquery\n+-- It includes correlated cases.\n+\n+-- tables and data types\n+\n+CREATE DATABASE indb;\n+CREATE TABLE t1(t1a String, t1b Short, t1c Int, t1d Long, t1e float, t1f double, t1g DECIMAL, t1h TIMESTAMP, t1i Date)\n+using parquet;\n+CREATE TABLE t2(t2a String, t2b Short, t2c Int, t2d Long, t2e float, t2f double, t2g DECIMAL, t2h TIMESTAMP, t2i Date)\n+using parquet;\n+CREATE TABLE t3(t3a String, t3b Short, t3c Int, t3d Long, t3e float, t3f double, t3g DECIMAL, t3h TIMESTAMP, t3i Date)\n+using parquet;\n+\n+-- insert to tables\n+INSERT INTO t1 VALUES\n+ ('t1a', 6, 8, 10, 15, 20, 20.00, timestamp(date(\"2014-04-04\")), date(\"2014-04-04\")),\n+ ('t1b', 8, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-04\")),\n+ ('t1a', 16, 12, 21, 15, 20, 20.00, timestamp(date(\"2014-06-04\")), date(\"2014-06-04\")),\n+ ('t1a', 16, 12, 10, 15, 20, 20.00, timestamp(date(\"2014-07-04\")), date(\"2014-07-04\")),\n+ ('t1c', 8, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-05\")),\n+ ('t1d', null, 16, 22, 17, 25, 26.00, timestamp(date(\"2014-06-04\")), null),\n+ ('t1d', null, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-07-04\")), null),\n+ ('t1e', 10, null, 25, 17, 25, 26.00, timestamp(date(\"2014-08-04\")), date(\"2014-08-04\")),\n+ ('t1e', 10, null, 19, 17, 25, 26.00, timestamp(date(\"2014-09-04\")), date(\"2014-09-04\")),\n+ ('t1d', 10, null, 12, 17, 25, 26.00, timestamp(date(\"2015-05-04\")), date(\"2015-05-04\")),\n+ ('t1a', 6, 8, 10, 15, 20, 20.00, timestamp(date(\"2014-04-04\")), date(\"2014-04-04\")),\n+ ('t1e', 10, null, 19, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-0=4\"));\n+\n+INSERT INTO t2 VALUES\n+ ('t2a', 6, 12, 14, 15, 20, 20.00, timestamp(date(\"2014-04-04\")), date(\"2014-04-04\")),\n+ ('t1b', 10, 12, 19, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-04\")),\n+ ('t1b', 8, 16, 119, 17, 25, 26.00, timestamp(date(\"2015-05-04\")), date(\"2015-05-04\")),\n+ ('t1c', 12, 16, 219, 17, 25, 26.00, timestamp(date(\"2016-05-04\")), date(\"2016-05-04\")),\n+ ('t1b', null, 16, 319, 17, 25, 26.00, timestamp(date(\"2017-05-04\")), null),\n+ ('t2e', 8, null, 419, 17, 25, 26.00, timestamp(date(\"2014-06-04\")), date(\"2014-06-04\")),\n+ ('t1f', 19, null, 519, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-04\")),\n+ ('t1b', 10, 12, 19, 17, 25, 26.00, timestamp(date(\"2014-06-04\")), date(\"2014-06-04\")),\n+ ('t1b', 8, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-07-04\")), date(\"2014-07-04\")),\n+ ('t1c', 12, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-08-04\")), date(\"2014-08-05\")),\n+ ('t1e', 8, null, 19, 17, 25, 26.00, timestamp(date(\"2014-09-04\")), date(\"2014-09-04\")),\n+ ('t1f', 19, null, 19, 17, 25, 26.00, timestamp(date(\"2014-10-04\")), date(\"2014-10-04\")),\n+ ('t1b', null, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), null);\n+\n+INSERT INTO t3 VALUES\n+ ('t3a', 6, 12, 110, 15, 20, 20.00, timestamp(date(\"2014-04-04\")), date(\"2014-04-04\")),\n+ ('t3a', 6, 12, 10, 15, 20, 20.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-04\")),\n+ ('t1b', 10, 12, 219, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-04\")),\n+ ('t1b', 10, 12, 19, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-04\")),\n+ ('t1b', 8, 16, 319, 17, 25, 26.00, timestamp(date(\"2014-06-04\")), date(\"2014-06-04\")),\n+ ('t1b', 8, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-07-04\")), date(\"2014-07-04\")),\n+ ('t3c', 17, 16, 519, 17, 25, 26.00, timestamp(date(\"2014-08-04\")), date(\"2014-08-04\")),\n+ ('t3c', 17, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-09-04\")), date(\"2014-09-05\")),\n+ ('t1b', null, 16, 419, 17, 25, 26.00, timestamp(date(\"2014-10-04\")), null),\n+ ('t1b', null, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-11-04\")), null),\n+ ('t3b', 8, null, 719, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-04\")),\n+ ('t3b', 8, null, 19, 17, 25, 26.00, timestamp(date(\"2015-05-04\")), date(\"2015-05-04\"));\n+\n+-- correlated IN subquery\n+-- simple select\n+-- TC 01.01\n+select * from t1 where t1a in (select t2a from t2);\n+-- TC 01.02\n+select * from t1 where t1b in (select t2b from t2 where t1a = t2a);\n+-- TC 01.03\n+select t1a, t1b from t1 where t1c in (select t2b from t2 where t1a != t2a);\n+-- TC 01.04\n+select t1a, t1b from t1 where t1c in (select t2b from t2 where t1a = t2a or t1b > t2b);\n+-- TC 01.05\n+select t1a, t1b from t1 where t1c in (select t2b from t2 where t2i in (select t3i from t3 where t2c = t3c));\n+-- TC 01.06\n+select t1a, t1b from t1 where t1c in (select t2b from t2 where t2a in\n+                      (select t3a from t3 where t2c = t3c and t2b is not NULL));\n+-- simple select for NOT IN\n+-- TC 01.07\n+select distinct(t1a), t1b, t1h from t1 where t1a not in (select t2a from t2);\n+-- TC 01.08, comment out pending on SPARK-18966\n+--select t1d, t1h, t1i from t1 where t1d not in (select t2d from t2 where t2h > t1h or t2i > t1i);\n+-- TC 01.09\n+select distinct(t1a), t1b from t1 where t1b not in (select t2b from t2 where t1a < t2a and t2b > 8);\n+-- TC 01.10, comment out pending on SPARK-18966\n+--select t1a, t1b from t1 where t1c not in (select t2b from t2 where t2a not in\n+--                      (select t3a from t3 where t2c = t3c and t2b is NULL));"
  }],
  "prId": 16337
}, {
  "comments": [{
    "author": {
      "login": "gatorsmile"
    },
    "body": "Please add one more empty line here.",
    "commit": "895bb35cf951e68936d26e81490a89e56a08d834",
    "createdAt": "2016-12-24T02:46:54Z",
    "diffHunk": "@@ -0,0 +1,92 @@\n+-- A test suite for simple IN predicate subquery\n+-- It includes correlated cases.\n+\n+-- tables and data types\n+\n+CREATE DATABASE indb;\n+CREATE TABLE t1(t1a String, t1b Short, t1c Int, t1d Long, t1e float, t1f double, t1g DECIMAL, t1h TIMESTAMP, t1i Date)\n+using parquet;\n+CREATE TABLE t2(t2a String, t2b Short, t2c Int, t2d Long, t2e float, t2f double, t2g DECIMAL, t2h TIMESTAMP, t2i Date)\n+using parquet;\n+CREATE TABLE t3(t3a String, t3b Short, t3c Int, t3d Long, t3e float, t3f double, t3g DECIMAL, t3h TIMESTAMP, t3i Date)\n+using parquet;\n+\n+-- insert to tables\n+INSERT INTO t1 VALUES\n+ ('t1a', 6, 8, 10, 15, 20, 20.00, timestamp(date(\"2014-04-04\")), date(\"2014-04-04\")),\n+ ('t1b', 8, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-04\")),\n+ ('t1a', 16, 12, 21, 15, 20, 20.00, timestamp(date(\"2014-06-04\")), date(\"2014-06-04\")),\n+ ('t1a', 16, 12, 10, 15, 20, 20.00, timestamp(date(\"2014-07-04\")), date(\"2014-07-04\")),\n+ ('t1c', 8, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-05\")),\n+ ('t1d', null, 16, 22, 17, 25, 26.00, timestamp(date(\"2014-06-04\")), null),\n+ ('t1d', null, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-07-04\")), null),\n+ ('t1e', 10, null, 25, 17, 25, 26.00, timestamp(date(\"2014-08-04\")), date(\"2014-08-04\")),\n+ ('t1e', 10, null, 19, 17, 25, 26.00, timestamp(date(\"2014-09-04\")), date(\"2014-09-04\")),\n+ ('t1d', 10, null, 12, 17, 25, 26.00, timestamp(date(\"2015-05-04\")), date(\"2015-05-04\")),\n+ ('t1a', 6, 8, 10, 15, 20, 20.00, timestamp(date(\"2014-04-04\")), date(\"2014-04-04\")),\n+ ('t1e', 10, null, 19, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-0=4\"));\n+\n+INSERT INTO t2 VALUES\n+ ('t2a', 6, 12, 14, 15, 20, 20.00, timestamp(date(\"2014-04-04\")), date(\"2014-04-04\")),\n+ ('t1b', 10, 12, 19, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-04\")),\n+ ('t1b', 8, 16, 119, 17, 25, 26.00, timestamp(date(\"2015-05-04\")), date(\"2015-05-04\")),\n+ ('t1c', 12, 16, 219, 17, 25, 26.00, timestamp(date(\"2016-05-04\")), date(\"2016-05-04\")),\n+ ('t1b', null, 16, 319, 17, 25, 26.00, timestamp(date(\"2017-05-04\")), null),\n+ ('t2e', 8, null, 419, 17, 25, 26.00, timestamp(date(\"2014-06-04\")), date(\"2014-06-04\")),\n+ ('t1f', 19, null, 519, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-04\")),\n+ ('t1b', 10, 12, 19, 17, 25, 26.00, timestamp(date(\"2014-06-04\")), date(\"2014-06-04\")),\n+ ('t1b', 8, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-07-04\")), date(\"2014-07-04\")),\n+ ('t1c', 12, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-08-04\")), date(\"2014-08-05\")),\n+ ('t1e', 8, null, 19, 17, 25, 26.00, timestamp(date(\"2014-09-04\")), date(\"2014-09-04\")),\n+ ('t1f', 19, null, 19, 17, 25, 26.00, timestamp(date(\"2014-10-04\")), date(\"2014-10-04\")),\n+ ('t1b', null, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), null);\n+\n+INSERT INTO t3 VALUES\n+ ('t3a', 6, 12, 110, 15, 20, 20.00, timestamp(date(\"2014-04-04\")), date(\"2014-04-04\")),\n+ ('t3a', 6, 12, 10, 15, 20, 20.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-04\")),\n+ ('t1b', 10, 12, 219, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-04\")),\n+ ('t1b', 10, 12, 19, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-04\")),\n+ ('t1b', 8, 16, 319, 17, 25, 26.00, timestamp(date(\"2014-06-04\")), date(\"2014-06-04\")),\n+ ('t1b', 8, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-07-04\")), date(\"2014-07-04\")),\n+ ('t3c', 17, 16, 519, 17, 25, 26.00, timestamp(date(\"2014-08-04\")), date(\"2014-08-04\")),\n+ ('t3c', 17, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-09-04\")), date(\"2014-09-05\")),\n+ ('t1b', null, 16, 419, 17, 25, 26.00, timestamp(date(\"2014-10-04\")), null),\n+ ('t1b', null, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-11-04\")), null),\n+ ('t3b', 8, null, 719, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-04\")),\n+ ('t3b', 8, null, 19, 17, 25, 26.00, timestamp(date(\"2015-05-04\")), date(\"2015-05-04\"));\n+\n+-- correlated IN subquery\n+-- simple select\n+-- TC 01.01\n+select * from t1 where t1a in (select t2a from t2);\n+-- TC 01.02\n+select * from t1 where t1b in (select t2b from t2 where t1a = t2a);\n+-- TC 01.03\n+select t1a, t1b from t1 where t1c in (select t2b from t2 where t1a != t2a);\n+-- TC 01.04\n+select t1a, t1b from t1 where t1c in (select t2b from t2 where t1a = t2a or t1b > t2b);\n+-- TC 01.05\n+select t1a, t1b from t1 where t1c in (select t2b from t2 where t2i in (select t3i from t3 where t2c = t3c));\n+-- TC 01.06\n+select t1a, t1b from t1 where t1c in (select t2b from t2 where t2a in\n+                      (select t3a from t3 where t2c = t3c and t2b is not NULL));\n+-- simple select for NOT IN\n+-- TC 01.07\n+select distinct(t1a), t1b, t1h from t1 where t1a not in (select t2a from t2);\n+-- TC 01.08, comment out pending on SPARK-18966\n+--select t1d, t1h, t1i from t1 where t1d not in (select t2d from t2 where t2h > t1h or t2i > t1i);\n+-- TC 01.09\n+select distinct(t1a), t1b from t1 where t1b not in (select t2b from t2 where t1a < t2a and t2b > 8);\n+-- TC 01.10, comment out pending on SPARK-18966\n+--select t1a, t1b from t1 where t1c not in (select t2b from t2 where t2a not in\n+--                      (select t3a from t3 where t2c = t3c and t2b is NULL));\n+-- TC 01.11\n+select t1a, t1b from t1 where t1h not in (select t2h from t2 where t2a = t1a) and t1b not in (\n+                      (select min(t3b) from t3 where t3d = t1d));\n+\n+-- Clean Up\n+DROP TABLE t1;\n+DROP TABLE t2;\n+DROP TABLE t3;\n+USE default;\n+DROP DATABASE indb;"
  }, {
    "author": {
      "login": "kevinyu98"
    },
    "body": "ok.",
    "commit": "895bb35cf951e68936d26e81490a89e56a08d834",
    "createdAt": "2016-12-25T03:29:12Z",
    "diffHunk": "@@ -0,0 +1,92 @@\n+-- A test suite for simple IN predicate subquery\n+-- It includes correlated cases.\n+\n+-- tables and data types\n+\n+CREATE DATABASE indb;\n+CREATE TABLE t1(t1a String, t1b Short, t1c Int, t1d Long, t1e float, t1f double, t1g DECIMAL, t1h TIMESTAMP, t1i Date)\n+using parquet;\n+CREATE TABLE t2(t2a String, t2b Short, t2c Int, t2d Long, t2e float, t2f double, t2g DECIMAL, t2h TIMESTAMP, t2i Date)\n+using parquet;\n+CREATE TABLE t3(t3a String, t3b Short, t3c Int, t3d Long, t3e float, t3f double, t3g DECIMAL, t3h TIMESTAMP, t3i Date)\n+using parquet;\n+\n+-- insert to tables\n+INSERT INTO t1 VALUES\n+ ('t1a', 6, 8, 10, 15, 20, 20.00, timestamp(date(\"2014-04-04\")), date(\"2014-04-04\")),\n+ ('t1b', 8, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-04\")),\n+ ('t1a', 16, 12, 21, 15, 20, 20.00, timestamp(date(\"2014-06-04\")), date(\"2014-06-04\")),\n+ ('t1a', 16, 12, 10, 15, 20, 20.00, timestamp(date(\"2014-07-04\")), date(\"2014-07-04\")),\n+ ('t1c', 8, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-05\")),\n+ ('t1d', null, 16, 22, 17, 25, 26.00, timestamp(date(\"2014-06-04\")), null),\n+ ('t1d', null, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-07-04\")), null),\n+ ('t1e', 10, null, 25, 17, 25, 26.00, timestamp(date(\"2014-08-04\")), date(\"2014-08-04\")),\n+ ('t1e', 10, null, 19, 17, 25, 26.00, timestamp(date(\"2014-09-04\")), date(\"2014-09-04\")),\n+ ('t1d', 10, null, 12, 17, 25, 26.00, timestamp(date(\"2015-05-04\")), date(\"2015-05-04\")),\n+ ('t1a', 6, 8, 10, 15, 20, 20.00, timestamp(date(\"2014-04-04\")), date(\"2014-04-04\")),\n+ ('t1e', 10, null, 19, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-0=4\"));\n+\n+INSERT INTO t2 VALUES\n+ ('t2a', 6, 12, 14, 15, 20, 20.00, timestamp(date(\"2014-04-04\")), date(\"2014-04-04\")),\n+ ('t1b', 10, 12, 19, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-04\")),\n+ ('t1b', 8, 16, 119, 17, 25, 26.00, timestamp(date(\"2015-05-04\")), date(\"2015-05-04\")),\n+ ('t1c', 12, 16, 219, 17, 25, 26.00, timestamp(date(\"2016-05-04\")), date(\"2016-05-04\")),\n+ ('t1b', null, 16, 319, 17, 25, 26.00, timestamp(date(\"2017-05-04\")), null),\n+ ('t2e', 8, null, 419, 17, 25, 26.00, timestamp(date(\"2014-06-04\")), date(\"2014-06-04\")),\n+ ('t1f', 19, null, 519, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-04\")),\n+ ('t1b', 10, 12, 19, 17, 25, 26.00, timestamp(date(\"2014-06-04\")), date(\"2014-06-04\")),\n+ ('t1b', 8, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-07-04\")), date(\"2014-07-04\")),\n+ ('t1c', 12, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-08-04\")), date(\"2014-08-05\")),\n+ ('t1e', 8, null, 19, 17, 25, 26.00, timestamp(date(\"2014-09-04\")), date(\"2014-09-04\")),\n+ ('t1f', 19, null, 19, 17, 25, 26.00, timestamp(date(\"2014-10-04\")), date(\"2014-10-04\")),\n+ ('t1b', null, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), null);\n+\n+INSERT INTO t3 VALUES\n+ ('t3a', 6, 12, 110, 15, 20, 20.00, timestamp(date(\"2014-04-04\")), date(\"2014-04-04\")),\n+ ('t3a', 6, 12, 10, 15, 20, 20.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-04\")),\n+ ('t1b', 10, 12, 219, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-04\")),\n+ ('t1b', 10, 12, 19, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-04\")),\n+ ('t1b', 8, 16, 319, 17, 25, 26.00, timestamp(date(\"2014-06-04\")), date(\"2014-06-04\")),\n+ ('t1b', 8, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-07-04\")), date(\"2014-07-04\")),\n+ ('t3c', 17, 16, 519, 17, 25, 26.00, timestamp(date(\"2014-08-04\")), date(\"2014-08-04\")),\n+ ('t3c', 17, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-09-04\")), date(\"2014-09-05\")),\n+ ('t1b', null, 16, 419, 17, 25, 26.00, timestamp(date(\"2014-10-04\")), null),\n+ ('t1b', null, 16, 19, 17, 25, 26.00, timestamp(date(\"2014-11-04\")), null),\n+ ('t3b', 8, null, 719, 17, 25, 26.00, timestamp(date(\"2014-05-04\")), date(\"2014-05-04\")),\n+ ('t3b', 8, null, 19, 17, 25, 26.00, timestamp(date(\"2015-05-04\")), date(\"2015-05-04\"));\n+\n+-- correlated IN subquery\n+-- simple select\n+-- TC 01.01\n+select * from t1 where t1a in (select t2a from t2);\n+-- TC 01.02\n+select * from t1 where t1b in (select t2b from t2 where t1a = t2a);\n+-- TC 01.03\n+select t1a, t1b from t1 where t1c in (select t2b from t2 where t1a != t2a);\n+-- TC 01.04\n+select t1a, t1b from t1 where t1c in (select t2b from t2 where t1a = t2a or t1b > t2b);\n+-- TC 01.05\n+select t1a, t1b from t1 where t1c in (select t2b from t2 where t2i in (select t3i from t3 where t2c = t3c));\n+-- TC 01.06\n+select t1a, t1b from t1 where t1c in (select t2b from t2 where t2a in\n+                      (select t3a from t3 where t2c = t3c and t2b is not NULL));\n+-- simple select for NOT IN\n+-- TC 01.07\n+select distinct(t1a), t1b, t1h from t1 where t1a not in (select t2a from t2);\n+-- TC 01.08, comment out pending on SPARK-18966\n+--select t1d, t1h, t1i from t1 where t1d not in (select t2d from t2 where t2h > t1h or t2i > t1i);\n+-- TC 01.09\n+select distinct(t1a), t1b from t1 where t1b not in (select t2b from t2 where t1a < t2a and t2b > 8);\n+-- TC 01.10, comment out pending on SPARK-18966\n+--select t1a, t1b from t1 where t1c not in (select t2b from t2 where t2a not in\n+--                      (select t3a from t3 where t2c = t3c and t2b is NULL));\n+-- TC 01.11\n+select t1a, t1b from t1 where t1h not in (select t2h from t2 where t2a = t1a) and t1b not in (\n+                      (select min(t3b) from t3 where t3d = t1d));\n+\n+-- Clean Up\n+DROP TABLE t1;\n+DROP TABLE t2;\n+DROP TABLE t3;\n+USE default;\n+DROP DATABASE indb;"
  }],
  "prId": 16337
}]