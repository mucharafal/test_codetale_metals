[{
  "comments": [{
    "author": {
      "login": "gatorsmile"
    },
    "body": "No need to drop the temp views.",
    "commit": "a5f9c44875b67d9b6590a8cef6778667388fc162",
    "createdAt": "2017-05-19T22:23:31Z",
    "diffHunk": "@@ -0,0 +1,24 @@\n+CREATE OR REPLACE TEMPORARY VIEW testData AS SELECT * FROM VALUES\n+(1, \"1\"), (2, \"2\"), (3, \"3\"), (4, \"4\"), (5, \"5\"), (6, \"6\")\n+AS testData(key, value);\n+\n+CREATE OR REPLACE TEMPORARY VIEW testData2 AS SELECT * FROM VALUES\n+(1, 1), (1, 2), (2, 1), (2, 2), (3, 1), (3, 2)\n+AS testData2(a, b);\n+\n+-- AnalysisException\n+SELECT `(a)?+.+` FROM testData2 WHERE a = 1;\n+\n+-- AnalysisException\n+SELECT t.`(a)?+.+` FROM testData2 t WHERE a = 1;\n+\n+set spark.sql.parser.quotedRegexColumnNames=true;\n+\n+-- Regex columns\n+SELECT `(a)?+.+` FROM testData2 WHERE a = 1;\n+SELECT t.`(a)?+.+` FROM testData2 t WHERE a = 1;\n+SELECT p.`(key)?+.+`, b, testdata2.`(b)?+.+` FROM testData p join testData2 ON p.key = testData2.a WHERE key < 3;\n+\n+-- Clean-up\n+DROP VIEW IF EXISTS testData;\n+DROP VIEW IF EXISTS testData2;"
  }, {
    "author": {
      "login": "janewangfb"
    },
    "body": "removed",
    "commit": "a5f9c44875b67d9b6590a8cef6778667388fc162",
    "createdAt": "2017-05-19T22:36:25Z",
    "diffHunk": "@@ -0,0 +1,24 @@\n+CREATE OR REPLACE TEMPORARY VIEW testData AS SELECT * FROM VALUES\n+(1, \"1\"), (2, \"2\"), (3, \"3\"), (4, \"4\"), (5, \"5\"), (6, \"6\")\n+AS testData(key, value);\n+\n+CREATE OR REPLACE TEMPORARY VIEW testData2 AS SELECT * FROM VALUES\n+(1, 1), (1, 2), (2, 1), (2, 2), (3, 1), (3, 2)\n+AS testData2(a, b);\n+\n+-- AnalysisException\n+SELECT `(a)?+.+` FROM testData2 WHERE a = 1;\n+\n+-- AnalysisException\n+SELECT t.`(a)?+.+` FROM testData2 t WHERE a = 1;\n+\n+set spark.sql.parser.quotedRegexColumnNames=true;\n+\n+-- Regex columns\n+SELECT `(a)?+.+` FROM testData2 WHERE a = 1;\n+SELECT t.`(a)?+.+` FROM testData2 t WHERE a = 1;\n+SELECT p.`(key)?+.+`, b, testdata2.`(b)?+.+` FROM testData p join testData2 ON p.key = testData2.a WHERE key < 3;\n+\n+-- Clean-up\n+DROP VIEW IF EXISTS testData;\n+DROP VIEW IF EXISTS testData2;"
  }],
  "prId": 18023
}, {
  "comments": [{
    "author": {
      "login": "gatorsmile"
    },
    "body": "Since the test cases are testing the regex pattern matching in column names, could you add more names and let the regex pattern match more columns?",
    "commit": "a5f9c44875b67d9b6590a8cef6778667388fc162",
    "createdAt": "2017-05-19T22:25:17Z",
    "diffHunk": "@@ -0,0 +1,24 @@\n+CREATE OR REPLACE TEMPORARY VIEW testData AS SELECT * FROM VALUES\n+(1, \"1\"), (2, \"2\"), (3, \"3\"), (4, \"4\"), (5, \"5\"), (6, \"6\")\n+AS testData(key, value);\n+\n+CREATE OR REPLACE TEMPORARY VIEW testData2 AS SELECT * FROM VALUES\n+(1, 1), (1, 2), (2, 1), (2, 2), (3, 1), (3, 2)\n+AS testData2(a, b);"
  }, {
    "author": {
      "login": "janewangfb"
    },
    "body": "sure. added two more columns",
    "commit": "a5f9c44875b67d9b6590a8cef6778667388fc162",
    "createdAt": "2017-05-19T22:37:27Z",
    "diffHunk": "@@ -0,0 +1,24 @@\n+CREATE OR REPLACE TEMPORARY VIEW testData AS SELECT * FROM VALUES\n+(1, \"1\"), (2, \"2\"), (3, \"3\"), (4, \"4\"), (5, \"5\"), (6, \"6\")\n+AS testData(key, value);\n+\n+CREATE OR REPLACE TEMPORARY VIEW testData2 AS SELECT * FROM VALUES\n+(1, 1), (1, 2), (2, 1), (2, 2), (3, 1), (3, 2)\n+AS testData2(a, b);"
  }],
  "prId": 18023
}, {
  "comments": [{
    "author": {
      "login": "gatorsmile"
    },
    "body": "Nit: Please add a new line.",
    "commit": "a5f9c44875b67d9b6590a8cef6778667388fc162",
    "createdAt": "2017-06-27T21:31:40Z",
    "diffHunk": "@@ -0,0 +1,24 @@\n+CREATE OR REPLACE TEMPORARY VIEW testData AS SELECT * FROM VALUES\n+(1, \"1\", \"11\"), (2, \"2\", \"22\"), (3, \"3\", \"33\"), (4, \"4\", \"44\"), (5, \"5\", \"55\"), (6, \"6\", \"66\")\n+AS testData(key, value1, value2);\n+\n+CREATE OR REPLACE TEMPORARY VIEW testData2 AS SELECT * FROM VALUES\n+(1, 1, 1, 2), (1, 2, 1, 2), (2, 1, 2, 3), (2, 2, 2, 3), (3, 1, 3, 4), (3, 2, 3, 4)\n+AS testData2(a, b, c, d);\n+\n+-- AnalysisException\n+SELECT `(a)?+.+` FROM testData2 WHERE a = 1;\n+SELECT t.`(a)?+.+` FROM testData2 t WHERE a = 1;\n+SELECT `(a|b)` FROM testData2 WHERE a = 2;\n+SELECT `(a|b)?+.+` FROM testData2 WHERE a = 2;\n+\n+set spark.sql.parser.quotedRegexColumnNames=true;\n+\n+-- Regex columns\n+SELECT `(a)?+.+` FROM testData2 WHERE a = 1;\n+SELECT t.`(a)?+.+` FROM testData2 t WHERE a = 1;\n+SELECT `(a|b)` FROM testData2 WHERE a = 2;\n+SELECT `(a|b)?+.+` FROM testData2 WHERE a = 2;\n+SELECT `(e|f)` FROM testData2;\n+SELECT t.`(e|f)` FROM testData2 t;\n+SELECT p.`(key)?+.+`, b, testdata2.`(b)?+.+` FROM testData p join testData2 ON p.key = testData2.a WHERE key < 3;"
  }, {
    "author": {
      "login": "janewangfb"
    },
    "body": "added",
    "commit": "a5f9c44875b67d9b6590a8cef6778667388fc162",
    "createdAt": "2017-06-28T05:38:55Z",
    "diffHunk": "@@ -0,0 +1,24 @@\n+CREATE OR REPLACE TEMPORARY VIEW testData AS SELECT * FROM VALUES\n+(1, \"1\", \"11\"), (2, \"2\", \"22\"), (3, \"3\", \"33\"), (4, \"4\", \"44\"), (5, \"5\", \"55\"), (6, \"6\", \"66\")\n+AS testData(key, value1, value2);\n+\n+CREATE OR REPLACE TEMPORARY VIEW testData2 AS SELECT * FROM VALUES\n+(1, 1, 1, 2), (1, 2, 1, 2), (2, 1, 2, 3), (2, 2, 2, 3), (3, 1, 3, 4), (3, 2, 3, 4)\n+AS testData2(a, b, c, d);\n+\n+-- AnalysisException\n+SELECT `(a)?+.+` FROM testData2 WHERE a = 1;\n+SELECT t.`(a)?+.+` FROM testData2 t WHERE a = 1;\n+SELECT `(a|b)` FROM testData2 WHERE a = 2;\n+SELECT `(a|b)?+.+` FROM testData2 WHERE a = 2;\n+\n+set spark.sql.parser.quotedRegexColumnNames=true;\n+\n+-- Regex columns\n+SELECT `(a)?+.+` FROM testData2 WHERE a = 1;\n+SELECT t.`(a)?+.+` FROM testData2 t WHERE a = 1;\n+SELECT `(a|b)` FROM testData2 WHERE a = 2;\n+SELECT `(a|b)?+.+` FROM testData2 WHERE a = 2;\n+SELECT `(e|f)` FROM testData2;\n+SELECT t.`(e|f)` FROM testData2 t;\n+SELECT p.`(key)?+.+`, b, testdata2.`(b)?+.+` FROM testData p join testData2 ON p.key = testData2.a WHERE key < 3;"
  }],
  "prId": 18023
}]