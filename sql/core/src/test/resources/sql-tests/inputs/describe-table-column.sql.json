[{
  "comments": [{
    "author": {
      "login": "wzhfy"
    },
    "body": "INSERT INTO desc_col_table values 1, 2, 3, 4",
    "commit": "38ef638a333e7ba9e3ab91204f072244f4816b89",
    "createdAt": "2017-11-17T13:57:18Z",
    "diffHunk": "@@ -24,6 +24,18 @@ DESC EXTENDED desc_col_table key;\n \n DESC FORMATTED desc_col_table key;\n \n+SET spark.sql.statistics.histogram.enabled=true;\n+SET spark.sql.statistics.histogram.numBins=2;\n+\n+INSERT INTO desc_col_table values(1);\n+INSERT INTO desc_col_table values(2);\n+INSERT INTO desc_col_table values(3);\n+INSERT INTO desc_col_table values(4);"
  }],
  "prId": 19774
}, {
  "comments": [{
    "author": {
      "login": "wzhfy"
    },
    "body": "please set the sql conf back to default value after this command, so that other tests won't be influenced.",
    "commit": "38ef638a333e7ba9e3ab91204f072244f4816b89",
    "createdAt": "2017-11-17T14:14:03Z",
    "diffHunk": "@@ -24,6 +24,18 @@ DESC EXTENDED desc_col_table key;\n \n DESC FORMATTED desc_col_table key;\n \n+SET spark.sql.statistics.histogram.enabled=true;\n+SET spark.sql.statistics.histogram.numBins=2;\n+\n+INSERT INTO desc_col_table values(1);\n+INSERT INTO desc_col_table values(2);\n+INSERT INTO desc_col_table values(3);\n+INSERT INTO desc_col_table values(4);\n+\n+ANALYZE TABLE desc_col_table COMPUTE STATISTICS FOR COLUMNS key;"
  }],
  "prId": 19774
}, {
  "comments": [{
    "author": {
      "login": "cloud-fan"
    },
    "body": "shall we move these to the end of this file?",
    "commit": "38ef638a333e7ba9e3ab91204f072244f4816b89",
    "createdAt": "2017-11-20T14:34:37Z",
    "diffHunk": "@@ -24,6 +24,19 @@ DESC EXTENDED desc_col_table key;\n \n DESC FORMATTED desc_col_table key;\n \n+-- Test output for histogram statistics\n+SET spark.sql.statistics.histogram.enabled=true;\n+SET spark.sql.statistics.histogram.numBins=2;\n+\n+INSERT INTO desc_col_table values 1, 2, 3, 4;\n+\n+ANALYZE TABLE desc_col_table COMPUTE STATISTICS FOR COLUMNS key;\n+\n+DESC EXTENDED desc_col_table key;",
    "line": 12
  }],
  "prId": 19774
}, {
  "comments": [{
    "author": {
      "login": "cloud-fan"
    },
    "body": "We don't need to reset the config, the test framework will reset the entire session after each test.",
    "commit": "38ef638a333e7ba9e3ab91204f072244f4816b89",
    "createdAt": "2017-11-21T14:41:19Z",
    "diffHunk": "@@ -34,6 +34,19 @@ DESC FORMATTED desc_complex_col_table col;\n -- Describe a nested column\n DESC FORMATTED desc_complex_col_table col.x;\n \n+-- Test output for histogram statistics\n+SET spark.sql.statistics.histogram.enabled=true;\n+SET spark.sql.statistics.histogram.numBins=2;\n+\n+INSERT INTO desc_col_table values 1, 2, 3, 4;\n+\n+ANALYZE TABLE desc_col_table COMPUTE STATISTICS FOR COLUMNS key;\n+\n+DESC EXTENDED desc_col_table key;\n+\n+SET spark.sql.statistics.histogram.enabled=false;\n+SET spark.sql.statistics.histogram.numBins=256;"
  }, {
    "author": {
      "login": "mgaido91"
    },
    "body": "isn't it better to reset them to prevent possible future tests eventually added after these lines to be influenced? If no, I can remove them.",
    "commit": "38ef638a333e7ba9e3ab91204f072244f4816b89",
    "createdAt": "2017-11-21T14:45:57Z",
    "diffHunk": "@@ -34,6 +34,19 @@ DESC FORMATTED desc_complex_col_table col;\n -- Describe a nested column\n DESC FORMATTED desc_complex_col_table col.x;\n \n+-- Test output for histogram statistics\n+SET spark.sql.statistics.histogram.enabled=true;\n+SET spark.sql.statistics.histogram.numBins=2;\n+\n+INSERT INTO desc_col_table values 1, 2, 3, 4;\n+\n+ANALYZE TABLE desc_col_table COMPUTE STATISTICS FOR COLUMNS key;\n+\n+DESC EXTENDED desc_col_table key;\n+\n+SET spark.sql.statistics.histogram.enabled=false;\n+SET spark.sql.statistics.histogram.numBins=256;"
  }, {
    "author": {
      "login": "cloud-fan"
    },
    "body": "You can also argue that this increase the maintenance cost as we need to change it if we change the default value of these configs. I think the general principle is, set the config if the following queries depend on it. At the end of test, there is no following queries and we don't need to do anything to the configs.",
    "commit": "38ef638a333e7ba9e3ab91204f072244f4816b89",
    "createdAt": "2017-11-21T14:57:41Z",
    "diffHunk": "@@ -34,6 +34,19 @@ DESC FORMATTED desc_complex_col_table col;\n -- Describe a nested column\n DESC FORMATTED desc_complex_col_table col.x;\n \n+-- Test output for histogram statistics\n+SET spark.sql.statistics.histogram.enabled=true;\n+SET spark.sql.statistics.histogram.numBins=2;\n+\n+INSERT INTO desc_col_table values 1, 2, 3, 4;\n+\n+ANALYZE TABLE desc_col_table COMPUTE STATISTICS FOR COLUMNS key;\n+\n+DESC EXTENDED desc_col_table key;\n+\n+SET spark.sql.statistics.histogram.enabled=false;\n+SET spark.sql.statistics.histogram.numBins=256;"
  }],
  "prId": 19774
}]