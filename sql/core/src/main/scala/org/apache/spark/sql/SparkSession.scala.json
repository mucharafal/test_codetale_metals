[{
  "comments": [{
    "author": {
      "login": "rxin"
    },
    "body": "do we need the isRootContext flag? \n",
    "commit": "89fac818e14d3b7a2fab6084139fc9ddac023136",
    "createdAt": "2016-05-25T23:39:12Z",
    "diffHunk": "@@ -103,7 +103,11 @@ class SparkSession private(\n    * A wrapped version of this session in the form of a [[SQLContext]], for backward compatibility.\n    */\n   @transient\n-  private[sql] val sqlContext: SQLContext = new SQLContext(this)\n+  private[sql] val sqlContext: SQLContext = existingSharedState match {\n+    // If we have an existing SharedState, we should not create a root SQLContext at here.\n+    case Some(sharedState) => new SQLContext(this, false)\n+    case None => new SQLContext(this, true)"
  }, {
    "author": {
      "login": "yhuai"
    },
    "body": "I am removing isRootContext flag.\n",
    "commit": "89fac818e14d3b7a2fab6084139fc9ddac023136",
    "createdAt": "2016-05-26T00:28:14Z",
    "diffHunk": "@@ -103,7 +103,11 @@ class SparkSession private(\n    * A wrapped version of this session in the form of a [[SQLContext]], for backward compatibility.\n    */\n   @transient\n-  private[sql] val sqlContext: SQLContext = new SQLContext(this)\n+  private[sql] val sqlContext: SQLContext = existingSharedState match {\n+    // If we have an existing SharedState, we should not create a root SQLContext at here.\n+    case Some(sharedState) => new SQLContext(this, false)\n+    case None => new SQLContext(this, true)"
  }],
  "prId": 13310
}]