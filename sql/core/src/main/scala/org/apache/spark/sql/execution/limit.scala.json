[{
  "comments": [{
    "author": {
      "login": "davies"
    },
    "body": "This removes a optimization, I don't think this is a good fix. Can we initialize it properly?",
    "commit": "64849e3901aa59404480f1e406fe03d43053c2fe",
    "createdAt": "2016-11-23T17:39:45Z",
    "diffHunk": "@@ -67,23 +67,14 @@ trait BaseLimitExec extends UnaryExecNode with CodegenSupport {\n   }\n \n   override def doConsume(ctx: CodegenContext, input: Seq[ExprCode], row: ExprCode): String = {\n-    val stopEarly = ctx.freshName(\"stopEarly\")\n-    ctx.addMutableState(\"boolean\", stopEarly, s\"$stopEarly = false;\")\n-\n-    ctx.addNewFunction(\"shouldStop\", s\"\"\"\n-      @Override\n-      protected boolean shouldStop() {\n-        return !currentRows.isEmpty() || $stopEarly;\n-      }\n-    \"\"\")\n     val countTerm = ctx.freshName(\"count\")\n     ctx.addMutableState(\"int\", countTerm, s\"$countTerm = 0;\")\n     s\"\"\"\n        | if ($countTerm < $limit) {\n        |   $countTerm += 1;\n        |   ${consume(ctx, input)}\n        | } else {\n-       |   $stopEarly = true;\n+       |   // Do nothing"
  }, {
    "author": {
      "login": "maropu"
    },
    "body": "yea, I thinks so... I'm currently looking for other approaches.",
    "commit": "64849e3901aa59404480f1e406fe03d43053c2fe",
    "createdAt": "2016-11-24T00:40:51Z",
    "diffHunk": "@@ -67,23 +67,14 @@ trait BaseLimitExec extends UnaryExecNode with CodegenSupport {\n   }\n \n   override def doConsume(ctx: CodegenContext, input: Seq[ExprCode], row: ExprCode): String = {\n-    val stopEarly = ctx.freshName(\"stopEarly\")\n-    ctx.addMutableState(\"boolean\", stopEarly, s\"$stopEarly = false;\")\n-\n-    ctx.addNewFunction(\"shouldStop\", s\"\"\"\n-      @Override\n-      protected boolean shouldStop() {\n-        return !currentRows.isEmpty() || $stopEarly;\n-      }\n-    \"\"\")\n     val countTerm = ctx.freshName(\"count\")\n     ctx.addMutableState(\"int\", countTerm, s\"$countTerm = 0;\")\n     s\"\"\"\n        | if ($countTerm < $limit) {\n        |   $countTerm += 1;\n        |   ${consume(ctx, input)}\n        | } else {\n-       |   $stopEarly = true;\n+       |   // Do nothing"
  }],
  "prId": 15980
}]