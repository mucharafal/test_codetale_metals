[{
  "comments": [{
    "author": {
      "login": "mgaido91"
    },
    "body": "why not `status.getPath.toString`?",
    "commit": "10106b3213da1abd205c993a40f4ce025234f3e1",
    "createdAt": "2017-10-02T13:19:22Z",
    "diffHunk": "@@ -233,7 +233,7 @@ class FileStreamSource(\n     }\n \n     val files = allFiles.sortBy(_.getModificationTime)(fileSortOrder).map { status =>\n-      (status.getPath.toUri.toString, status.getModificationTime)\n+      (status.getPath.toUri.getPath, status.getModificationTime)"
  }, {
    "author": {
      "login": "HyukjinKwon"
    },
    "body": "ping @xysun ^",
    "commit": "10106b3213da1abd205c993a40f4ce025234f3e1",
    "createdAt": "2018-01-05T14:48:32Z",
    "diffHunk": "@@ -233,7 +233,7 @@ class FileStreamSource(\n     }\n \n     val files = allFiles.sortBy(_.getModificationTime)(fileSortOrder).map { status =>\n-      (status.getPath.toUri.toString, status.getModificationTime)\n+      (status.getPath.toUri.getPath, status.getModificationTime)"
  }, {
    "author": {
      "login": "zsxwing"
    },
    "body": "The correct fix is fixing this line: https://github.com/xysun/spark/blob/4f5979a72ce9cb36a3327e79b8592b9e42bdf5af/sql/core/src/main/scala/org/apache/spark/sql/execution/streaming/FileStreamSource.scala#L168\r\n\r\nIt should be `files.map(new Path(new URI(_.path)).toString)`.",
    "commit": "10106b3213da1abd205c993a40f4ce025234f3e1",
    "createdAt": "2018-01-13T00:03:37Z",
    "diffHunk": "@@ -233,7 +233,7 @@ class FileStreamSource(\n     }\n \n     val files = allFiles.sortBy(_.getModificationTime)(fileSortOrder).map { status =>\n-      (status.getPath.toUri.toString, status.getModificationTime)\n+      (status.getPath.toUri.getPath, status.getModificationTime)"
  }, {
    "author": {
      "login": "zsxwing"
    },
    "body": "FYI, `getPath` will drop scheme and credentials.",
    "commit": "10106b3213da1abd205c993a40f4ce025234f3e1",
    "createdAt": "2018-01-13T00:17:10Z",
    "diffHunk": "@@ -233,7 +233,7 @@ class FileStreamSource(\n     }\n \n     val files = allFiles.sortBy(_.getModificationTime)(fileSortOrder).map { status =>\n-      (status.getPath.toUri.toString, status.getModificationTime)\n+      (status.getPath.toUri.getPath, status.getModificationTime)"
  }, {
    "author": {
      "login": "HyukjinKwon"
    },
    "body": "Wait .. @zsxwing do you mean `getPath` (`org.apache.hadoop.fs.Path`) from `org.apache.hadoop.fs.FileStatus` drops the scheme and credentials?\r\n\r\nHere seems `Seq[org.apache.hadoop.fs.FileStatus]` and the code you pointed out looks `Array[org.apache.spark.sql.execution.streaming.FileStreamSource.FileEntry]`.\r\n",
    "commit": "10106b3213da1abd205c993a40f4ce025234f3e1",
    "createdAt": "2018-01-14T04:28:15Z",
    "diffHunk": "@@ -233,7 +233,7 @@ class FileStreamSource(\n     }\n \n     val files = allFiles.sortBy(_.getModificationTime)(fileSortOrder).map { status =>\n-      (status.getPath.toUri.toString, status.getModificationTime)\n+      (status.getPath.toUri.getPath, status.getModificationTime)"
  }, {
    "author": {
      "login": "HyukjinKwon"
    },
    "body": "Ohaa, `getPath` from `java.net.URI` in the proposed fix drops them. Sure.",
    "commit": "10106b3213da1abd205c993a40f4ce025234f3e1",
    "createdAt": "2018-01-14T04:32:11Z",
    "diffHunk": "@@ -233,7 +233,7 @@ class FileStreamSource(\n     }\n \n     val files = allFiles.sortBy(_.getModificationTime)(fileSortOrder).map { status =>\n-      (status.getPath.toUri.toString, status.getModificationTime)\n+      (status.getPath.toUri.getPath, status.getModificationTime)"
  }, {
    "author": {
      "login": "xysun"
    },
    "body": "Thanks. I'll update the commit. ",
    "commit": "10106b3213da1abd205c993a40f4ce025234f3e1",
    "createdAt": "2018-01-15T04:43:34Z",
    "diffHunk": "@@ -233,7 +233,7 @@ class FileStreamSource(\n     }\n \n     val files = allFiles.sortBy(_.getModificationTime)(fileSortOrder).map { status =>\n-      (status.getPath.toUri.toString, status.getModificationTime)\n+      (status.getPath.toUri.getPath, status.getModificationTime)"
  }],
  "prId": 19247
}]