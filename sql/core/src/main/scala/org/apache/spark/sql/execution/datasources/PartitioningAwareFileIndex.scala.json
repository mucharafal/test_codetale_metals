[{
  "comments": [{
    "author": {
      "login": "cloud-fan"
    },
    "body": "why not we just make sure `parallelPartitionDiscoveryThreshold` is greater than 0? We can add a condition(via `checkValue`) in `SQLConf.PARALLEL_PARTITION_DISCOVERY_THRESHOLD`",
    "commit": "3c079ff0450247c38b5d984ffc1d67bd623ffa6f",
    "createdAt": "2017-02-28T19:25:41Z",
    "diffHunk": "@@ -300,7 +300,8 @@ object PartitioningAwareFileIndex extends Logging {\n       sparkSession: SparkSession): Seq[(Path, Seq[FileStatus])] = {\n \n     // Short-circuits parallel listing when serial listing is likely to be faster.\n-    if (paths.size < sparkSession.sessionState.conf.parallelPartitionDiscoveryThreshold) {",
    "line": 4
  }, {
    "author": {
      "login": "windpiger"
    },
    "body": "sorry, I didn't notice there is a `checkValue` func, let me fix it. thanks!",
    "commit": "3c079ff0450247c38b5d984ffc1d67bd623ffa6f",
    "createdAt": "2017-03-01T01:21:49Z",
    "diffHunk": "@@ -300,7 +300,8 @@ object PartitioningAwareFileIndex extends Logging {\n       sparkSession: SparkSession): Seq[(Path, Seq[FileStatus])] = {\n \n     // Short-circuits parallel listing when serial listing is likely to be faster.\n-    if (paths.size < sparkSession.sessionState.conf.parallelPartitionDiscoveryThreshold) {",
    "line": 4
  }],
  "prId": 17093
}, {
  "comments": [{
    "author": {
      "login": "windpiger"
    },
    "body": "add equal is more clear to understand the conf `parallelPartitionDiscoveryThreshold `",
    "commit": "3c079ff0450247c38b5d984ffc1d67bd623ffa6f",
    "createdAt": "2017-03-01T01:28:38Z",
    "diffHunk": "@@ -300,7 +300,7 @@ object PartitioningAwareFileIndex extends Logging {\n       sparkSession: SparkSession): Seq[(Path, Seq[FileStatus])] = {\n \n     // Short-circuits parallel listing when serial listing is likely to be faster.\n-    if (paths.size < sparkSession.sessionState.conf.parallelPartitionDiscoveryThreshold) {\n+    if (paths.size <= sparkSession.sessionState.conf.parallelPartitionDiscoveryThreshold) {",
    "line": 5
  }],
  "prId": 17093
}]