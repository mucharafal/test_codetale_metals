[{
  "comments": [{
    "author": {
      "login": "cloud-fan"
    },
    "body": "Do we have test for `refreshTable`/RefreshTable command before? \n",
    "commit": "20d50556c6a3a4ca2d69f961822a2bb058edbbec",
    "createdAt": "2016-05-18T05:24:09Z",
    "diffHunk": "@@ -99,4 +105,41 @@ class HiveContextCompatibilitySuite extends SparkFunSuite with BeforeAndAfterEac\n     assert(databases3.toSeq == Seq(\"default\"))\n   }\n \n+  test(\"check change after refresh\") {"
  }, {
    "author": {
      "login": "gatorsmile"
    },
    "body": "The test cases modified by this PR are used to verify `refreshTable` APIs. (in `MultiDatabaseSuite.scala` and `MetastoreDataSourcesSuite.scala`) We also have test cases to verify the corresponding SQL interface, which is calling RefreshTable Command. For example, \nhttps://github.com/apache/spark/blob/d8a83a564ff3fd0281007adbf8aa3757da8a2c2b/sql/hive/src/test/scala/org/apache/spark/sql/hive/CachedTableSuite.scala#L164-L207\n\nNow, to test the pure `HiveContext`, the only way we can do is to add a test case in `sql/hivecontext-compatibility`. \n\nNot sure if this can answer your question. Let me know if you have any concern\n",
    "commit": "20d50556c6a3a4ca2d69f961822a2bb058edbbec",
    "createdAt": "2016-05-18T05:40:41Z",
    "diffHunk": "@@ -99,4 +105,41 @@ class HiveContextCompatibilitySuite extends SparkFunSuite with BeforeAndAfterEac\n     assert(databases3.toSeq == Seq(\"default\"))\n   }\n \n+  test(\"check change after refresh\") {"
  }, {
    "author": {
      "login": "cloud-fan"
    },
    "body": "They share the same implementation and I think we don't need to test all of them.  cc @yhuai \n",
    "commit": "20d50556c6a3a4ca2d69f961822a2bb058edbbec",
    "createdAt": "2016-05-18T09:53:20Z",
    "diffHunk": "@@ -99,4 +105,41 @@ class HiveContextCompatibilitySuite extends SparkFunSuite with BeforeAndAfterEac\n     assert(databases3.toSeq == Seq(\"default\"))\n   }\n \n+  test(\"check change after refresh\") {"
  }, {
    "author": {
      "login": "gatorsmile"
    },
    "body": "I see. `refreshTable` API is in `HiveContext`. I think we can just do a dummy call to verify if the API still exists but does not check the functionalities. Does that sound good to you? @cloud-fan @yhuai \n",
    "commit": "20d50556c6a3a4ca2d69f961822a2bb058edbbec",
    "createdAt": "2016-05-18T15:01:18Z",
    "diffHunk": "@@ -99,4 +105,41 @@ class HiveContextCompatibilitySuite extends SparkFunSuite with BeforeAndAfterEac\n     assert(databases3.toSeq == Seq(\"default\"))\n   }\n \n+  test(\"check change after refresh\") {"
  }, {
    "author": {
      "login": "yhuai"
    },
    "body": "Looks like `RefreshTable` command is actually doing more work. I think we need to make `RefreshTable` and `sparkSession.catalog.refreshTable` have the same behavior. Can you make that change?\n",
    "commit": "20d50556c6a3a4ca2d69f961822a2bb058edbbec",
    "createdAt": "2016-05-18T15:38:22Z",
    "diffHunk": "@@ -99,4 +105,41 @@ class HiveContextCompatibilitySuite extends SparkFunSuite with BeforeAndAfterEac\n     assert(databases3.toSeq == Seq(\"default\"))\n   }\n \n+  test(\"check change after refresh\") {"
  }, {
    "author": {
      "login": "gatorsmile"
    },
    "body": "Sure, will do it soon. Then, the new behavior will be different from what Spark 1.6 behaves. However, I think we should keep two interfaces (SQL and API) consistent. \n",
    "commit": "20d50556c6a3a4ca2d69f961822a2bb058edbbec",
    "createdAt": "2016-05-18T16:06:36Z",
    "diffHunk": "@@ -99,4 +105,41 @@ class HiveContextCompatibilitySuite extends SparkFunSuite with BeforeAndAfterEac\n     assert(databases3.toSeq == Seq(\"default\"))\n   }\n \n+  test(\"check change after refresh\") {"
  }, {
    "author": {
      "login": "gatorsmile"
    },
    "body": "Done. Please review the latest code changes. Thanks!\n",
    "commit": "20d50556c6a3a4ca2d69f961822a2bb058edbbec",
    "createdAt": "2016-05-18T18:40:46Z",
    "diffHunk": "@@ -99,4 +105,41 @@ class HiveContextCompatibilitySuite extends SparkFunSuite with BeforeAndAfterEac\n     assert(databases3.toSeq == Seq(\"default\"))\n   }\n \n+  test(\"check change after refresh\") {"
  }],
  "prId": 13156
}, {
  "comments": [{
    "author": {
      "login": "cloud-fan"
    },
    "body": "Do we still need this test?\n",
    "commit": "20d50556c6a3a4ca2d69f961822a2bb058edbbec",
    "createdAt": "2016-05-19T00:57:25Z",
    "diffHunk": "@@ -99,4 +105,41 @@ class HiveContextCompatibilitySuite extends SparkFunSuite with BeforeAndAfterEac\n     assert(databases3.toSeq == Seq(\"default\"))\n   }\n \n+  test(\"check change after refresh\") {\n+    val _hc = hc\n+    import _hc.implicits._\n+\n+    withTempPath { tempDir =>"
  }, {
    "author": {
      "login": "gatorsmile"
    },
    "body": "Sure, let me remove it. : )\n",
    "commit": "20d50556c6a3a4ca2d69f961822a2bb058edbbec",
    "createdAt": "2016-05-19T01:00:16Z",
    "diffHunk": "@@ -99,4 +105,41 @@ class HiveContextCompatibilitySuite extends SparkFunSuite with BeforeAndAfterEac\n     assert(databases3.toSeq == Seq(\"default\"))\n   }\n \n+  test(\"check change after refresh\") {\n+    val _hc = hc\n+    import _hc.implicits._\n+\n+    withTempPath { tempDir =>"
  }],
  "prId": 13156
}]