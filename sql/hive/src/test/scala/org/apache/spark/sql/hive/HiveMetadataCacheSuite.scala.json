[{
  "comments": [{
    "author": {
      "login": "jiangxb1987"
    },
    "body": "We didn't cover the persistent view case for refresh, that's why the bug happens...",
    "commit": "d677c779488dc989bca2f1e3aefb94152227ddf9",
    "createdAt": "2017-10-03T04:41:45Z",
    "diffHunk": "@@ -31,14 +31,22 @@ import org.apache.spark.sql.test.SQLTestUtils\n class HiveMetadataCacheSuite extends QueryTest with SQLTestUtils with TestHiveSingleton {\n \n   test(\"SPARK-16337 temporary view refresh\") {\n-    withTempView(\"view_refresh\") {\n+    checkRefreshView(isTemp = true)\n+  }\n+\n+  test(\"view refresh\") {",
    "line": 8
  }, {
    "author": {
      "login": "gatorsmile"
    },
    "body": "Yes. We need to ask contributors for adding more test cases when reviewing the PR. ",
    "commit": "d677c779488dc989bca2f1e3aefb94152227ddf9",
    "createdAt": "2017-10-03T16:20:55Z",
    "diffHunk": "@@ -31,14 +31,22 @@ import org.apache.spark.sql.test.SQLTestUtils\n class HiveMetadataCacheSuite extends QueryTest with SQLTestUtils with TestHiveSingleton {\n \n   test(\"SPARK-16337 temporary view refresh\") {\n-    withTempView(\"view_refresh\") {\n+    checkRefreshView(isTemp = true)\n+  }\n+\n+  test(\"view refresh\") {",
    "line": 8
  }],
  "prId": 19405
}]