[{
  "comments": [{
    "author": {
      "login": "yhuai"
    },
    "body": "Is spark a dependency of hive 1.1 or 1.2?\n",
    "commit": "3e2e67b5d8277b9e52b8a1f2e0268fe2c4044540",
    "createdAt": "2015-06-27T22:23:29Z",
    "diffHunk": "@@ -32,13 +32,36 @@ package object client {\n     // Hive 0.14 depends on calcite 0.9.2-incubating-SNAPSHOT which does not exist in\n     // maven central anymore, so override those with a version that exists.\n     //\n-    // org.pentaho:pentaho-aggdesigner-algorithm is also nowhere to be found, so exclude\n-    // it explicitly. If it's needed by the metastore client, users will have to dig it\n-    // out of somewhere and use configuration to point Spark at the correct jars.\n+    // The other excluded dependencies are also nowhere to be found, so exclude them explicitly. If\n+    // they're needed by the metastore client, users will have to dig them out of somewhere and use\n+    // configuration to point Spark at the correct jars.\n     case object v14 extends HiveVersion(\"0.14.0\",\n-      Seq(\"org.apache.calcite:calcite-core:1.3.0-incubating\",\n+      extraDeps = Seq(\"org.apache.calcite:calcite-core:1.3.0-incubating\",\n         \"org.apache.calcite:calcite-avatica:1.3.0-incubating\"),\n-      Seq(\"org.pentaho:pentaho-aggdesigner-algorithm\"))\n+      exclusions = Seq(\"org.pentaho:pentaho-aggdesigner-algorithm\"))\n+\n+    case object v1_0 extends HiveVersion(\"1.0.0\",\n+      exclusions = Seq(\"eigenbase:eigenbase-properties\",\n+        \"org.pentaho:pentaho-aggdesigner-algorithm\",\n+        \"net.hydromatic:linq4j\",\n+        \"net.hydromatic:quidem\"))\n+\n+    // The curator dependency was added to the exclusions here because it seems to confuse the ivy\n+    // library. org.apache.curator:curator is a pom dependency but ivy tries to find the jar for it,\n+    // and fails.\n+    case object v1_1 extends HiveVersion(\"1.1.0\",\n+      exclusions = Seq(\"eigenbase:eigenbase-properties\",\n+        \"org.apache.curator:*\",\n+        \"org.pentaho:pentaho-aggdesigner-algorithm\",\n+        \"net.hydromatic:linq4j\",\n+        \"net.hydromatic:quidem\"))\n+\n+    case object v1_2 extends HiveVersion(\"1.2.0\",\n+      exclusions = Seq(\"eigenbase:eigenbase-properties\",\n+        \"org.apache.curator:*\",\n+        \"org.pentaho:pentaho-aggdesigner-algorithm\",\n+        \"net.hydromatic:linq4j\",\n+        \"net.hydromatic:quidem\"))",
    "line": 38
  }, {
    "author": {
      "login": "vanzin"
    },
    "body": "I think 1.1. Do you mean so that we add an exclusion to avoid Spark being downloaded here?\n",
    "commit": "3e2e67b5d8277b9e52b8a1f2e0268fe2c4044540",
    "createdAt": "2015-06-29T17:02:31Z",
    "diffHunk": "@@ -32,13 +32,36 @@ package object client {\n     // Hive 0.14 depends on calcite 0.9.2-incubating-SNAPSHOT which does not exist in\n     // maven central anymore, so override those with a version that exists.\n     //\n-    // org.pentaho:pentaho-aggdesigner-algorithm is also nowhere to be found, so exclude\n-    // it explicitly. If it's needed by the metastore client, users will have to dig it\n-    // out of somewhere and use configuration to point Spark at the correct jars.\n+    // The other excluded dependencies are also nowhere to be found, so exclude them explicitly. If\n+    // they're needed by the metastore client, users will have to dig them out of somewhere and use\n+    // configuration to point Spark at the correct jars.\n     case object v14 extends HiveVersion(\"0.14.0\",\n-      Seq(\"org.apache.calcite:calcite-core:1.3.0-incubating\",\n+      extraDeps = Seq(\"org.apache.calcite:calcite-core:1.3.0-incubating\",\n         \"org.apache.calcite:calcite-avatica:1.3.0-incubating\"),\n-      Seq(\"org.pentaho:pentaho-aggdesigner-algorithm\"))\n+      exclusions = Seq(\"org.pentaho:pentaho-aggdesigner-algorithm\"))\n+\n+    case object v1_0 extends HiveVersion(\"1.0.0\",\n+      exclusions = Seq(\"eigenbase:eigenbase-properties\",\n+        \"org.pentaho:pentaho-aggdesigner-algorithm\",\n+        \"net.hydromatic:linq4j\",\n+        \"net.hydromatic:quidem\"))\n+\n+    // The curator dependency was added to the exclusions here because it seems to confuse the ivy\n+    // library. org.apache.curator:curator is a pom dependency but ivy tries to find the jar for it,\n+    // and fails.\n+    case object v1_1 extends HiveVersion(\"1.1.0\",\n+      exclusions = Seq(\"eigenbase:eigenbase-properties\",\n+        \"org.apache.curator:*\",\n+        \"org.pentaho:pentaho-aggdesigner-algorithm\",\n+        \"net.hydromatic:linq4j\",\n+        \"net.hydromatic:quidem\"))\n+\n+    case object v1_2 extends HiveVersion(\"1.2.0\",\n+      exclusions = Seq(\"eigenbase:eigenbase-properties\",\n+        \"org.apache.curator:*\",\n+        \"org.pentaho:pentaho-aggdesigner-algorithm\",\n+        \"net.hydromatic:linq4j\",\n+        \"net.hydromatic:quidem\"))",
    "line": 38
  }, {
    "author": {
      "login": "yhuai"
    },
    "body": "Yes, I am wondering if we need an exclusion for Spark. \n",
    "commit": "3e2e67b5d8277b9e52b8a1f2e0268fe2c4044540",
    "createdAt": "2015-06-29T17:12:43Z",
    "diffHunk": "@@ -32,13 +32,36 @@ package object client {\n     // Hive 0.14 depends on calcite 0.9.2-incubating-SNAPSHOT which does not exist in\n     // maven central anymore, so override those with a version that exists.\n     //\n-    // org.pentaho:pentaho-aggdesigner-algorithm is also nowhere to be found, so exclude\n-    // it explicitly. If it's needed by the metastore client, users will have to dig it\n-    // out of somewhere and use configuration to point Spark at the correct jars.\n+    // The other excluded dependencies are also nowhere to be found, so exclude them explicitly. If\n+    // they're needed by the metastore client, users will have to dig them out of somewhere and use\n+    // configuration to point Spark at the correct jars.\n     case object v14 extends HiveVersion(\"0.14.0\",\n-      Seq(\"org.apache.calcite:calcite-core:1.3.0-incubating\",\n+      extraDeps = Seq(\"org.apache.calcite:calcite-core:1.3.0-incubating\",\n         \"org.apache.calcite:calcite-avatica:1.3.0-incubating\"),\n-      Seq(\"org.pentaho:pentaho-aggdesigner-algorithm\"))\n+      exclusions = Seq(\"org.pentaho:pentaho-aggdesigner-algorithm\"))\n+\n+    case object v1_0 extends HiveVersion(\"1.0.0\",\n+      exclusions = Seq(\"eigenbase:eigenbase-properties\",\n+        \"org.pentaho:pentaho-aggdesigner-algorithm\",\n+        \"net.hydromatic:linq4j\",\n+        \"net.hydromatic:quidem\"))\n+\n+    // The curator dependency was added to the exclusions here because it seems to confuse the ivy\n+    // library. org.apache.curator:curator is a pom dependency but ivy tries to find the jar for it,\n+    // and fails.\n+    case object v1_1 extends HiveVersion(\"1.1.0\",\n+      exclusions = Seq(\"eigenbase:eigenbase-properties\",\n+        \"org.apache.curator:*\",\n+        \"org.pentaho:pentaho-aggdesigner-algorithm\",\n+        \"net.hydromatic:linq4j\",\n+        \"net.hydromatic:quidem\"))\n+\n+    case object v1_2 extends HiveVersion(\"1.2.0\",\n+      exclusions = Seq(\"eigenbase:eigenbase-properties\",\n+        \"org.apache.curator:*\",\n+        \"org.pentaho:pentaho-aggdesigner-algorithm\",\n+        \"net.hydromatic:linq4j\",\n+        \"net.hydromatic:quidem\"))",
    "line": 38
  }, {
    "author": {
      "login": "vanzin"
    },
    "body": "We don't need it, in the sense that the tests work, but it can avoid downloading more unneeded things, so let me add those.\n",
    "commit": "3e2e67b5d8277b9e52b8a1f2e0268fe2c4044540",
    "createdAt": "2015-06-29T17:14:15Z",
    "diffHunk": "@@ -32,13 +32,36 @@ package object client {\n     // Hive 0.14 depends on calcite 0.9.2-incubating-SNAPSHOT which does not exist in\n     // maven central anymore, so override those with a version that exists.\n     //\n-    // org.pentaho:pentaho-aggdesigner-algorithm is also nowhere to be found, so exclude\n-    // it explicitly. If it's needed by the metastore client, users will have to dig it\n-    // out of somewhere and use configuration to point Spark at the correct jars.\n+    // The other excluded dependencies are also nowhere to be found, so exclude them explicitly. If\n+    // they're needed by the metastore client, users will have to dig them out of somewhere and use\n+    // configuration to point Spark at the correct jars.\n     case object v14 extends HiveVersion(\"0.14.0\",\n-      Seq(\"org.apache.calcite:calcite-core:1.3.0-incubating\",\n+      extraDeps = Seq(\"org.apache.calcite:calcite-core:1.3.0-incubating\",\n         \"org.apache.calcite:calcite-avatica:1.3.0-incubating\"),\n-      Seq(\"org.pentaho:pentaho-aggdesigner-algorithm\"))\n+      exclusions = Seq(\"org.pentaho:pentaho-aggdesigner-algorithm\"))\n+\n+    case object v1_0 extends HiveVersion(\"1.0.0\",\n+      exclusions = Seq(\"eigenbase:eigenbase-properties\",\n+        \"org.pentaho:pentaho-aggdesigner-algorithm\",\n+        \"net.hydromatic:linq4j\",\n+        \"net.hydromatic:quidem\"))\n+\n+    // The curator dependency was added to the exclusions here because it seems to confuse the ivy\n+    // library. org.apache.curator:curator is a pom dependency but ivy tries to find the jar for it,\n+    // and fails.\n+    case object v1_1 extends HiveVersion(\"1.1.0\",\n+      exclusions = Seq(\"eigenbase:eigenbase-properties\",\n+        \"org.apache.curator:*\",\n+        \"org.pentaho:pentaho-aggdesigner-algorithm\",\n+        \"net.hydromatic:linq4j\",\n+        \"net.hydromatic:quidem\"))\n+\n+    case object v1_2 extends HiveVersion(\"1.2.0\",\n+      exclusions = Seq(\"eigenbase:eigenbase-properties\",\n+        \"org.apache.curator:*\",\n+        \"org.pentaho:pentaho-aggdesigner-algorithm\",\n+        \"net.hydromatic:linq4j\",\n+        \"net.hydromatic:quidem\"))",
    "line": 38
  }, {
    "author": {
      "login": "vanzin"
    },
    "body": "Actually, `hive-exec` shades all its dependencies, so there's nothing to exclude...\n",
    "commit": "3e2e67b5d8277b9e52b8a1f2e0268fe2c4044540",
    "createdAt": "2015-06-29T17:24:34Z",
    "diffHunk": "@@ -32,13 +32,36 @@ package object client {\n     // Hive 0.14 depends on calcite 0.9.2-incubating-SNAPSHOT which does not exist in\n     // maven central anymore, so override those with a version that exists.\n     //\n-    // org.pentaho:pentaho-aggdesigner-algorithm is also nowhere to be found, so exclude\n-    // it explicitly. If it's needed by the metastore client, users will have to dig it\n-    // out of somewhere and use configuration to point Spark at the correct jars.\n+    // The other excluded dependencies are also nowhere to be found, so exclude them explicitly. If\n+    // they're needed by the metastore client, users will have to dig them out of somewhere and use\n+    // configuration to point Spark at the correct jars.\n     case object v14 extends HiveVersion(\"0.14.0\",\n-      Seq(\"org.apache.calcite:calcite-core:1.3.0-incubating\",\n+      extraDeps = Seq(\"org.apache.calcite:calcite-core:1.3.0-incubating\",\n         \"org.apache.calcite:calcite-avatica:1.3.0-incubating\"),\n-      Seq(\"org.pentaho:pentaho-aggdesigner-algorithm\"))\n+      exclusions = Seq(\"org.pentaho:pentaho-aggdesigner-algorithm\"))\n+\n+    case object v1_0 extends HiveVersion(\"1.0.0\",\n+      exclusions = Seq(\"eigenbase:eigenbase-properties\",\n+        \"org.pentaho:pentaho-aggdesigner-algorithm\",\n+        \"net.hydromatic:linq4j\",\n+        \"net.hydromatic:quidem\"))\n+\n+    // The curator dependency was added to the exclusions here because it seems to confuse the ivy\n+    // library. org.apache.curator:curator is a pom dependency but ivy tries to find the jar for it,\n+    // and fails.\n+    case object v1_1 extends HiveVersion(\"1.1.0\",\n+      exclusions = Seq(\"eigenbase:eigenbase-properties\",\n+        \"org.apache.curator:*\",\n+        \"org.pentaho:pentaho-aggdesigner-algorithm\",\n+        \"net.hydromatic:linq4j\",\n+        \"net.hydromatic:quidem\"))\n+\n+    case object v1_2 extends HiveVersion(\"1.2.0\",\n+      exclusions = Seq(\"eigenbase:eigenbase-properties\",\n+        \"org.apache.curator:*\",\n+        \"org.pentaho:pentaho-aggdesigner-algorithm\",\n+        \"net.hydromatic:linq4j\",\n+        \"net.hydromatic:quidem\"))",
    "line": 38
  }, {
    "author": {
      "login": "yhuai"
    },
    "body": "I see. Thank you for looking at it :)\n",
    "commit": "3e2e67b5d8277b9e52b8a1f2e0268fe2c4044540",
    "createdAt": "2015-06-29T17:35:49Z",
    "diffHunk": "@@ -32,13 +32,36 @@ package object client {\n     // Hive 0.14 depends on calcite 0.9.2-incubating-SNAPSHOT which does not exist in\n     // maven central anymore, so override those with a version that exists.\n     //\n-    // org.pentaho:pentaho-aggdesigner-algorithm is also nowhere to be found, so exclude\n-    // it explicitly. If it's needed by the metastore client, users will have to dig it\n-    // out of somewhere and use configuration to point Spark at the correct jars.\n+    // The other excluded dependencies are also nowhere to be found, so exclude them explicitly. If\n+    // they're needed by the metastore client, users will have to dig them out of somewhere and use\n+    // configuration to point Spark at the correct jars.\n     case object v14 extends HiveVersion(\"0.14.0\",\n-      Seq(\"org.apache.calcite:calcite-core:1.3.0-incubating\",\n+      extraDeps = Seq(\"org.apache.calcite:calcite-core:1.3.0-incubating\",\n         \"org.apache.calcite:calcite-avatica:1.3.0-incubating\"),\n-      Seq(\"org.pentaho:pentaho-aggdesigner-algorithm\"))\n+      exclusions = Seq(\"org.pentaho:pentaho-aggdesigner-algorithm\"))\n+\n+    case object v1_0 extends HiveVersion(\"1.0.0\",\n+      exclusions = Seq(\"eigenbase:eigenbase-properties\",\n+        \"org.pentaho:pentaho-aggdesigner-algorithm\",\n+        \"net.hydromatic:linq4j\",\n+        \"net.hydromatic:quidem\"))\n+\n+    // The curator dependency was added to the exclusions here because it seems to confuse the ivy\n+    // library. org.apache.curator:curator is a pom dependency but ivy tries to find the jar for it,\n+    // and fails.\n+    case object v1_1 extends HiveVersion(\"1.1.0\",\n+      exclusions = Seq(\"eigenbase:eigenbase-properties\",\n+        \"org.apache.curator:*\",\n+        \"org.pentaho:pentaho-aggdesigner-algorithm\",\n+        \"net.hydromatic:linq4j\",\n+        \"net.hydromatic:quidem\"))\n+\n+    case object v1_2 extends HiveVersion(\"1.2.0\",\n+      exclusions = Seq(\"eigenbase:eigenbase-properties\",\n+        \"org.apache.curator:*\",\n+        \"org.pentaho:pentaho-aggdesigner-algorithm\",\n+        \"net.hydromatic:linq4j\",\n+        \"net.hydromatic:quidem\"))",
    "line": 38
  }],
  "prId": 7026
}]