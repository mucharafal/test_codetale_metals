[{
  "comments": [{
    "author": {
      "login": "rxin"
    },
    "body": "Does this actually work in the distributed mode?\n",
    "commit": "a81218ccf207f23f4bbfc719cce702ae10eb8b65",
    "createdAt": "2015-03-26T07:07:32Z",
    "diffHunk": "@@ -0,0 +1,18 @@\n+package org.apache.spark.sql.hive\n+\n+import org.apache.hadoop.hive.ql.udf.generic.UDFCurrentDB\n+import org.apache.hadoop.hive.ql.exec.Description\n+import org.apache.hadoop.hive.ql.udf.generic.GenericUDF.DeferredObject\n+import org.apache.hadoop.hive.ql.session.SessionState\n+\n+// deterministic in the query range\n+@Description(name = \"current_database\",\n+    value = \"_FUNC_() - returns currently using database name\")\n+class sqlUDFCurrentDB extends UDFCurrentDB {\n+\n+  // This function just throws an exception in hive0.13\n+  override def evaluate(arguments: Array[DeferredObject]): Object = {\n+    SessionState.get().getCurrentDatabase()",
    "line": 15
  }],
  "prId": 4995
}]