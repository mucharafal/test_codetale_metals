[{
  "comments": [{
    "author": {
      "login": "rxin"
    },
    "body": "should we just create a new thread to run this? seems wrong to use a global shared thread pool\n",
    "commit": "5ec1dd2c9cb74d4c7263fb31780893b3518e6958",
    "createdAt": "2015-04-23T08:34:19Z",
    "diffHunk": "@@ -145,20 +147,27 @@ case class ScriptTransformation(\n       val dataOutputStream = new DataOutputStream(outputStream)\n       val outputProjection = new InterpretedProjection(input, child.output)\n \n-      iter\n-        .map(outputProjection)\n-        .foreach { row =>\n+      // Put the write(output to the pipeline) into a single thread\n+      // and keep the collector as remain in the main thread.\n+      // otherwise it will causes deadlock if the data size greater than\n+      // the pipeline / buffer capacity.\n+      future {"
  }, {
    "author": {
      "login": "chenghao-intel"
    },
    "body": "Thank you @rxin, I think you are right, updated!\n",
    "commit": "5ec1dd2c9cb74d4c7263fb31780893b3518e6958",
    "createdAt": "2015-04-23T15:04:06Z",
    "diffHunk": "@@ -145,20 +147,27 @@ case class ScriptTransformation(\n       val dataOutputStream = new DataOutputStream(outputStream)\n       val outputProjection = new InterpretedProjection(input, child.output)\n \n-      iter\n-        .map(outputProjection)\n-        .foreach { row =>\n+      // Put the write(output to the pipeline) into a single thread\n+      // and keep the collector as remain in the main thread.\n+      // otherwise it will causes deadlock if the data size greater than\n+      // the pipeline / buffer capacity.\n+      future {"
  }],
  "prId": 5625
}]