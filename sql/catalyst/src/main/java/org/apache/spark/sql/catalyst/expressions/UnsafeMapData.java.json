[{
  "comments": [{
    "author": {
      "login": "cloud-fan"
    },
    "body": "we should also update the class doc of `UnsafeMapData` to reflect this change\n",
    "commit": "2ef6e3bdbd16c7f7b9ff006d48382e108ed37eef",
    "createdAt": "2016-09-20T08:40:00Z",
    "diffHunk": "@@ -65,14 +65,15 @@ public UnsafeMapData() {\n    * @param sizeInBytes the size of this map's backing data, in bytes\n    */\n   public void pointTo(Object baseObject, long baseOffset, int sizeInBytes) {\n-    // Read the numBytes of key array from the first 4 bytes.\n-    final int keyArraySize = Platform.getInt(baseObject, baseOffset);\n-    final int valueArraySize = sizeInBytes - keyArraySize - 4;\n+    // Read the numBytes of key array from the first 8 bytes.",
    "line": 16
  }],
  "prId": 13680
}, {
  "comments": [{
    "author": {
      "login": "cloud-fan"
    },
    "body": "check the `keyArraySize` first, then we can just write\n`final int valueArraySize = sizeInBytes - (int) keyArraySize - 8;`\n",
    "commit": "2ef6e3bdbd16c7f7b9ff006d48382e108ed37eef",
    "createdAt": "2016-09-20T08:41:48Z",
    "diffHunk": "@@ -65,14 +65,15 @@ public UnsafeMapData() {\n    * @param sizeInBytes the size of this map's backing data, in bytes\n    */\n   public void pointTo(Object baseObject, long baseOffset, int sizeInBytes) {\n-    // Read the numBytes of key array from the first 4 bytes.\n-    final int keyArraySize = Platform.getInt(baseObject, baseOffset);\n-    final int valueArraySize = sizeInBytes - keyArraySize - 4;\n+    // Read the numBytes of key array from the first 8 bytes.\n+    final long keyArraySize = Platform.getLong(baseObject, baseOffset);\n+    final long valueArraySize = sizeInBytes - keyArraySize - 8;"
  }],
  "prId": 13680
}, {
  "comments": [{
    "author": {
      "login": "cloud-fan"
    },
    "body": "we can declare it as int directly.\n",
    "commit": "2ef6e3bdbd16c7f7b9ff006d48382e108ed37eef",
    "createdAt": "2016-09-20T13:50:08Z",
    "diffHunk": "@@ -67,9 +67,9 @@ public UnsafeMapData() {\n   public void pointTo(Object baseObject, long baseOffset, int sizeInBytes) {\n     // Read the numBytes of key array from the first 8 bytes.\n     final long keyArraySize = Platform.getLong(baseObject, baseOffset);\n-    final long valueArraySize = sizeInBytes - keyArraySize - 8;\n     assert keyArraySize >= 0 : \"keyArraySize (\" + keyArraySize + \") should >= 0\";\n     assert keyArraySize <= Integer.MAX_VALUE : \"keyArraySize (\" + keyArraySize + \") should <= Integer.MAX_VALUE\";\n+    final long valueArraySize = sizeInBytes - (int)keyArraySize - 8;"
  }],
  "prId": 13680
}]