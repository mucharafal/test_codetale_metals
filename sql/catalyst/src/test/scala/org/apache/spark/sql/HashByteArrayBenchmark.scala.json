[{
  "comments": [{
    "author": {
      "login": "hvanhovell"
    },
    "body": "This look to good to be true :).... I think the JVM is eliminating dead code. We should do something with the sum variable, and see what happens in that case.\n",
    "commit": "238dbb80ead789229dd4022a320addedef648757",
    "createdAt": "2016-09-28T16:04:47Z",
    "diffHunk": "@@ -59,90 +59,110 @@ object HashByteArrayBenchmark {\n       }\n     }\n \n+    benchmark.addCase(\"HiveHasher\") { _: Int =>\n+      for (_ <- 0L until iters) {\n+        var sum = 0L\n+        var i = 0\n+        while (i < numArrays) {\n+          sum += HiveHasher.hashUnsafeBytes(arrays(i), Platform.BYTE_ARRAY_OFFSET, length)\n+          i += 1\n+        }\n+      }\n+    }\n+\n     benchmark.run()\n   }\n \n   def main(args: Array[String]): Unit = {\n     /*\n-    Intel(R) Core(TM) i7-4750HQ CPU @ 2.00GHz\n-    Hash byte arrays with length 8:     Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n-    -------------------------------------------------------------------------------------------\n-    Murmur3_x86_32                             11 /   12        185.1           5.4       1.0X\n-    xxHash 64-bit                              17 /   18        120.0           8.3       0.6X\n+    Intel(R) Core(TM) i7-4558U CPU @ 2.80GHz\n+    Hash byte arrays with length 8:          Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+    ------------------------------------------------------------------------------------------------\n+    Murmur3_x86_32                                  11 /   12        198.9           5.0       1.0X\n+    xxHash 64-bit                                   16 /   19        130.1           7.7       0.7X\n+    HiveHasher                                       0 /    0     282254.6           0.0    1419.0X"
  }, {
    "author": {
      "login": "tejasapatil"
    },
    "body": "@hvanhovell : Thanks for pointing this out. At first I printed the `sum` but that had lot of noise on console so moved `sum` out of the loop (both showed similar results).\n",
    "commit": "238dbb80ead789229dd4022a320addedef648757",
    "createdAt": "2016-09-28T20:54:40Z",
    "diffHunk": "@@ -59,90 +59,110 @@ object HashByteArrayBenchmark {\n       }\n     }\n \n+    benchmark.addCase(\"HiveHasher\") { _: Int =>\n+      for (_ <- 0L until iters) {\n+        var sum = 0L\n+        var i = 0\n+        while (i < numArrays) {\n+          sum += HiveHasher.hashUnsafeBytes(arrays(i), Platform.BYTE_ARRAY_OFFSET, length)\n+          i += 1\n+        }\n+      }\n+    }\n+\n     benchmark.run()\n   }\n \n   def main(args: Array[String]): Unit = {\n     /*\n-    Intel(R) Core(TM) i7-4750HQ CPU @ 2.00GHz\n-    Hash byte arrays with length 8:     Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n-    -------------------------------------------------------------------------------------------\n-    Murmur3_x86_32                             11 /   12        185.1           5.4       1.0X\n-    xxHash 64-bit                              17 /   18        120.0           8.3       0.6X\n+    Intel(R) Core(TM) i7-4558U CPU @ 2.80GHz\n+    Hash byte arrays with length 8:          Best/Avg Time(ms)    Rate(M/s)   Per Row(ns)   Relative\n+    ------------------------------------------------------------------------------------------------\n+    Murmur3_x86_32                                  11 /   12        198.9           5.0       1.0X\n+    xxHash 64-bit                                   16 /   19        130.1           7.7       0.7X\n+    HiveHasher                                       0 /    0     282254.6           0.0    1419.0X"
  }],
  "prId": 15047
}]