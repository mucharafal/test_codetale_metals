[{
  "comments": [{
    "author": {
      "login": "cloud-fan"
    },
    "body": "wow this simple UDF will trigger the code splitting logic in `reduceCodeSize`?",
    "commit": "f188d55083c20f85583929c04bf916ef494b744a",
    "createdAt": "2017-12-06T12:20:29Z",
    "diffHunk": "@@ -47,4 +48,10 @@ class ScalaUDFSuite extends SparkFunSuite with ExpressionEvalHelper {\n     assert(e2.getMessage.contains(\"Failed to execute user defined function\"))\n   }\n \n+  test(\"SPARK-22695: ScalaUDF should not use global variables\") {\n+    val ctx = new CodegenContext\n+    ScalaUDF((s: String) => s + \"x\", StringType, Literal(\"a\") :: Nil).genCode(ctx)\n+    // we have one variable (globalIsNull) introduced by reduceCodeSize"
  }, {
    "author": {
      "login": "mgaido91"
    },
    "body": "yes",
    "commit": "f188d55083c20f85583929c04bf916ef494b744a",
    "createdAt": "2017-12-06T12:23:49Z",
    "diffHunk": "@@ -47,4 +48,10 @@ class ScalaUDFSuite extends SparkFunSuite with ExpressionEvalHelper {\n     assert(e2.getMessage.contains(\"Failed to execute user defined function\"))\n   }\n \n+  test(\"SPARK-22695: ScalaUDF should not use global variables\") {\n+    val ctx = new CodegenContext\n+    ScalaUDF((s: String) => s + \"x\", StringType, Literal(\"a\") :: Nil).genCode(ctx)\n+    // we have one variable (globalIsNull) introduced by reduceCodeSize"
  }],
  "prId": 19900
}]