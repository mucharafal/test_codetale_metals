[{
  "comments": [{
    "author": {
      "login": "dongjoon-hyun"
    },
    "body": "Is `VectorAssembler` with zero input column useful?",
    "commit": "69ff3cb28744f4d50a6629708d7ebd0feea3de95",
    "createdAt": "2018-09-10T03:44:34Z",
    "diffHunk": "@@ -256,4 +256,9 @@ class VectorAssemblerSuite\n     assert(runWithMetadata(\"keep\", additional_filter = \"id1 > 2\").count() == 4)\n   }\n \n+  test(\"SPARK-25371: VectorAssembler with empty inputCols\") {\n+    val vectorAssembler = new VectorAssembler().setInputCols(Array()).setOutputCol(\"a\")",
    "line": 5
  }, {
    "author": {
      "login": "dongjoon-hyun"
    },
    "body": "cc @yanboliang and @srowen ",
    "commit": "69ff3cb28744f4d50a6629708d7ebd0feea3de95",
    "createdAt": "2018-09-10T03:45:03Z",
    "diffHunk": "@@ -256,4 +256,9 @@ class VectorAssemblerSuite\n     assert(runWithMetadata(\"keep\", additional_filter = \"id1 > 2\").count() == 4)\n   }\n \n+  test(\"SPARK-25371: VectorAssembler with empty inputCols\") {\n+    val vectorAssembler = new VectorAssembler().setInputCols(Array()).setOutputCol(\"a\")",
    "line": 5
  }, {
    "author": {
      "login": "srowen"
    },
    "body": "It doesn't sound that useful, but the JIRA suggests this is the behavior in 2.2. It throws a weird error in 2.3. I could imagine just allowing this behavior, or throwing a better exception. Is there a use case for no input? maybe you have some reusable pipeline that is applied to a subset of columns and sometimes it matches nothing. The output is empty but maybe that doesn't matter for whatever purpose it serves... maybe it's assembled with something else afterwards. I could picture a valid use case.",
    "commit": "69ff3cb28744f4d50a6629708d7ebd0feea3de95",
    "createdAt": "2018-09-10T04:04:21Z",
    "diffHunk": "@@ -256,4 +256,9 @@ class VectorAssemblerSuite\n     assert(runWithMetadata(\"keep\", additional_filter = \"id1 > 2\").count() == 4)\n   }\n \n+  test(\"SPARK-25371: VectorAssembler with empty inputCols\") {\n+    val vectorAssembler = new VectorAssembler().setInputCols(Array()).setOutputCol(\"a\")",
    "line": 5
  }],
  "prId": 22373
}, {
  "comments": [{
    "author": {
      "login": "cloud-fan"
    },
    "body": "Do we still need this test?",
    "commit": "69ff3cb28744f4d50a6629708d7ebd0feea3de95",
    "createdAt": "2018-09-10T13:35:16Z",
    "diffHunk": "@@ -256,4 +256,9 @@ class VectorAssemblerSuite\n     assert(runWithMetadata(\"keep\", additional_filter = \"id1 > 2\").count() == 4)\n   }\n \n+  test(\"SPARK-25371: VectorAssembler with empty inputCols\") {",
    "line": 4
  }, {
    "author": {
      "login": "mgaido91"
    },
    "body": "I think so, after this patch this test passes, before it doesn't. I think it is helpful to avoid regressions like this in the future.",
    "commit": "69ff3cb28744f4d50a6629708d7ebd0feea3de95",
    "createdAt": "2018-09-10T13:44:15Z",
    "diffHunk": "@@ -256,4 +256,9 @@ class VectorAssemblerSuite\n     assert(runWithMetadata(\"keep\", additional_filter = \"id1 > 2\").count() == 4)\n   }\n \n+  test(\"SPARK-25371: VectorAssembler with empty inputCols\") {",
    "line": 4
  }],
  "prId": 22373
}]