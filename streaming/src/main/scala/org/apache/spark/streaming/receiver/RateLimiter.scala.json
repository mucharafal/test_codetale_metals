[{
  "comments": [{
    "author": {
      "login": "tdas"
    },
    "body": "Why was this changed?\n",
    "commit": "f168c9476fc7104d3d3f92702793e0d9116117d0",
    "createdAt": "2015-07-23T04:22:21Z",
    "diffHunk": "@@ -34,12 +34,32 @@ import org.apache.spark.{Logging, SparkConf}\n   */\n private[receiver] abstract class RateLimiter(conf: SparkConf) extends Logging {\n \n-  private val desiredRate = conf.getInt(\"spark.streaming.receiver.maxRate\", 0)\n-  private lazy val rateLimiter = GuavaRateLimiter.create(desiredRate)\n+  // treated as an upper limit\n+  private val maxRateLimit = conf.getLong(\"spark.streaming.receiver.maxRate\", Long.MaxValue)\n+  private lazy val rateLimiter = GuavaRateLimiter.create(maxRateLimit.toDouble)\n \n   def waitToPush() {\n-    if (desiredRate > 0) {\n-      rateLimiter.acquire()\n-    }\n+    rateLimiter.acquire()"
  }, {
    "author": {
      "login": "tdas"
    },
    "body": "Aah, these should not show up in the diff, because the master already has these. Could you update your branch by merging the master?\n",
    "commit": "f168c9476fc7104d3d3f92702793e0d9116117d0",
    "createdAt": "2015-07-23T04:24:31Z",
    "diffHunk": "@@ -34,12 +34,32 @@ import org.apache.spark.{Logging, SparkConf}\n   */\n private[receiver] abstract class RateLimiter(conf: SparkConf) extends Logging {\n \n-  private val desiredRate = conf.getInt(\"spark.streaming.receiver.maxRate\", 0)\n-  private lazy val rateLimiter = GuavaRateLimiter.create(desiredRate)\n+  // treated as an upper limit\n+  private val maxRateLimit = conf.getLong(\"spark.streaming.receiver.maxRate\", Long.MaxValue)\n+  private lazy val rateLimiter = GuavaRateLimiter.create(maxRateLimit.toDouble)\n \n   def waitToPush() {\n-    if (desiredRate > 0) {\n-      rateLimiter.acquire()\n-    }\n+    rateLimiter.acquire()"
  }],
  "prId": 7600
}]