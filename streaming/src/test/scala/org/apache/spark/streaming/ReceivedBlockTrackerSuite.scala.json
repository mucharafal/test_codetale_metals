[{
  "comments": [{
    "author": {
      "login": "gaborgsomogyi"
    },
    "body": "I would add assertions here as well. If it's not throwing exception doesn't mean the same blocks deserialized.",
    "commit": "9cd6fb57b631316cd098dcba3337490d9582070c",
    "createdAt": "2019-02-01T11:20:11Z",
    "diffHunk": "@@ -96,6 +96,13 @@ class ReceivedBlockTrackerSuite\n     receivedBlockTracker.getUnallocatedBlocks(streamId) shouldEqual blockInfos\n   }\n \n+  test(\"block addition, and block to batch allocation with many blocks\") {\n+    val receivedBlockTracker = createTracker(setCheckpointDir = true)\n+    val blockInfos = generateBlockInfos(100000)\n+    blockInfos.map(receivedBlockTracker.addBlock)\n+    receivedBlockTracker.allocateBlocksToBatch(1)",
    "line": 10
  }, {
    "author": {
      "login": "rlodge"
    },
    "body": "sure",
    "commit": "9cd6fb57b631316cd098dcba3337490d9582070c",
    "createdAt": "2019-02-04T17:24:22Z",
    "diffHunk": "@@ -96,6 +96,13 @@ class ReceivedBlockTrackerSuite\n     receivedBlockTracker.getUnallocatedBlocks(streamId) shouldEqual blockInfos\n   }\n \n+  test(\"block addition, and block to batch allocation with many blocks\") {\n+    val receivedBlockTracker = createTracker(setCheckpointDir = true)\n+    val blockInfos = generateBlockInfos(100000)\n+    blockInfos.map(receivedBlockTracker.addBlock)\n+    receivedBlockTracker.allocateBlocksToBatch(1)",
    "line": 10
  }],
  "prId": 23716
}, {
  "comments": [{
    "author": {
      "login": "gaborgsomogyi"
    },
    "body": "`setCheckpointDir` is already `true`.",
    "commit": "9cd6fb57b631316cd098dcba3337490d9582070c",
    "createdAt": "2019-02-01T11:33:24Z",
    "diffHunk": "@@ -96,6 +96,13 @@ class ReceivedBlockTrackerSuite\n     receivedBlockTracker.getUnallocatedBlocks(streamId) shouldEqual blockInfos\n   }\n \n+  test(\"block addition, and block to batch allocation with many blocks\") {\n+    val receivedBlockTracker = createTracker(setCheckpointDir = true)"
  }, {
    "author": {
      "login": "rlodge"
    },
    "body": "ok",
    "commit": "9cd6fb57b631316cd098dcba3337490d9582070c",
    "createdAt": "2019-02-04T17:24:26Z",
    "diffHunk": "@@ -96,6 +96,13 @@ class ReceivedBlockTrackerSuite\n     receivedBlockTracker.getUnallocatedBlocks(streamId) shouldEqual blockInfos\n   }\n \n+  test(\"block addition, and block to batch allocation with many blocks\") {\n+    val receivedBlockTracker = createTracker(setCheckpointDir = true)"
  }],
  "prId": 23716
}, {
  "comments": [{
    "author": {
      "login": "gaborgsomogyi"
    },
    "body": "Would be good to close the tracker. I know not all tests does this (which is a bug) but it would be good to make it clean here.",
    "commit": "9cd6fb57b631316cd098dcba3337490d9582070c",
    "createdAt": "2019-02-05T08:25:41Z",
    "diffHunk": "@@ -96,6 +96,25 @@ class ReceivedBlockTrackerSuite\n     receivedBlockTracker.getUnallocatedBlocks(streamId) shouldEqual blockInfos\n   }\n \n+  test(\"block addition, and block to batch allocation with many blocks\") {\n+    val receivedBlockTracker = createTracker()\n+    receivedBlockTracker.isWriteAheadLogEnabled should be (true)",
    "line": 6
  }, {
    "author": {
      "login": "rlodge"
    },
    "body": "Sure, done.",
    "commit": "9cd6fb57b631316cd098dcba3337490d9582070c",
    "createdAt": "2019-02-05T19:46:30Z",
    "diffHunk": "@@ -96,6 +96,25 @@ class ReceivedBlockTrackerSuite\n     receivedBlockTracker.getUnallocatedBlocks(streamId) shouldEqual blockInfos\n   }\n \n+  test(\"block addition, and block to batch allocation with many blocks\") {\n+    val receivedBlockTracker = createTracker()\n+    receivedBlockTracker.isWriteAheadLogEnabled should be (true)",
    "line": 6
  }],
  "prId": 23716
}]