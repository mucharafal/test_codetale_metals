[{
  "comments": [{
    "author": {
      "login": "jaceklaskowski"
    },
    "body": "Isn't the line too long? \n",
    "commit": "09f3197e7cac9a45315bf5bdaed57c97bcd0e46d",
    "createdAt": "2016-08-14T18:42:05Z",
    "diffHunk": "@@ -0,0 +1,167 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+  ~ Licensed to the Apache Software Foundation (ASF) under one or more\n+  ~ contributor license agreements.  See the NOTICE file distributed with\n+  ~ this work for additional information regarding copyright ownership.\n+  ~ The ASF licenses this file to You under the Apache License, Version 2.0\n+  ~ (the \"License\"); you may not use this file except in compliance with\n+  ~ the License.  You may obtain a copy of the License at\n+  ~\n+  ~    http://www.apache.org/licenses/LICENSE-2.0\n+  ~\n+  ~ Unless required by applicable law or agreed to in writing, software\n+  ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n+  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+  ~ See the License for the specific language governing permissions and\n+  ~ limitations under the License.\n+  -->\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">",
    "line": 18
  }, {
    "author": {
      "login": "mgummelt"
    },
    "body": "I don't think line length rules apply to XML.  See the other poms for examples.\n",
    "commit": "09f3197e7cac9a45315bf5bdaed57c97bcd0e46d",
    "createdAt": "2016-08-19T23:07:32Z",
    "diffHunk": "@@ -0,0 +1,167 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+  ~ Licensed to the Apache Software Foundation (ASF) under one or more\n+  ~ contributor license agreements.  See the NOTICE file distributed with\n+  ~ this work for additional information regarding copyright ownership.\n+  ~ The ASF licenses this file to You under the Apache License, Version 2.0\n+  ~ (the \"License\"); you may not use this file except in compliance with\n+  ~ the License.  You may obtain a copy of the License at\n+  ~\n+  ~    http://www.apache.org/licenses/LICENSE-2.0\n+  ~\n+  ~ Unless required by applicable law or agreed to in writing, software\n+  ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n+  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+  ~ See the License for the specific language governing permissions and\n+  ~ limitations under the License.\n+  -->\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">",
    "line": 18
  }],
  "prId": 14637
}, {
  "comments": [{
    "author": {
      "login": "jaceklaskowski"
    },
    "body": "Why do we need that commented-out section?\n",
    "commit": "09f3197e7cac9a45315bf5bdaed57c97bcd0e46d",
    "createdAt": "2016-08-14T18:43:27Z",
    "diffHunk": "@@ -0,0 +1,167 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+  ~ Licensed to the Apache Software Foundation (ASF) under one or more\n+  ~ contributor license agreements.  See the NOTICE file distributed with\n+  ~ this work for additional information regarding copyright ownership.\n+  ~ The ASF licenses this file to You under the Apache License, Version 2.0\n+  ~ (the \"License\"); you may not use this file except in compliance with\n+  ~ the License.  You may obtain a copy of the License at\n+  ~\n+  ~    http://www.apache.org/licenses/LICENSE-2.0\n+  ~\n+  ~ Unless required by applicable law or agreed to in writing, software\n+  ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n+  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+  ~ See the License for the specific language governing permissions and\n+  ~ limitations under the License.\n+  -->\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <modelVersion>4.0.0</modelVersion>\n+  <parent>\n+    <groupId>org.apache.spark</groupId>\n+    <artifactId>spark-parent_2.11</artifactId>\n+    <version>2.1.0-SNAPSHOT</version>\n+    <relativePath>../pom.xml</relativePath>\n+  </parent>\n+\n+  <artifactId>spark-mesos_2.11</artifactId>\n+  <packaging>jar</packaging>\n+  <name>Spark Project Mesos</name>\n+  <properties>\n+    <sbt.project.name>mesos</sbt.project.name>\n+    <mesos.version>1.0.0</mesos.version>\n+    <mesos.classifier>shaded-protobuf</mesos.classifier>\n+  </properties>\n+\n+  <dependencies>\n+    <dependency>\n+      <groupId>org.apache.spark</groupId>\n+      <artifactId>spark-core_${scala.binary.version}</artifactId>\n+      <version>${project.version}</version>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.apache.spark</groupId>\n+      <artifactId>spark-core_${scala.binary.version}</artifactId>\n+      <version>${project.version}</version>\n+      <type>test-jar</type>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.apache.mesos</groupId>\n+      <artifactId>mesos</artifactId>\n+      <version>${mesos.version}</version>\n+      <classifier>${mesos.classifier}</classifier>\n+      <exclusions>\n+        <exclusion>\n+          <groupId>com.google.protobuf</groupId>\n+          <artifactId>protobuf-java</artifactId>\n+        </exclusion>\n+      </exclusions>\n+    </dependency>\n+\n+\n+    <!-- Explicit listing of transitive deps that are shaded. Otherwise, odd compiler crashes."
  }, {
    "author": {
      "login": "mgummelt"
    },
    "body": "This is a WIP.  Please wait to comment.\n",
    "commit": "09f3197e7cac9a45315bf5bdaed57c97bcd0e46d",
    "createdAt": "2016-08-14T18:49:28Z",
    "diffHunk": "@@ -0,0 +1,167 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+  ~ Licensed to the Apache Software Foundation (ASF) under one or more\n+  ~ contributor license agreements.  See the NOTICE file distributed with\n+  ~ this work for additional information regarding copyright ownership.\n+  ~ The ASF licenses this file to You under the Apache License, Version 2.0\n+  ~ (the \"License\"); you may not use this file except in compliance with\n+  ~ the License.  You may obtain a copy of the License at\n+  ~\n+  ~    http://www.apache.org/licenses/LICENSE-2.0\n+  ~\n+  ~ Unless required by applicable law or agreed to in writing, software\n+  ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n+  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+  ~ See the License for the specific language governing permissions and\n+  ~ limitations under the License.\n+  -->\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <modelVersion>4.0.0</modelVersion>\n+  <parent>\n+    <groupId>org.apache.spark</groupId>\n+    <artifactId>spark-parent_2.11</artifactId>\n+    <version>2.1.0-SNAPSHOT</version>\n+    <relativePath>../pom.xml</relativePath>\n+  </parent>\n+\n+  <artifactId>spark-mesos_2.11</artifactId>\n+  <packaging>jar</packaging>\n+  <name>Spark Project Mesos</name>\n+  <properties>\n+    <sbt.project.name>mesos</sbt.project.name>\n+    <mesos.version>1.0.0</mesos.version>\n+    <mesos.classifier>shaded-protobuf</mesos.classifier>\n+  </properties>\n+\n+  <dependencies>\n+    <dependency>\n+      <groupId>org.apache.spark</groupId>\n+      <artifactId>spark-core_${scala.binary.version}</artifactId>\n+      <version>${project.version}</version>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.apache.spark</groupId>\n+      <artifactId>spark-core_${scala.binary.version}</artifactId>\n+      <version>${project.version}</version>\n+      <type>test-jar</type>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.apache.mesos</groupId>\n+      <artifactId>mesos</artifactId>\n+      <version>${mesos.version}</version>\n+      <classifier>${mesos.classifier}</classifier>\n+      <exclusions>\n+        <exclusion>\n+          <groupId>com.google.protobuf</groupId>\n+          <artifactId>protobuf-java</artifactId>\n+        </exclusion>\n+      </exclusions>\n+    </dependency>\n+\n+\n+    <!-- Explicit listing of transitive deps that are shaded. Otherwise, odd compiler crashes."
  }],
  "prId": 14637
}, {
  "comments": [{
    "author": {
      "login": "jaceklaskowski"
    },
    "body": "And that one too?\n",
    "commit": "09f3197e7cac9a45315bf5bdaed57c97bcd0e46d",
    "createdAt": "2016-08-14T18:43:40Z",
    "diffHunk": "@@ -0,0 +1,167 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+  ~ Licensed to the Apache Software Foundation (ASF) under one or more\n+  ~ contributor license agreements.  See the NOTICE file distributed with\n+  ~ this work for additional information regarding copyright ownership.\n+  ~ The ASF licenses this file to You under the Apache License, Version 2.0\n+  ~ (the \"License\"); you may not use this file except in compliance with\n+  ~ the License.  You may obtain a copy of the License at\n+  ~\n+  ~    http://www.apache.org/licenses/LICENSE-2.0\n+  ~\n+  ~ Unless required by applicable law or agreed to in writing, software\n+  ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n+  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+  ~ See the License for the specific language governing permissions and\n+  ~ limitations under the License.\n+  -->\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <modelVersion>4.0.0</modelVersion>\n+  <parent>\n+    <groupId>org.apache.spark</groupId>\n+    <artifactId>spark-parent_2.11</artifactId>\n+    <version>2.1.0-SNAPSHOT</version>\n+    <relativePath>../pom.xml</relativePath>\n+  </parent>\n+\n+  <artifactId>spark-mesos_2.11</artifactId>\n+  <packaging>jar</packaging>\n+  <name>Spark Project Mesos</name>\n+  <properties>\n+    <sbt.project.name>mesos</sbt.project.name>\n+    <mesos.version>1.0.0</mesos.version>\n+    <mesos.classifier>shaded-protobuf</mesos.classifier>\n+  </properties>\n+\n+  <dependencies>\n+    <dependency>\n+      <groupId>org.apache.spark</groupId>\n+      <artifactId>spark-core_${scala.binary.version}</artifactId>\n+      <version>${project.version}</version>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.apache.spark</groupId>\n+      <artifactId>spark-core_${scala.binary.version}</artifactId>\n+      <version>${project.version}</version>\n+      <type>test-jar</type>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.apache.mesos</groupId>\n+      <artifactId>mesos</artifactId>\n+      <version>${mesos.version}</version>\n+      <classifier>${mesos.classifier}</classifier>\n+      <exclusions>\n+        <exclusion>\n+          <groupId>com.google.protobuf</groupId>\n+          <artifactId>protobuf-java</artifactId>\n+        </exclusion>\n+      </exclusions>\n+    </dependency>\n+\n+\n+    <!-- Explicit listing of transitive deps that are shaded. Otherwise, odd compiler crashes.\n+    <dependency>\n+      <groupId>com.google.guava</groupId>\n+      <artifactId>guava</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.eclipse.jetty</groupId>\n+      <artifactId>jetty-server</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.eclipse.jetty</groupId>\n+      <artifactId>jetty-plus</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.eclipse.jetty</groupId>\n+      <artifactId>jetty-util</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.eclipse.jetty</groupId>\n+      <artifactId>jetty-http</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.eclipse.jetty</groupId>\n+      <artifactId>jetty-servlet</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.eclipse.jetty</groupId>\n+      <artifactId>jetty-servlets</artifactId>\n+    </dependency>\n+    End of shaded deps. -->\n+\n+    <dependency>\n+      <groupId>org.mockito</groupId>\n+      <artifactId>mockito-core</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <!--"
  }],
  "prId": 14637
}, {
  "comments": [{
    "author": {
      "login": "srowen"
    },
    "body": "I don't know that you need these dependencies -- literally don't know either way by looking. These are definitely needed? I was wondering whether jetty was relevant.\n",
    "commit": "09f3197e7cac9a45315bf5bdaed57c97bcd0e46d",
    "createdAt": "2016-08-20T10:25:49Z",
    "diffHunk": "@@ -0,0 +1,109 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+  ~ Licensed to the Apache Software Foundation (ASF) under one or more\n+  ~ contributor license agreements.  See the NOTICE file distributed with\n+  ~ this work for additional information regarding copyright ownership.\n+  ~ The ASF licenses this file to You under the Apache License, Version 2.0\n+  ~ (the \"License\"); you may not use this file except in compliance with\n+  ~ the License.  You may obtain a copy of the License at\n+  ~\n+  ~    http://www.apache.org/licenses/LICENSE-2.0\n+  ~\n+  ~ Unless required by applicable law or agreed to in writing, software\n+  ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n+  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+  ~ See the License for the specific language governing permissions and\n+  ~ limitations under the License.\n+  -->\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <modelVersion>4.0.0</modelVersion>\n+  <parent>\n+    <groupId>org.apache.spark</groupId>\n+    <artifactId>spark-parent_2.11</artifactId>\n+    <version>2.1.0-SNAPSHOT</version>\n+    <relativePath>../pom.xml</relativePath>\n+  </parent>\n+\n+  <artifactId>spark-mesos_2.11</artifactId>\n+  <packaging>jar</packaging>\n+  <name>Spark Project Mesos</name>\n+  <properties>\n+    <sbt.project.name>mesos</sbt.project.name>\n+    <mesos.version>1.0.0</mesos.version>\n+    <mesos.classifier>shaded-protobuf</mesos.classifier>\n+  </properties>\n+\n+  <dependencies>\n+    <dependency>\n+      <groupId>org.apache.spark</groupId>\n+      <artifactId>spark-core_${scala.binary.version}</artifactId>\n+      <version>${project.version}</version>\n+    </dependency>\n+\n+    <dependency>\n+      <groupId>org.apache.spark</groupId>\n+      <artifactId>spark-core_${scala.binary.version}</artifactId>\n+      <version>${project.version}</version>\n+      <type>test-jar</type>\n+      <scope>test</scope>\n+    </dependency>\n+\n+    <dependency>\n+      <groupId>org.apache.mesos</groupId>\n+      <artifactId>mesos</artifactId>\n+      <version>${mesos.version}</version>\n+      <classifier>${mesos.classifier}</classifier>\n+      <exclusions>\n+        <exclusion>\n+          <groupId>com.google.protobuf</groupId>\n+          <artifactId>protobuf-java</artifactId>\n+        </exclusion>\n+      </exclusions>\n+    </dependency>\n+\n+    <dependency>",
    "line": 64
  }, {
    "author": {
      "login": "mgummelt"
    },
    "body": "I just now removed mockito, because it was already a dependency of the parent project.\n\nI'm pretty sure all of the shaded deps need to be listed.  I don't know why they're shaded in the first place, but since they are, they must be listed here to avoid classloading errors at runtime.\n",
    "commit": "09f3197e7cac9a45315bf5bdaed57c97bcd0e46d",
    "createdAt": "2016-08-23T18:38:30Z",
    "diffHunk": "@@ -0,0 +1,109 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+  ~ Licensed to the Apache Software Foundation (ASF) under one or more\n+  ~ contributor license agreements.  See the NOTICE file distributed with\n+  ~ this work for additional information regarding copyright ownership.\n+  ~ The ASF licenses this file to You under the Apache License, Version 2.0\n+  ~ (the \"License\"); you may not use this file except in compliance with\n+  ~ the License.  You may obtain a copy of the License at\n+  ~\n+  ~    http://www.apache.org/licenses/LICENSE-2.0\n+  ~\n+  ~ Unless required by applicable law or agreed to in writing, software\n+  ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n+  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+  ~ See the License for the specific language governing permissions and\n+  ~ limitations under the License.\n+  -->\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <modelVersion>4.0.0</modelVersion>\n+  <parent>\n+    <groupId>org.apache.spark</groupId>\n+    <artifactId>spark-parent_2.11</artifactId>\n+    <version>2.1.0-SNAPSHOT</version>\n+    <relativePath>../pom.xml</relativePath>\n+  </parent>\n+\n+  <artifactId>spark-mesos_2.11</artifactId>\n+  <packaging>jar</packaging>\n+  <name>Spark Project Mesos</name>\n+  <properties>\n+    <sbt.project.name>mesos</sbt.project.name>\n+    <mesos.version>1.0.0</mesos.version>\n+    <mesos.classifier>shaded-protobuf</mesos.classifier>\n+  </properties>\n+\n+  <dependencies>\n+    <dependency>\n+      <groupId>org.apache.spark</groupId>\n+      <artifactId>spark-core_${scala.binary.version}</artifactId>\n+      <version>${project.version}</version>\n+    </dependency>\n+\n+    <dependency>\n+      <groupId>org.apache.spark</groupId>\n+      <artifactId>spark-core_${scala.binary.version}</artifactId>\n+      <version>${project.version}</version>\n+      <type>test-jar</type>\n+      <scope>test</scope>\n+    </dependency>\n+\n+    <dependency>\n+      <groupId>org.apache.mesos</groupId>\n+      <artifactId>mesos</artifactId>\n+      <version>${mesos.version}</version>\n+      <classifier>${mesos.classifier}</classifier>\n+      <exclusions>\n+        <exclusion>\n+          <groupId>com.google.protobuf</groupId>\n+          <artifactId>protobuf-java</artifactId>\n+        </exclusion>\n+      </exclusions>\n+    </dependency>\n+\n+    <dependency>",
    "line": 64
  }, {
    "author": {
      "login": "vanzin"
    },
    "body": "You shouldn't need to touch the shaded dependencies (see how no other module does that). If you're running into problems, you're probably missing something else, so post the error so we can take a look.\n",
    "commit": "09f3197e7cac9a45315bf5bdaed57c97bcd0e46d",
    "createdAt": "2016-08-23T18:45:13Z",
    "diffHunk": "@@ -0,0 +1,109 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+  ~ Licensed to the Apache Software Foundation (ASF) under one or more\n+  ~ contributor license agreements.  See the NOTICE file distributed with\n+  ~ this work for additional information regarding copyright ownership.\n+  ~ The ASF licenses this file to You under the Apache License, Version 2.0\n+  ~ (the \"License\"); you may not use this file except in compliance with\n+  ~ the License.  You may obtain a copy of the License at\n+  ~\n+  ~    http://www.apache.org/licenses/LICENSE-2.0\n+  ~\n+  ~ Unless required by applicable law or agreed to in writing, software\n+  ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n+  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+  ~ See the License for the specific language governing permissions and\n+  ~ limitations under the License.\n+  -->\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <modelVersion>4.0.0</modelVersion>\n+  <parent>\n+    <groupId>org.apache.spark</groupId>\n+    <artifactId>spark-parent_2.11</artifactId>\n+    <version>2.1.0-SNAPSHOT</version>\n+    <relativePath>../pom.xml</relativePath>\n+  </parent>\n+\n+  <artifactId>spark-mesos_2.11</artifactId>\n+  <packaging>jar</packaging>\n+  <name>Spark Project Mesos</name>\n+  <properties>\n+    <sbt.project.name>mesos</sbt.project.name>\n+    <mesos.version>1.0.0</mesos.version>\n+    <mesos.classifier>shaded-protobuf</mesos.classifier>\n+  </properties>\n+\n+  <dependencies>\n+    <dependency>\n+      <groupId>org.apache.spark</groupId>\n+      <artifactId>spark-core_${scala.binary.version}</artifactId>\n+      <version>${project.version}</version>\n+    </dependency>\n+\n+    <dependency>\n+      <groupId>org.apache.spark</groupId>\n+      <artifactId>spark-core_${scala.binary.version}</artifactId>\n+      <version>${project.version}</version>\n+      <type>test-jar</type>\n+      <scope>test</scope>\n+    </dependency>\n+\n+    <dependency>\n+      <groupId>org.apache.mesos</groupId>\n+      <artifactId>mesos</artifactId>\n+      <version>${mesos.version}</version>\n+      <classifier>${mesos.classifier}</classifier>\n+      <exclusions>\n+        <exclusion>\n+          <groupId>com.google.protobuf</groupId>\n+          <artifactId>protobuf-java</artifactId>\n+        </exclusion>\n+      </exclusions>\n+    </dependency>\n+\n+    <dependency>",
    "line": 64
  }, {
    "author": {
      "login": "mgummelt"
    },
    "body": "YARN does it: https://github.com/apache/spark/blob/master/yarn/pom.xml#L79\n\nwhich is what I was using as a starting point.  I initially did try to remove them, but got a ClassNotFoundException in WebUI.class when trying to import org.eclipse.jetty.<something>.  I can try to repro and get more info if you need.\n\nThe parent project seems to rename org.eclipse.jetty to org.spark_project.jetty https://github.com/apache/spark/blob/master/pom.xml#L2273\n\nIt's documented that the shaded deps should be put into compile scope in the module: https://github.com/apache/spark/blob/master/pom.xml#L315\n\nThough I still don't understand a) why they're shaded in the first place, and b) how those classes are loaded when spark is built without a module that promotes those dependencies to compile scope.\n",
    "commit": "09f3197e7cac9a45315bf5bdaed57c97bcd0e46d",
    "createdAt": "2016-08-23T19:00:02Z",
    "diffHunk": "@@ -0,0 +1,109 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+  ~ Licensed to the Apache Software Foundation (ASF) under one or more\n+  ~ contributor license agreements.  See the NOTICE file distributed with\n+  ~ this work for additional information regarding copyright ownership.\n+  ~ The ASF licenses this file to You under the Apache License, Version 2.0\n+  ~ (the \"License\"); you may not use this file except in compliance with\n+  ~ the License.  You may obtain a copy of the License at\n+  ~\n+  ~    http://www.apache.org/licenses/LICENSE-2.0\n+  ~\n+  ~ Unless required by applicable law or agreed to in writing, software\n+  ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n+  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+  ~ See the License for the specific language governing permissions and\n+  ~ limitations under the License.\n+  -->\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <modelVersion>4.0.0</modelVersion>\n+  <parent>\n+    <groupId>org.apache.spark</groupId>\n+    <artifactId>spark-parent_2.11</artifactId>\n+    <version>2.1.0-SNAPSHOT</version>\n+    <relativePath>../pom.xml</relativePath>\n+  </parent>\n+\n+  <artifactId>spark-mesos_2.11</artifactId>\n+  <packaging>jar</packaging>\n+  <name>Spark Project Mesos</name>\n+  <properties>\n+    <sbt.project.name>mesos</sbt.project.name>\n+    <mesos.version>1.0.0</mesos.version>\n+    <mesos.classifier>shaded-protobuf</mesos.classifier>\n+  </properties>\n+\n+  <dependencies>\n+    <dependency>\n+      <groupId>org.apache.spark</groupId>\n+      <artifactId>spark-core_${scala.binary.version}</artifactId>\n+      <version>${project.version}</version>\n+    </dependency>\n+\n+    <dependency>\n+      <groupId>org.apache.spark</groupId>\n+      <artifactId>spark-core_${scala.binary.version}</artifactId>\n+      <version>${project.version}</version>\n+      <type>test-jar</type>\n+      <scope>test</scope>\n+    </dependency>\n+\n+    <dependency>\n+      <groupId>org.apache.mesos</groupId>\n+      <artifactId>mesos</artifactId>\n+      <version>${mesos.version}</version>\n+      <classifier>${mesos.classifier}</classifier>\n+      <exclusions>\n+        <exclusion>\n+          <groupId>com.google.protobuf</groupId>\n+          <artifactId>protobuf-java</artifactId>\n+        </exclusion>\n+      </exclusions>\n+    </dependency>\n+\n+    <dependency>",
    "line": 64
  }, {
    "author": {
      "login": "vanzin"
    },
    "body": "They're shaded because people want to use different versions of guava and jetty.\n\nSpark doesn't need to promote them to compile scope because the relocated guava / jetty classes are packaged with Spark itself.\n\nI see what they problem you're running into is now. It has nothing to do with compile scope, you just need to explicit list the dependencies because the mesos code references them directly. So you actually just need to fix the comment since you're not promoting anything to compile scope by explicitly adding the dependencies (they still inherit the scope from the parent pom, which is \"provided\", and is actually what you want here).\n",
    "commit": "09f3197e7cac9a45315bf5bdaed57c97bcd0e46d",
    "createdAt": "2016-08-23T19:04:33Z",
    "diffHunk": "@@ -0,0 +1,109 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+  ~ Licensed to the Apache Software Foundation (ASF) under one or more\n+  ~ contributor license agreements.  See the NOTICE file distributed with\n+  ~ this work for additional information regarding copyright ownership.\n+  ~ The ASF licenses this file to You under the Apache License, Version 2.0\n+  ~ (the \"License\"); you may not use this file except in compliance with\n+  ~ the License.  You may obtain a copy of the License at\n+  ~\n+  ~    http://www.apache.org/licenses/LICENSE-2.0\n+  ~\n+  ~ Unless required by applicable law or agreed to in writing, software\n+  ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n+  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+  ~ See the License for the specific language governing permissions and\n+  ~ limitations under the License.\n+  -->\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <modelVersion>4.0.0</modelVersion>\n+  <parent>\n+    <groupId>org.apache.spark</groupId>\n+    <artifactId>spark-parent_2.11</artifactId>\n+    <version>2.1.0-SNAPSHOT</version>\n+    <relativePath>../pom.xml</relativePath>\n+  </parent>\n+\n+  <artifactId>spark-mesos_2.11</artifactId>\n+  <packaging>jar</packaging>\n+  <name>Spark Project Mesos</name>\n+  <properties>\n+    <sbt.project.name>mesos</sbt.project.name>\n+    <mesos.version>1.0.0</mesos.version>\n+    <mesos.classifier>shaded-protobuf</mesos.classifier>\n+  </properties>\n+\n+  <dependencies>\n+    <dependency>\n+      <groupId>org.apache.spark</groupId>\n+      <artifactId>spark-core_${scala.binary.version}</artifactId>\n+      <version>${project.version}</version>\n+    </dependency>\n+\n+    <dependency>\n+      <groupId>org.apache.spark</groupId>\n+      <artifactId>spark-core_${scala.binary.version}</artifactId>\n+      <version>${project.version}</version>\n+      <type>test-jar</type>\n+      <scope>test</scope>\n+    </dependency>\n+\n+    <dependency>\n+      <groupId>org.apache.mesos</groupId>\n+      <artifactId>mesos</artifactId>\n+      <version>${mesos.version}</version>\n+      <classifier>${mesos.classifier}</classifier>\n+      <exclusions>\n+        <exclusion>\n+          <groupId>com.google.protobuf</groupId>\n+          <artifactId>protobuf-java</artifactId>\n+        </exclusion>\n+      </exclusions>\n+    </dependency>\n+\n+    <dependency>",
    "line": 64
  }, {
    "author": {
      "login": "vanzin"
    },
    "body": "(Note to self: YARN - and this new mesos module - should only need to declare the Guava dependency explicitly, since they don't use Jetty directly.)\n",
    "commit": "09f3197e7cac9a45315bf5bdaed57c97bcd0e46d",
    "createdAt": "2016-08-23T20:01:28Z",
    "diffHunk": "@@ -0,0 +1,109 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+  ~ Licensed to the Apache Software Foundation (ASF) under one or more\n+  ~ contributor license agreements.  See the NOTICE file distributed with\n+  ~ this work for additional information regarding copyright ownership.\n+  ~ The ASF licenses this file to You under the Apache License, Version 2.0\n+  ~ (the \"License\"); you may not use this file except in compliance with\n+  ~ the License.  You may obtain a copy of the License at\n+  ~\n+  ~    http://www.apache.org/licenses/LICENSE-2.0\n+  ~\n+  ~ Unless required by applicable law or agreed to in writing, software\n+  ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n+  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+  ~ See the License for the specific language governing permissions and\n+  ~ limitations under the License.\n+  -->\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <modelVersion>4.0.0</modelVersion>\n+  <parent>\n+    <groupId>org.apache.spark</groupId>\n+    <artifactId>spark-parent_2.11</artifactId>\n+    <version>2.1.0-SNAPSHOT</version>\n+    <relativePath>../pom.xml</relativePath>\n+  </parent>\n+\n+  <artifactId>spark-mesos_2.11</artifactId>\n+  <packaging>jar</packaging>\n+  <name>Spark Project Mesos</name>\n+  <properties>\n+    <sbt.project.name>mesos</sbt.project.name>\n+    <mesos.version>1.0.0</mesos.version>\n+    <mesos.classifier>shaded-protobuf</mesos.classifier>\n+  </properties>\n+\n+  <dependencies>\n+    <dependency>\n+      <groupId>org.apache.spark</groupId>\n+      <artifactId>spark-core_${scala.binary.version}</artifactId>\n+      <version>${project.version}</version>\n+    </dependency>\n+\n+    <dependency>\n+      <groupId>org.apache.spark</groupId>\n+      <artifactId>spark-core_${scala.binary.version}</artifactId>\n+      <version>${project.version}</version>\n+      <type>test-jar</type>\n+      <scope>test</scope>\n+    </dependency>\n+\n+    <dependency>\n+      <groupId>org.apache.mesos</groupId>\n+      <artifactId>mesos</artifactId>\n+      <version>${mesos.version}</version>\n+      <classifier>${mesos.classifier}</classifier>\n+      <exclusions>\n+        <exclusion>\n+          <groupId>com.google.protobuf</groupId>\n+          <artifactId>protobuf-java</artifactId>\n+        </exclusion>\n+      </exclusions>\n+    </dependency>\n+\n+    <dependency>",
    "line": 64
  }, {
    "author": {
      "login": "mgummelt"
    },
    "body": "Ah, I didn't realize the intransitivity of provided dependencies applied to inheritance as well.\n",
    "commit": "09f3197e7cac9a45315bf5bdaed57c97bcd0e46d",
    "createdAt": "2016-08-23T21:21:14Z",
    "diffHunk": "@@ -0,0 +1,109 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+  ~ Licensed to the Apache Software Foundation (ASF) under one or more\n+  ~ contributor license agreements.  See the NOTICE file distributed with\n+  ~ this work for additional information regarding copyright ownership.\n+  ~ The ASF licenses this file to You under the Apache License, Version 2.0\n+  ~ (the \"License\"); you may not use this file except in compliance with\n+  ~ the License.  You may obtain a copy of the License at\n+  ~\n+  ~    http://www.apache.org/licenses/LICENSE-2.0\n+  ~\n+  ~ Unless required by applicable law or agreed to in writing, software\n+  ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n+  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+  ~ See the License for the specific language governing permissions and\n+  ~ limitations under the License.\n+  -->\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <modelVersion>4.0.0</modelVersion>\n+  <parent>\n+    <groupId>org.apache.spark</groupId>\n+    <artifactId>spark-parent_2.11</artifactId>\n+    <version>2.1.0-SNAPSHOT</version>\n+    <relativePath>../pom.xml</relativePath>\n+  </parent>\n+\n+  <artifactId>spark-mesos_2.11</artifactId>\n+  <packaging>jar</packaging>\n+  <name>Spark Project Mesos</name>\n+  <properties>\n+    <sbt.project.name>mesos</sbt.project.name>\n+    <mesos.version>1.0.0</mesos.version>\n+    <mesos.classifier>shaded-protobuf</mesos.classifier>\n+  </properties>\n+\n+  <dependencies>\n+    <dependency>\n+      <groupId>org.apache.spark</groupId>\n+      <artifactId>spark-core_${scala.binary.version}</artifactId>\n+      <version>${project.version}</version>\n+    </dependency>\n+\n+    <dependency>\n+      <groupId>org.apache.spark</groupId>\n+      <artifactId>spark-core_${scala.binary.version}</artifactId>\n+      <version>${project.version}</version>\n+      <type>test-jar</type>\n+      <scope>test</scope>\n+    </dependency>\n+\n+    <dependency>\n+      <groupId>org.apache.mesos</groupId>\n+      <artifactId>mesos</artifactId>\n+      <version>${mesos.version}</version>\n+      <classifier>${mesos.classifier}</classifier>\n+      <exclusions>\n+        <exclusion>\n+          <groupId>com.google.protobuf</groupId>\n+          <artifactId>protobuf-java</artifactId>\n+        </exclusion>\n+      </exclusions>\n+    </dependency>\n+\n+    <dependency>",
    "line": 64
  }],
  "prId": 14637
}]