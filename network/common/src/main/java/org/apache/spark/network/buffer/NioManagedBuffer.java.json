[{
  "comments": [{
    "author": {
      "login": "squito"
    },
    "body": "we could wrap the entire `LargeByteBuffer` in a `LargeByteBufferInputStream` -- but I don't understand why there is already this level of indirection here so I thought I'd check.  This code is only for fetching shuffle blocks in any case, so other things will break if there is over 2gb in any case.\n",
    "commit": "cd84c6996c5fd48f2f9f2855e7f3e7a75ba5865a",
    "createdAt": "2015-03-02T22:20:46Z",
    "diffHunk": "@@ -41,13 +41,13 @@ public long size() {\n   }\n \n   @Override\n-  public ByteBuffer nioByteBuffer() throws IOException {\n+  public LargeByteBuffer nioByteBuffer() throws IOException {\n     return buf.duplicate();\n   }\n \n   @Override\n   public InputStream createInputStream() throws IOException {\n-    return new ByteBufInputStream(Unpooled.wrappedBuffer(buf));\n+    return new ByteBufInputStream(Unpooled.wrappedBuffer(buf.firstByteBuffer()));",
    "line": 24
  }],
  "prId": 4857
}]