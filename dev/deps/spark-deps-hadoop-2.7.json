[{
  "comments": [{
    "author": {
      "login": "dongjoon-hyun"
    },
    "body": "@s1ck . In general, this PR seems to introduce many transitive dependencies. I'm wondering if we can reduce some of these transitive dependency by adding exclusion rules?\r\n\r\ncc @mengxr ",
    "commit": "47bd5bc50989b8514a6a4dab29b47bec485f0d53",
    "createdAt": "2019-04-30T21:48:01Z",
    "diffHunk": "@@ -17,13 +18,17 @@ arpack_combined_all-0.1.jar\n arrow-format-0.12.0.jar\n arrow-memory-0.12.0.jar\n arrow-vector-0.12.0.jar\n+ast-9.0-9.0.20190305.jar\n automaton-1.11-8.jar\n avro-1.8.2.jar\n avro-ipc-1.8.2.jar\n avro-mapred-1.8.2-hadoop2.jar\n bonecp-0.8.0.RELEASE.jar\n breeze-macros_2.12-0.13.2.jar\n breeze_2.12-0.13.2.jar\n+cats-core_2.12-1.6.0.jar\n+cats-kernel_2.12-1.6.0.jar\n+cats-macros_2.12-1.6.0.jar"
  }, {
    "author": {
      "login": "s1ck"
    },
    "body": "Those dependencies are part of the OKAPI stack which is responsible for translating Cypher to relational operations. I understand that adding a lot of dependencies is bad practice for a single PR. By excluding them, we basically require the user to add explicit dependencies? If yes, it doesn't sound like an elegant solution to me.",
    "commit": "47bd5bc50989b8514a6a4dab29b47bec485f0d53",
    "createdAt": "2019-04-30T21:56:33Z",
    "diffHunk": "@@ -17,13 +18,17 @@ arpack_combined_all-0.1.jar\n arrow-format-0.12.0.jar\n arrow-memory-0.12.0.jar\n arrow-vector-0.12.0.jar\n+ast-9.0-9.0.20190305.jar\n automaton-1.11-8.jar\n avro-1.8.2.jar\n avro-ipc-1.8.2.jar\n avro-mapred-1.8.2-hadoop2.jar\n bonecp-0.8.0.RELEASE.jar\n breeze-macros_2.12-0.13.2.jar\n breeze_2.12-0.13.2.jar\n+cats-core_2.12-1.6.0.jar\n+cats-kernel_2.12-1.6.0.jar\n+cats-macros_2.12-1.6.0.jar"
  }, {
    "author": {
      "login": "dongjoon-hyun"
    },
    "body": "@s1ck . The alternative in my mind is making these into `external` modules like `external/avro` and `external/kafka-0-10`.\r\n\r\nHi, @rxin , @mengxr , @gatorsmile . Can we make new Graph modules as `external` modules instead? For now, this PR looks too intrusive to me.",
    "commit": "47bd5bc50989b8514a6a4dab29b47bec485f0d53",
    "createdAt": "2019-04-30T22:02:17Z",
    "diffHunk": "@@ -17,13 +18,17 @@ arpack_combined_all-0.1.jar\n arrow-format-0.12.0.jar\n arrow-memory-0.12.0.jar\n arrow-vector-0.12.0.jar\n+ast-9.0-9.0.20190305.jar\n automaton-1.11-8.jar\n avro-1.8.2.jar\n avro-ipc-1.8.2.jar\n avro-mapred-1.8.2-hadoop2.jar\n bonecp-0.8.0.RELEASE.jar\n breeze-macros_2.12-0.13.2.jar\n breeze_2.12-0.13.2.jar\n+cats-core_2.12-1.6.0.jar\n+cats-kernel_2.12-1.6.0.jar\n+cats-macros_2.12-1.6.0.jar"
  }, {
    "author": {
      "login": "Mats-SX"
    },
    "body": "@dongjoon-hyun This module adds a significant feature in a major Spark release. Is this not a reason to have a more relaxed qualification on dependent libraries? ",
    "commit": "47bd5bc50989b8514a6a4dab29b47bec485f0d53",
    "createdAt": "2019-05-14T14:35:57Z",
    "diffHunk": "@@ -17,13 +18,17 @@ arpack_combined_all-0.1.jar\n arrow-format-0.12.0.jar\n arrow-memory-0.12.0.jar\n arrow-vector-0.12.0.jar\n+ast-9.0-9.0.20190305.jar\n automaton-1.11-8.jar\n avro-1.8.2.jar\n avro-ipc-1.8.2.jar\n avro-mapred-1.8.2-hadoop2.jar\n bonecp-0.8.0.RELEASE.jar\n breeze-macros_2.12-0.13.2.jar\n breeze_2.12-0.13.2.jar\n+cats-core_2.12-1.6.0.jar\n+cats-kernel_2.12-1.6.0.jar\n+cats-macros_2.12-1.6.0.jar"
  }, {
    "author": {
      "login": "dongjoon-hyun"
    },
    "body": "KAFKA and AVRO also does.",
    "commit": "47bd5bc50989b8514a6a4dab29b47bec485f0d53",
    "createdAt": "2019-05-15T18:04:59Z",
    "diffHunk": "@@ -17,13 +18,17 @@ arpack_combined_all-0.1.jar\n arrow-format-0.12.0.jar\n arrow-memory-0.12.0.jar\n arrow-vector-0.12.0.jar\n+ast-9.0-9.0.20190305.jar\n automaton-1.11-8.jar\n avro-1.8.2.jar\n avro-ipc-1.8.2.jar\n avro-mapred-1.8.2-hadoop2.jar\n bonecp-0.8.0.RELEASE.jar\n breeze-macros_2.12-0.13.2.jar\n breeze_2.12-0.13.2.jar\n+cats-core_2.12-1.6.0.jar\n+cats-kernel_2.12-1.6.0.jar\n+cats-macros_2.12-1.6.0.jar"
  }],
  "prId": 24490
}, {
  "comments": [{
    "author": {
      "login": "dongjoon-hyun"
    },
    "body": "Finally, it's good to have a single file although this is huge (17MB, top 1 in terms of the size).\r\n```\r\n$ ls -alhS assembly/target/scala-2.12/jars/* | head\r\n-rw-r--r--  1 dhyun  staff    17M Jun  2 12:19 assembly/target/scala-2.12/jars/okapi-shade-0.4.1.jar\r\n-rw-r--r--  1 dhyun  staff    13M Jun  2 12:19 assembly/target/scala-2.12/jars/breeze_2.12-0.13.2.jar\r\n-rw-r--r--  1 dhyun  staff    11M Jun  2 12:19 assembly/target/scala-2.12/jars/aws-java-sdk-1.7.4.jar\r\n-rw-r--r--  1 dhyun  staff    11M Jun  2 12:19 assembly/target/scala-2.12/jars/hive-exec-1.2.1.spark2.jar\r\n-rw-r--r--  1 dhyun  staff    10M Jun  2 12:19 assembly/target/scala-2.12/jars/scala-compiler-2.12.8.jar\r\n-rw-r--r--  1 dhyun  staff   9.2M Jun  2 12:19 assembly/target/scala-2.12/jars/spire_2.12-0.13.0.jar\r\n-rw-r--r--  1 dhyun  staff   8.0M Jun  2 12:19 assembly/target/scala-2.12/jars/hadoop-hdfs-2.7.4.jar\r\n-rw-r--r--  1 dhyun  staff   7.2M Jun  2 12:19 assembly/target/scala-2.12/jars/spark-catalyst_2.12-3.0.0-SNAPSHOT.jar\r\n-rw-r--r--  1 dhyun  staff   6.5M Jun  2 12:19 assembly/target/scala-2.12/jars/spark-core_2.12-3.0.0-SNAPSHOT.jar\r\n-rw-r--r--  1 dhyun  staff   5.8M Jun  2 12:19 assembly/target/scala-2.12/jars/spark-sql_2.12-3.0.0-SNAPSHOT.jar\r\n```\r\n\r\nI'm wondering if we need the following meta files in `okapi-shade-0.4.1.jar`. Can we remove them from `okapi-shade-0.4.1`.jar?\r\n```\r\n$ jar tvf assembly/target/scala-2.12/jars/okapi-shade-0.4.1.jar | awk '{print $8}' | sort | more\r\n...\r\nMETA-INF/maven/org.apache.commons/\r\nMETA-INF/maven/org.apache.commons/commons-lang3/\r\nMETA-INF/maven/org.apache.commons/commons-lang3/pom.properties\r\nMETA-INF/maven/org.apache.commons/commons-lang3/pom.xml\r\nMETA-INF/maven/org.apache.logging.log4j/\r\nMETA-INF/maven/org.apache.logging.log4j/log4j-api-scala_2.12/\r\nMETA-INF/maven/org.apache.logging.log4j/log4j-api-scala_2.12/pom.properties\r\nMETA-INF/maven/org.apache.logging.log4j/log4j-api-scala_2.12/pom.xml\r\nMETA-INF/maven/org.apache.logging.log4j/log4j-api/\r\nMETA-INF/maven/org.apache.logging.log4j/log4j-api/pom.properties\r\nMETA-INF/maven/org.apache.logging.log4j/log4j-api/pom.xml\r\n...\r\n```",
    "commit": "47bd5bc50989b8514a6a4dab29b47bec485f0d53",
    "createdAt": "2019-06-02T19:37:22Z",
    "diffHunk": "@@ -152,6 +152,7 @@ minlog-1.3.0.jar\n netty-3.9.9.Final.jar\n netty-all-4.1.30.Final.jar\n objenesis-2.5.1.jar\n+okapi-shade-0.4.1.jar"
  }, {
    "author": {
      "login": "s1ck"
    },
    "body": "We'll remove the unnecessary meta files.",
    "commit": "47bd5bc50989b8514a6a4dab29b47bec485f0d53",
    "createdAt": "2019-06-03T10:10:34Z",
    "diffHunk": "@@ -152,6 +152,7 @@ minlog-1.3.0.jar\n netty-3.9.9.Final.jar\n netty-all-4.1.30.Final.jar\n objenesis-2.5.1.jar\n+okapi-shade-0.4.1.jar"
  }],
  "prId": 24490
}]