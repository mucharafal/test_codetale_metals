[{
  "comments": [{
    "author": {
      "login": "JoshRosen"
    },
    "body": "It turns out that I have multiple remotes that point to the Apache Spark Github:\n\n```\ngit remote -v |grep apache/spark\\.git | grep fetch\napache-github   git://github.com/apache/spark.git (fetch)\norigin  git@github.com:apache/spark.git (fetch)\n```\n\nThis caused the checkout to fail:\n\n```\n./dev/fetch-pr 3000\nDetected Apache github remote 'apache-github\norigin'\nFetching remote ref 'pull/3000/head'\nfatal: Couldn't find remote ref origin\n```\n",
    "commit": "aacb814cf8c785298d03389624913be376f79fb5",
    "createdAt": "2014-11-08T07:58:07Z",
    "diffHunk": "@@ -0,0 +1,53 @@\n+#!/usr/bin/env bash\n+\n+#\n+# Licensed to the Apache Software Foundation (ASF) under one or more\n+# contributor license agreements.  See the NOTICE file distributed with\n+# this work for additional information regarding copyright ownership.\n+# The ASF licenses this file to You under the Apache License, Version 2.0\n+# (the \"License\"); you may not use this file except in compliance with\n+# the License.  You may obtain a copy of the License at\n+#\n+#    http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+#\n+\n+# A utility script for fetching local copies of a pull request.\n+\n+set -e\n+set -o pipefail\n+\n+usage(){\n+  echo \"Utility for fetching a specific pull request into a temporary ref.\"\n+  echo \"Usage: ./dev/fetch-pr <pr-num>\"\n+  exit 1\n+}\n+\n+case \"$1\" in\n+  \"\") usage ;;\n+  -h) usage ;;\n+  h) usage ;;\n+  --help) usage ;;\n+  -help) usage ;;\n+  help) usage ;;\n+esac\n+\n+pr_num=$1\n+# Find remote corresponding to github\n+remote_name=$(git remote -v |grep apache/spark\\.git | grep fetch | \\",
    "line": 42
  }, {
    "author": {
      "login": "JoshRosen"
    },
    "body": "Tossing a `head -n1` into this pipeline solves this problem, though.\n",
    "commit": "aacb814cf8c785298d03389624913be376f79fb5",
    "createdAt": "2014-11-08T07:59:43Z",
    "diffHunk": "@@ -0,0 +1,53 @@\n+#!/usr/bin/env bash\n+\n+#\n+# Licensed to the Apache Software Foundation (ASF) under one or more\n+# contributor license agreements.  See the NOTICE file distributed with\n+# this work for additional information regarding copyright ownership.\n+# The ASF licenses this file to You under the Apache License, Version 2.0\n+# (the \"License\"); you may not use this file except in compliance with\n+# the License.  You may obtain a copy of the License at\n+#\n+#    http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+#\n+\n+# A utility script for fetching local copies of a pull request.\n+\n+set -e\n+set -o pipefail\n+\n+usage(){\n+  echo \"Utility for fetching a specific pull request into a temporary ref.\"\n+  echo \"Usage: ./dev/fetch-pr <pr-num>\"\n+  exit 1\n+}\n+\n+case \"$1\" in\n+  \"\") usage ;;\n+  -h) usage ;;\n+  h) usage ;;\n+  --help) usage ;;\n+  -help) usage ;;\n+  help) usage ;;\n+esac\n+\n+pr_num=$1\n+# Find remote corresponding to github\n+remote_name=$(git remote -v |grep apache/spark\\.git | grep fetch | \\",
    "line": 42
  }],
  "prId": 3165
}, {
  "comments": [{
    "author": {
      "login": "nchammas"
    },
    "body": "Some minor style comments:\n\nYou can format this so that each command in the pipeline is on a separate line.\n\n``` shell\nremote_name=$(\n  git remote -v \\\n  | grep \"apache/spark\\.git\" \\\n  | grep \"(fetch)$\" \\\n  | awk '{ print $1; }'\n)\n```\n\nMay I also suggest quoting the search terms and restricting the search for `fetch` to lines ending in the word.\n\nFinally, if there is any chance this filter might return more than one result, we should probably add `-m 1` to the first grep statement.\n",
    "commit": "aacb814cf8c785298d03389624913be376f79fb5",
    "createdAt": "2014-11-08T07:59:56Z",
    "diffHunk": "@@ -0,0 +1,53 @@\n+#!/usr/bin/env bash\n+\n+#\n+# Licensed to the Apache Software Foundation (ASF) under one or more\n+# contributor license agreements.  See the NOTICE file distributed with\n+# this work for additional information regarding copyright ownership.\n+# The ASF licenses this file to You under the Apache License, Version 2.0\n+# (the \"License\"); you may not use this file except in compliance with\n+# the License.  You may obtain a copy of the License at\n+#\n+#    http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+#\n+\n+# A utility script for fetching local copies of a pull request.\n+\n+set -e\n+set -o pipefail\n+\n+usage(){\n+  echo \"Utility for fetching a specific pull request into a temporary ref.\"\n+  echo \"Usage: ./dev/fetch-pr <pr-num>\"\n+  exit 1\n+}\n+\n+case \"$1\" in\n+  \"\") usage ;;\n+  -h) usage ;;\n+  h) usage ;;\n+  --help) usage ;;\n+  -help) usage ;;\n+  help) usage ;;\n+esac\n+\n+pr_num=$1\n+# Find remote corresponding to github\n+remote_name=$(git remote -v |grep apache/spark\\.git | grep fetch | \\\n+  awk '{ print $1; }')",
    "line": 43
  }],
  "prId": 3165
}]