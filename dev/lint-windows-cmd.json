[{
  "comments": [{
    "author": {
      "login": "nchammas"
    },
    "body": "Looks like there's an extra space here between `style` and `checks`.\n",
    "commit": "96a5a52ba57d87ac7294a3e34dde6a7d7d7a75b1",
    "createdAt": "2014-10-07T16:18:54Z",
    "diffHunk": "@@ -0,0 +1,40 @@\n+#!/usr/bin/env bash\n+\n+#\n+# Licensed to the Apache Software Foundation (ASF) under one or more\n+# contributor license agreements.  See the NOTICE file distributed with\n+# this work for additional information regarding copyright ownership.\n+# The ASF licenses this file to You under the Apache License, Version 2.0\n+# (the \"License\"); you may not use this file except in compliance with\n+# the License.  You may obtain a copy of the License at\n+#\n+#    http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+#\n+\n+SCRIPT_DIR=\"$( cd \"$( dirname \"$0\" )\" && pwd )\"\n+SPARK_ROOT_DIR=\"$(dirname $SCRIPT_DIR)\"\n+TARGET_DIR=\"$SPARK_ROOT_DIR/bin\"\n+HAS_ERROR=0\n+\n+# check whether all of lines ends with CRLF.\n+for file in \"$TARGET_DIR\"/*.cmd ; do\n+  grep \"^.*\"$'\\r'\"$\" $file &> /dev/null\n+  if [ $? -ne 0 ]; then\n+    HAS_ERROR=1\n+    echo $file \"has line(s) not ends with CRLF.\"\n+  fi\n+done\n+\n+if [ $HAS_ERROR -eq 0 ];then\n+  echo -e \"Windows batch file style checks passed.\"\n+else\n+  echo -e \"Windows batch file style  checks failed.\""
  }],
  "prId": 2612
}, {
  "comments": [{
    "author": {
      "login": "nchammas"
    },
    "body": "In Bash it's a good practice to always quote tested variables. So `\"$?\" -eq \"0\"`.\n",
    "commit": "96a5a52ba57d87ac7294a3e34dde6a7d7d7a75b1",
    "createdAt": "2014-10-07T16:20:34Z",
    "diffHunk": "@@ -0,0 +1,40 @@\n+#!/usr/bin/env bash\n+\n+#\n+# Licensed to the Apache Software Foundation (ASF) under one or more\n+# contributor license agreements.  See the NOTICE file distributed with\n+# this work for additional information regarding copyright ownership.\n+# The ASF licenses this file to You under the Apache License, Version 2.0\n+# (the \"License\"); you may not use this file except in compliance with\n+# the License.  You may obtain a copy of the License at\n+#\n+#    http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+#\n+\n+SCRIPT_DIR=\"$( cd \"$( dirname \"$0\" )\" && pwd )\"\n+SPARK_ROOT_DIR=\"$(dirname $SCRIPT_DIR)\"\n+TARGET_DIR=\"$SPARK_ROOT_DIR/bin\"\n+HAS_ERROR=0\n+\n+# check whether all of lines ends with CRLF.\n+for file in \"$TARGET_DIR\"/*.cmd ; do\n+  grep \"^.*\"$'\\r'\"$\" $file &> /dev/null\n+  if [ $? -ne 0 ]; then"
  }],
  "prId": 2612
}, {
  "comments": [{
    "author": {
      "login": "nchammas"
    },
    "body": "Same here. I suggest quoting both terms in the comparison.\n",
    "commit": "96a5a52ba57d87ac7294a3e34dde6a7d7d7a75b1",
    "createdAt": "2014-10-07T16:20:56Z",
    "diffHunk": "@@ -0,0 +1,40 @@\n+#!/usr/bin/env bash\n+\n+#\n+# Licensed to the Apache Software Foundation (ASF) under one or more\n+# contributor license agreements.  See the NOTICE file distributed with\n+# this work for additional information regarding copyright ownership.\n+# The ASF licenses this file to You under the Apache License, Version 2.0\n+# (the \"License\"); you may not use this file except in compliance with\n+# the License.  You may obtain a copy of the License at\n+#\n+#    http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+#\n+\n+SCRIPT_DIR=\"$( cd \"$( dirname \"$0\" )\" && pwd )\"\n+SPARK_ROOT_DIR=\"$(dirname $SCRIPT_DIR)\"\n+TARGET_DIR=\"$SPARK_ROOT_DIR/bin\"\n+HAS_ERROR=0\n+\n+# check whether all of lines ends with CRLF.\n+for file in \"$TARGET_DIR\"/*.cmd ; do\n+  grep \"^.*\"$'\\r'\"$\" $file &> /dev/null\n+  if [ $? -ne 0 ]; then\n+    HAS_ERROR=1\n+    echo $file \"has line(s) not ends with CRLF.\"\n+  fi\n+done\n+\n+if [ $HAS_ERROR -eq 0 ];then"
  }],
  "prId": 2612
}, {
  "comments": [{
    "author": {
      "login": "nchammas"
    },
    "body": "Is there a simpler way to write this? It would also be good to show which lines had CR/LF endings, if any. This would match what our other style checks do.\n\nFor example, I suggest something like:\n\n```\ngrep -v -nU $'\\r' *.cmd > ./lint-windows-cmd.log\n\nif [ \"$?\" -eq 0 ]; then\n  echo \"Windows batch file style checks failed.\"\n\n  echo \"Non-Windows-style line endings were found at the following locations:\"\n  cat ./lint-windows-cmd.log\n  echo \"Please fix the line endings to follow the Windows convention of CR/LF.\"\nelse\n  echo \"Windows batch file style checks passed.\"\nfi\n\nrm ./lint-windows-cmd.log\n```\n",
    "commit": "96a5a52ba57d87ac7294a3e34dde6a7d7d7a75b1",
    "createdAt": "2014-10-07T19:09:18Z",
    "diffHunk": "@@ -0,0 +1,40 @@\n+#!/usr/bin/env bash\n+\n+#\n+# Licensed to the Apache Software Foundation (ASF) under one or more\n+# contributor license agreements.  See the NOTICE file distributed with\n+# this work for additional information regarding copyright ownership.\n+# The ASF licenses this file to You under the Apache License, Version 2.0\n+# (the \"License\"); you may not use this file except in compliance with\n+# the License.  You may obtain a copy of the License at\n+#\n+#    http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+#\n+\n+SCRIPT_DIR=\"$( cd \"$( dirname \"$0\" )\" && pwd )\"\n+SPARK_ROOT_DIR=\"$(dirname $SCRIPT_DIR)\"\n+TARGET_DIR=\"$SPARK_ROOT_DIR/bin\"\n+HAS_ERROR=0\n+\n+# check whether all of lines ends with CRLF.\n+for file in \"$TARGET_DIR\"/*.cmd ; do\n+  grep \"^.*\"$'\\r'\"$\" \"$file\" &> /dev/null"
  }],
  "prId": 2612
}]