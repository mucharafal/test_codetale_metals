[{
  "comments": [{
    "author": {
      "login": "ScrapCodes"
    },
    "body": "Since a producer is shared across threads, we maintain inuse counts and close them separately.",
    "commit": "8a0906e11eab36cb92c159915915b77334d34312",
    "createdAt": "2018-01-17T11:27:07Z",
    "diffHunk": "@@ -112,8 +112,8 @@ class KafkaContinuousDataWriter(\n     checkForErrors()\n     if (producer != null) {\n       producer.flush()\n+      producer.inUseCount.decrementAndGet()\n       checkForErrors()\n-      CachedKafkaProducer.close(new java.util.HashMap[String, Object](producerParams.asJava))"
  }],
  "prId": 19096
}]