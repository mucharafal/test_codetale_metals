[{
  "comments": [{
    "author": {
      "login": "budde"
    },
    "body": "*nit:* move this to the end of previous line",
    "commit": "91a777c48e3794365b287015775d7554aa0ceff1",
    "createdAt": "2017-04-21T20:06:49Z",
    "diffHunk": "@@ -101,6 +101,37 @@ abstract class KinesisBackedBlockRDDTests(aggregateTestData: Boolean)\n     }\n   }\n \n+  testIfEnabled(\"Basic reading from Kinesis with modified configurations\") {\n+    // Add Kinesis retry configurations\n+    sc.conf.set(\"spark.streaming.kinesis.retry.waitTime\", \"1000ms\")\n+    sc.conf.set(\"spark.streaming.kinesis.retry.maxAttempts\", \"5\")\n+\n+    // Verify all data using multiple ranges in a single RDD partition\n+    val receivedData1 = new KinesisBackedBlockRDD[Array[Byte]](sc, testUtils.regionName,\n+      testUtils.endpointUrl, fakeBlockIds(1),\n+      Array(SequenceNumberRanges(allRanges.toArray)),\n+      sparkConf = sc.getConf).map { bytes => new String(bytes).toInt }.collect()\n+    assert(receivedData1.toSet === testData.toSet)\n+\n+    // Verify all data using one range in each of the multiple RDD partitions\n+    val receivedData2 = new KinesisBackedBlockRDD[Array[Byte]](sc, testUtils.regionName,\n+      testUtils.endpointUrl, fakeBlockIds(allRanges.size),\n+      allRanges.map { range => SequenceNumberRanges(Array(range)) }.toArray,\n+      sparkConf = sc.getConf).map { bytes => new String(bytes).toInt }.collect()\n+    assert(receivedData2.toSet === testData.toSet)\n+\n+    // Verify ordering within each partition\n+    val receivedData3 = new KinesisBackedBlockRDD[Array[Byte]](sc, testUtils.regionName,\n+      testUtils.endpointUrl, fakeBlockIds(allRanges.size),\n+      allRanges.map { range => SequenceNumberRanges(Array(range)) }.toArray,\n+      sparkConf = sc.getConf\n+    ).map { bytes => new String(bytes).toInt }.collectPartitions()"
  }],
  "prId": 17467
}, {
  "comments": [{
    "author": {
      "login": "brkyvz"
    },
    "body": "I don't see how this test actually tests the configuration setting. It just tests if things work, not that the configurations are actually picked up.\r\n\r\n",
    "commit": "91a777c48e3794365b287015775d7554aa0ceff1",
    "createdAt": "2017-04-23T19:03:25Z",
    "diffHunk": "@@ -101,6 +103,36 @@ abstract class KinesisBackedBlockRDDTests(aggregateTestData: Boolean)\n     }\n   }\n \n+  testIfEnabled(\"Basic reading from Kinesis with modified configurations\") {"
  }, {
    "author": {
      "login": "yssharma"
    },
    "body": "I wasn't able to test the actual waiting of Kinesis. I haven't looked at the `PrivateMethodTester ` yet and check how that can help us to test how the vars are picked.\r\nI used this testcase to debug and verify that all the values are passed correctly.",
    "commit": "91a777c48e3794365b287015775d7554aa0ceff1",
    "createdAt": "2017-04-23T23:52:50Z",
    "diffHunk": "@@ -101,6 +103,36 @@ abstract class KinesisBackedBlockRDDTests(aggregateTestData: Boolean)\n     }\n   }\n \n+  testIfEnabled(\"Basic reading from Kinesis with modified configurations\") {"
  }],
  "prId": 17467
}, {
  "comments": [{
    "author": {
      "login": "brkyvz"
    },
    "body": "we need to clean these up after the test",
    "commit": "91a777c48e3794365b287015775d7554aa0ceff1",
    "createdAt": "2017-04-23T19:03:39Z",
    "diffHunk": "@@ -101,6 +103,36 @@ abstract class KinesisBackedBlockRDDTests(aggregateTestData: Boolean)\n     }\n   }\n \n+  testIfEnabled(\"Basic reading from Kinesis with modified configurations\") {\n+    // Add Kinesis retry configurations\n+    sc.conf.set(RETRY_WAIT_TIME_KEY, \"1000ms\")"
  }, {
    "author": {
      "login": "yssharma"
    },
    "body": "+1",
    "commit": "91a777c48e3794365b287015775d7554aa0ceff1",
    "createdAt": "2017-04-23T23:51:27Z",
    "diffHunk": "@@ -101,6 +103,36 @@ abstract class KinesisBackedBlockRDDTests(aggregateTestData: Boolean)\n     }\n   }\n \n+  testIfEnabled(\"Basic reading from Kinesis with modified configurations\") {\n+    // Add Kinesis retry configurations\n+    sc.conf.set(RETRY_WAIT_TIME_KEY, \"1000ms\")"
  }],
  "prId": 17467
}]