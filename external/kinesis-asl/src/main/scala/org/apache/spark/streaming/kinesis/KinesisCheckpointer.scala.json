[{
  "comments": [{
    "author": {
      "login": "brkyvz"
    },
    "body": "Can you run this if `checkpointer != null`. The docs mention that the `checkpointer` may be null.",
    "commit": "17a5c3a0b74414d2f65cfdf33d813599b1697804",
    "createdAt": "2017-01-25T18:07:22Z",
    "diffHunk": "@@ -64,7 +64,18 @@ private[kinesis] class KinesisCheckpointer(\n   def removeCheckpointer(shardId: String, checkpointer: IRecordProcessorCheckpointer): Unit = {\n     synchronized {\n       checkpointers.remove(shardId)\n-      checkpoint(shardId, checkpointer)\n+    }\n+    try {\n+      // We must call `checkpoint()` with no parameter to finish reading shards.\n+      // See an URL below for details:\n+      // https://forums.aws.amazon.com/thread.jspa?threadID=244218\n+      KinesisRecordProcessor.retryRandom(checkpointer.checkpoint(), 4, 100)"
  }, {
    "author": {
      "login": "maropu"
    },
    "body": "Does the latest fix satisfy your intention?",
    "commit": "17a5c3a0b74414d2f65cfdf33d813599b1697804",
    "createdAt": "2017-01-26T00:39:18Z",
    "diffHunk": "@@ -64,7 +64,18 @@ private[kinesis] class KinesisCheckpointer(\n   def removeCheckpointer(shardId: String, checkpointer: IRecordProcessorCheckpointer): Unit = {\n     synchronized {\n       checkpointers.remove(shardId)\n-      checkpoint(shardId, checkpointer)\n+    }\n+    try {\n+      // We must call `checkpoint()` with no parameter to finish reading shards.\n+      // See an URL below for details:\n+      // https://forums.aws.amazon.com/thread.jspa?threadID=244218\n+      KinesisRecordProcessor.retryRandom(checkpointer.checkpoint(), 4, 100)"
  }],
  "prId": 16213
}]