[{
  "comments": [{
    "author": {
      "login": "tgravescs"
    },
    "body": "is this giving you the right time?  It looks like its giving you the credentials file name instead of the next time to update.\n\nname is: credentials-UUID-timestamp-1...   slice = credentials-UUID-timestamp, name.substring of that is credentials-UUID.  don't you want name.substring(last2index, index) ?\n",
    "commit": "bce8cd6a5796fc95a432c169c8c40bea552382f0",
    "createdAt": "2016-07-19T15:30:46Z",
    "diffHunk": "@@ -107,6 +110,14 @@ private[spark] class ExecutorDelegationTokenUpdater(\n     }\n   }\n \n+  private def getTimeOfNextUpdateFromFileName(credentialsPath: Path): Long = {\n+    val name = credentialsPath.getName\n+    val index = name.lastIndexOf(SparkHadoopUtil.SPARK_YARN_CREDS_COUNTER_DELIM)\n+    val slice = name.substring(0, index)\n+    val last2index = slice.lastIndexOf(SparkHadoopUtil.SPARK_YARN_CREDS_COUNTER_DELIM)\n+    name.substring(last2index).toLong"
  }, {
    "author": {
      "login": "jerryshao"
    },
    "body": "Sorry about it, I will fix it.\n",
    "commit": "bce8cd6a5796fc95a432c169c8c40bea552382f0",
    "createdAt": "2016-07-20T08:05:20Z",
    "diffHunk": "@@ -107,6 +110,14 @@ private[spark] class ExecutorDelegationTokenUpdater(\n     }\n   }\n \n+  private def getTimeOfNextUpdateFromFileName(credentialsPath: Path): Long = {\n+    val name = credentialsPath.getName\n+    val index = name.lastIndexOf(SparkHadoopUtil.SPARK_YARN_CREDS_COUNTER_DELIM)\n+    val slice = name.substring(0, index)\n+    val last2index = slice.lastIndexOf(SparkHadoopUtil.SPARK_YARN_CREDS_COUNTER_DELIM)\n+    name.substring(last2index).toLong"
  }],
  "prId": 14065
}]