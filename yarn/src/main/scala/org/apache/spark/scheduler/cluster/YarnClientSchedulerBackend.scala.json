[{
  "comments": [{
    "author": {
      "login": "zuxqoj"
    },
    "body": "SPARK_MASTER_MEMORY and spark.master.memory are not applicable in yarn-client mode\n\nshould be removed, please refer SPARK-1953\n",
    "commit": "36e075348b9dcbbea74dcff3d63f94d1f29f2db7",
    "createdAt": "2015-02-23T10:50:55Z",
    "diffHunk": "@@ -78,11 +79,25 @@ private[spark] class YarnClientSchedulerBackend(\n         (\"--queue\", \"SPARK_YARN_QUEUE\", \"spark.yarn.queue\"),\n         (\"--name\", \"SPARK_YARN_APP_NAME\", \"spark.app.name\")\n       )\n+    // Warn against the following deprecated environment variables: env var -> suggestion\n+    val deprecatedEnvVars = Map(\n+      \"SPARK_MASTER_MEMORY\" -> \"SPARK_DRIVER_MEMORY or --driver-memory through spark-submit\",\n+      \"SPARK_WORKER_INSTANCES\" -> \"SPARK_WORKER_INSTANCES or --num-executors through spark-submit\",\n+      \"SPARK_WORKER_MEMORY\" -> \"SPARK_EXECUTOR_MEMORY or --executor-memory through spark-submit\",\n+      \"SPARK_WORKER_CORES\" -> \"SPARK_EXECUTOR_CORES or --executor-cores through spark-submit\")\n+    // Do the same for deprecated properties: property -> suggestion\n+    val deprecatedProps = Map(\"spark.master.memory\" -> \"--driver-memory through spark-submit\")",
    "line": 21
  }, {
    "author": {
      "login": "andrewor14"
    },
    "body": "@zuxqoj the \"master\" here doesn't actually refer to the ApplicationMaster, but the driver, so SPARK-1953 is actually unrelated. It's really the result of bad naming that we inherited from a long time ago, and this is why we're deprecating it. I agree we should just remove it for 1.4.\n",
    "commit": "36e075348b9dcbbea74dcff3d63f94d1f29f2db7",
    "createdAt": "2015-02-23T23:35:05Z",
    "diffHunk": "@@ -78,11 +79,25 @@ private[spark] class YarnClientSchedulerBackend(\n         (\"--queue\", \"SPARK_YARN_QUEUE\", \"spark.yarn.queue\"),\n         (\"--name\", \"SPARK_YARN_APP_NAME\", \"spark.app.name\")\n       )\n+    // Warn against the following deprecated environment variables: env var -> suggestion\n+    val deprecatedEnvVars = Map(\n+      \"SPARK_MASTER_MEMORY\" -> \"SPARK_DRIVER_MEMORY or --driver-memory through spark-submit\",\n+      \"SPARK_WORKER_INSTANCES\" -> \"SPARK_WORKER_INSTANCES or --num-executors through spark-submit\",\n+      \"SPARK_WORKER_MEMORY\" -> \"SPARK_EXECUTOR_MEMORY or --executor-memory through spark-submit\",\n+      \"SPARK_WORKER_CORES\" -> \"SPARK_EXECUTOR_CORES or --executor-cores through spark-submit\")\n+    // Do the same for deprecated properties: property -> suggestion\n+    val deprecatedProps = Map(\"spark.master.memory\" -> \"--driver-memory through spark-submit\")",
    "line": 21
  }, {
    "author": {
      "login": "zuxqoj"
    },
    "body": "@andrewor14 In SPARK-1953 properties related to driver memory were removed form yarn-client mode. SPARK_MASTER_MEMORY and spark.master.memory are related to driver memory, so they should also be removed. I have created jira for it https://issues.apache.org/jira/browse/SPARK-5951\n",
    "commit": "36e075348b9dcbbea74dcff3d63f94d1f29f2db7",
    "createdAt": "2015-02-24T10:57:30Z",
    "diffHunk": "@@ -78,11 +79,25 @@ private[spark] class YarnClientSchedulerBackend(\n         (\"--queue\", \"SPARK_YARN_QUEUE\", \"spark.yarn.queue\"),\n         (\"--name\", \"SPARK_YARN_APP_NAME\", \"spark.app.name\")\n       )\n+    // Warn against the following deprecated environment variables: env var -> suggestion\n+    val deprecatedEnvVars = Map(\n+      \"SPARK_MASTER_MEMORY\" -> \"SPARK_DRIVER_MEMORY or --driver-memory through spark-submit\",\n+      \"SPARK_WORKER_INSTANCES\" -> \"SPARK_WORKER_INSTANCES or --num-executors through spark-submit\",\n+      \"SPARK_WORKER_MEMORY\" -> \"SPARK_EXECUTOR_MEMORY or --executor-memory through spark-submit\",\n+      \"SPARK_WORKER_CORES\" -> \"SPARK_EXECUTOR_CORES or --executor-cores through spark-submit\")\n+    // Do the same for deprecated properties: property -> suggestion\n+    val deprecatedProps = Map(\"spark.master.memory\" -> \"--driver-memory through spark-submit\")",
    "line": 21
  }, {
    "author": {
      "login": "andrewor14"
    },
    "body": "SPARK-1953 did not remove any driver memory setting from yarn-client mode; it just introduced new ones for the AM, so it's unrelated to the discussion here. I do agree that we should remove these configs for 1.4, but the reason has nothing to do with the ApplicationMaster. Thanks for filing that JIRA.\n",
    "commit": "36e075348b9dcbbea74dcff3d63f94d1f29f2db7",
    "createdAt": "2015-02-24T18:09:51Z",
    "diffHunk": "@@ -78,11 +79,25 @@ private[spark] class YarnClientSchedulerBackend(\n         (\"--queue\", \"SPARK_YARN_QUEUE\", \"spark.yarn.queue\"),\n         (\"--name\", \"SPARK_YARN_APP_NAME\", \"spark.app.name\")\n       )\n+    // Warn against the following deprecated environment variables: env var -> suggestion\n+    val deprecatedEnvVars = Map(\n+      \"SPARK_MASTER_MEMORY\" -> \"SPARK_DRIVER_MEMORY or --driver-memory through spark-submit\",\n+      \"SPARK_WORKER_INSTANCES\" -> \"SPARK_WORKER_INSTANCES or --num-executors through spark-submit\",\n+      \"SPARK_WORKER_MEMORY\" -> \"SPARK_EXECUTOR_MEMORY or --executor-memory through spark-submit\",\n+      \"SPARK_WORKER_CORES\" -> \"SPARK_EXECUTOR_CORES or --executor-cores through spark-submit\")\n+    // Do the same for deprecated properties: property -> suggestion\n+    val deprecatedProps = Map(\"spark.master.memory\" -> \"--driver-memory through spark-submit\")",
    "line": 21
  }],
  "prId": 3590
}]