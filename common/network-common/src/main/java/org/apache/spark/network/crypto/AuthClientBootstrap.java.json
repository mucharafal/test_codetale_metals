[{
  "comments": [{
    "author": {
      "login": "attilapiros"
    },
    "body": "Super NIT: avoid  the `!` operator by swapping the if and the else body.",
    "commit": "d6dfa8c63f36d9c51431439332688e8eeffd25c5",
    "createdAt": "2019-03-21T16:17:59Z",
    "diffHunk": "@@ -82,13 +83,19 @@ public void doBootstrap(TransportClient client, Channel channel) {\n     } catch (RuntimeException e) {\n       // There isn't a good exception that can be caught here to know whether it's really\n       // OK to switch back to SASL (because the server doesn't speak the new protocol). So\n-      // try it anyway, and in the worst case things will fail again.\n-      if (conf.saslFallback()) {\n-        LOG.warn(\"New auth protocol failed, trying SASL.\", e);\n-        doSaslAuth(client, channel);\n-      } else {\n+      // try it anyway, unless it's a timeout, which is locally fatal. In the worst case\n+      // things will fail again.\n+      if (!conf.saslFallback() || e.getCause() instanceof TimeoutException) {\n         throw e;\n       }\n+\n+      if (!LOG.isDebugEnabled()) {"
  }],
  "prId": 24160
}]