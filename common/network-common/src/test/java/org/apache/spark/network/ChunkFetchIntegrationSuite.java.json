[{
  "comments": [{
    "author": {
      "login": "srowen"
    },
    "body": "Nit: space after try",
    "commit": "d8d7c890f3d6914e47fc613f19415121809f4115",
    "createdAt": "2018-09-12T02:42:23Z",
    "diffHunk": "@@ -143,61 +143,62 @@ public void releaseBuffers() {\n   }\n \n   private FetchResult fetchChunks(List<Integer> chunkIndices) throws Exception {\n-    TransportClient client = clientFactory.createClient(TestUtils.getLocalHost(), server.getPort());\n-    final Semaphore sem = new Semaphore(0);\n-\n     final FetchResult res = new FetchResult();\n-    res.successChunks = Collections.synchronizedSet(new HashSet<Integer>());\n-    res.failedChunks = Collections.synchronizedSet(new HashSet<Integer>());\n-    res.buffers = Collections.synchronizedList(new LinkedList<ManagedBuffer>());\n \n-    ChunkReceivedCallback callback = new ChunkReceivedCallback() {\n-      @Override\n-      public void onSuccess(int chunkIndex, ManagedBuffer buffer) {\n-        buffer.retain();\n-        res.successChunks.add(chunkIndex);\n-        res.buffers.add(buffer);\n-        sem.release();\n-      }\n+    try(TransportClient client = clientFactory.createClient(TestUtils.getLocalHost(), server.getPort())) {"
  }],
  "prId": 22399
}, {
  "comments": [{
    "author": {
      "login": "kiszk"
    },
    "body": "nit: Can we put this line into `try` since this line was originally executed after `clientFactory.createClient`.",
    "commit": "d8d7c890f3d6914e47fc613f19415121809f4115",
    "createdAt": "2018-09-17T15:33:17Z",
    "diffHunk": "@@ -143,37 +143,38 @@ public void releaseBuffers() {\n   }\n \n   private FetchResult fetchChunks(List<Integer> chunkIndices) throws Exception {\n-    TransportClient client = clientFactory.createClient(TestUtils.getLocalHost(), server.getPort());\n-    final Semaphore sem = new Semaphore(0);\n-\n     final FetchResult res = new FetchResult();",
    "line": 7
  }, {
    "author": {
      "login": "Fokko"
    },
    "body": "No we can't, since the `res` is returned by the function :-)",
    "commit": "d8d7c890f3d6914e47fc613f19415121809f4115",
    "createdAt": "2018-09-18T17:51:47Z",
    "diffHunk": "@@ -143,37 +143,38 @@ public void releaseBuffers() {\n   }\n \n   private FetchResult fetchChunks(List<Integer> chunkIndices) throws Exception {\n-    TransportClient client = clientFactory.createClient(TestUtils.getLocalHost(), server.getPort());\n-    final Semaphore sem = new Semaphore(0);\n-\n     final FetchResult res = new FetchResult();",
    "line": 7
  }, {
    "author": {
      "login": "kiszk"
    },
    "body": "I see, thanks.",
    "commit": "d8d7c890f3d6914e47fc613f19415121809f4115",
    "createdAt": "2018-09-19T00:25:56Z",
    "diffHunk": "@@ -143,37 +143,38 @@ public void releaseBuffers() {\n   }\n \n   private FetchResult fetchChunks(List<Integer> chunkIndices) throws Exception {\n-    TransportClient client = clientFactory.createClient(TestUtils.getLocalHost(), server.getPort());\n-    final Semaphore sem = new Semaphore(0);\n-\n     final FetchResult res = new FetchResult();",
    "line": 7
  }, {
    "author": {
      "login": "Fokko"
    },
    "body": "Any time",
    "commit": "d8d7c890f3d6914e47fc613f19415121809f4115",
    "createdAt": "2018-09-19T06:14:31Z",
    "diffHunk": "@@ -143,37 +143,38 @@ public void releaseBuffers() {\n   }\n \n   private FetchResult fetchChunks(List<Integer> chunkIndices) throws Exception {\n-    TransportClient client = clientFactory.createClient(TestUtils.getLocalHost(), server.getPort());\n-    final Semaphore sem = new Semaphore(0);\n-\n     final FetchResult res = new FetchResult();",
    "line": 7
  }],
  "prId": 22399
}]