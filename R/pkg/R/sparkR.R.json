[{
  "comments": [{
    "author": {
      "login": "felixcheung"
    },
    "body": "not sure if it's important, perhaps print the original version (ie. with -SNAPSHOT) ",
    "commit": "cc6b540842bf41ade19650c7b5fe289f8fc783b7",
    "createdAt": "2017-11-01T06:55:55Z",
    "diffHunk": "@@ -420,6 +420,18 @@ sparkR.session <- function(\n                                 enableHiveSupport)\n     assign(\".sparkRsession\", sparkSession, envir = .sparkREnv)\n   }\n+\n+  # Check if version number of SparkSession matches version number of SparkR package\n+  jvmVersion <- callJMethod(sparkSession, \"version\")\n+  # Remove -SNAPSHOT from jvm versions\n+  jvmVersion <- gsub(\"-SNAPSHOT\", \"\", jvmVersion)\n+  rPackageVersion <- paste0(packageVersion(\"SparkR\"))\n+\n+  if (jvmVersion != rPackageVersion) {\n+    warning(paste(\"Version mismatch between Spark JVM and SparkR package. JVM version was\",\n+                  jvmVersion, \", while R package version was\", rPackageVersion))"
  }, {
    "author": {
      "login": "shivaram"
    },
    "body": "I wonder if that would be more confusing as somebody might think they just need to remove the `-snapshot` ?",
    "commit": "cc6b540842bf41ade19650c7b5fe289f8fc783b7",
    "createdAt": "2017-11-01T17:02:00Z",
    "diffHunk": "@@ -420,6 +420,18 @@ sparkR.session <- function(\n                                 enableHiveSupport)\n     assign(\".sparkRsession\", sparkSession, envir = .sparkREnv)\n   }\n+\n+  # Check if version number of SparkSession matches version number of SparkR package\n+  jvmVersion <- callJMethod(sparkSession, \"version\")\n+  # Remove -SNAPSHOT from jvm versions\n+  jvmVersion <- gsub(\"-SNAPSHOT\", \"\", jvmVersion)\n+  rPackageVersion <- paste0(packageVersion(\"SparkR\"))\n+\n+  if (jvmVersion != rPackageVersion) {\n+    warning(paste(\"Version mismatch between Spark JVM and SparkR package. JVM version was\",\n+                  jvmVersion, \", while R package version was\", rPackageVersion))"
  }],
  "prId": 19624
}]