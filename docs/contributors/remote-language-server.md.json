[
  {
    "id" : "930244b3-c39c-4ca1-982e-5220c5b031dc",
    "prId" : 1547,
    "comments" : [
      {
        "id" : "0bbe4e29-44be-45ab-93e3-1564d2befeae",
        "parentId" : null,
        "author" : {
          "login" : "gabro",
          "name" : null,
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/691940?u=5aaf176f5da60764f857b8f8c6842217f737627f&v=4"
        },
        "body" : "Out of curiosity, why not using JSON-RPC?",
        "createdAt" : "2020-03-26T09:56:41Z",
        "updatedAt" : "2020-03-27T19:26:28Z",
        "lastEditedBy" : {
          "login" : "gabro",
          "name" : null,
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/691940?u=5aaf176f5da60764f857b8f8c6842217f737627f&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "87363210-c07d-4d21-ab9d-d93c1a5e4728",
        "parentId" : "0bbe4e29-44be-45ab-93e3-1564d2befeae",
        "author" : {
          "login" : "olafurpg",
          "name" : null,
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/1408093?v=4"
        },
        "body" : "It's a good question, I elaborated on the motivation to choose HTTP over JSON-RPC.",
        "createdAt" : "2020-03-26T11:14:40Z",
        "updatedAt" : "2020-03-27T19:26:28Z",
        "lastEditedBy" : {
          "login" : "olafurpg",
          "name" : null,
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/1408093?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "c73b050e-7883-49f7-9bf7-562039b7224b",
        "parentId" : "0bbe4e29-44be-45ab-93e3-1564d2befeae",
        "author" : {
          "login" : "gabro",
          "name" : null,
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/691940?u=5aaf176f5da60764f857b8f8c6842217f737627f&v=4"
        },
        "body" : "Thanks for the clarification üëç ",
        "createdAt" : "2020-03-26T11:16:45Z",
        "updatedAt" : "2020-03-27T19:26:28Z",
        "lastEditedBy" : {
          "login" : "gabro",
          "name" : null,
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/691940?u=5aaf176f5da60764f857b8f8c6842217f737627f&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "922329228964c110122b6e35a403b21a3c4d3f3e",
    "line" : null,
    "diffHunk" : "@@ -0,0 +1,146 @@\n+---\n+id: remote-language-server\n+title: Remote Language Servers\n+---\n+\n+Metals has experimental support to offload certain requests to a remote language\n+server. This feature can be used to navigate large codebases when its not\n+possible to index all the code on a local computer.\n+\n+## Difference from local language servers\n+\n+There are some important differences between local and remote language servers:\n+\n+- Instead of JSON-RPC, a remote language server responds to HTTP POST requests\n+  with an `application/json` header and a JSON-formatted body."
  },
  {
    "id" : "3da98630-704b-4515-a716-287ad3358d1e",
    "prId" : 1547,
    "comments" : [
      {
        "id" : "d515b334-471b-4a57-ad75-1b22b913f178",
        "parentId" : null,
        "author" : {
          "login" : "ckipp01",
          "name" : null,
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/13974112?u=7b6a2ddab8eec6f99e4e40ae9b81f71cb5ba92e5&v=4"
        },
        "body" : "```suggestion\r\nserver. This feature can be used to navigate large codebases when it's not\r\n```",
        "createdAt" : "2020-03-26T11:54:38Z",
        "updatedAt" : "2020-03-27T19:26:28Z",
        "lastEditedBy" : {
          "login" : "ckipp01",
          "name" : null,
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/13974112?u=7b6a2ddab8eec6f99e4e40ae9b81f71cb5ba92e5&v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      },
      {
        "id" : "fda7e400-1ad5-463c-8f5c-d17f1436afc1",
        "parentId" : "d515b334-471b-4a57-ad75-1b22b913f178",
        "author" : {
          "login" : "olafurpg",
          "name" : null,
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/1408093?v=4"
        },
        "body" : "Good catch. Fixed.",
        "createdAt" : "2020-03-26T18:14:10Z",
        "updatedAt" : "2020-03-27T19:26:28Z",
        "lastEditedBy" : {
          "login" : "olafurpg",
          "name" : null,
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/1408093?v=4"
        },
        "tags" : [
          {
            "value" : "outdated"
          }
        ]
      }
    ],
    "commit" : "922329228964c110122b6e35a403b21a3c4d3f3e",
    "line" : null,
    "diffHunk" : "@@ -0,0 +1,151 @@\n+---\n+id: remote-language-server\n+title: Remote Language Servers\n+---\n+\n+Metals has experimental support to offload certain requests to a remote language\n+server. This feature can be used to navigate large codebases when its not"
  },
  {
    "id" : "ea8fa36b-d92f-40d1-bf8c-825a650be3d7",
    "prId" : 1547,
    "comments" : [
      {
        "id" : "afce6da6-7b19-4381-b6f6-aa3b1e02def2",
        "parentId" : null,
        "author" : {
          "login" : "ckipp01",
          "name" : null,
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/13974112?u=7b6a2ddab8eec6f99e4e40ae9b81f71cb5ba92e5&v=4"
        },
        "body" : "Really small nitpick. I'd add something to end the article. I always find it a bit odd when a blog article ends with a code snippet. Just a summary or ideas about where this will go in the future might be a nice addition, and a good way to end the article.",
        "createdAt" : "2020-03-26T11:58:06Z",
        "updatedAt" : "2020-03-27T19:26:28Z",
        "lastEditedBy" : {
          "login" : "ckipp01",
          "name" : null,
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/13974112?u=7b6a2ddab8eec6f99e4e40ae9b81f71cb5ba92e5&v=4"
        },
        "tags" : [
        ]
      },
      {
        "id" : "80bdda53-d2d3-4163-a134-6dacb98c3b86",
        "parentId" : "afce6da6-7b19-4381-b6f6-aa3b1e02def2",
        "author" : {
          "login" : "olafurpg",
          "name" : null,
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/1408093?v=4"
        },
        "body" : "Haha, I have thought about this as well. I added a new \"Open questions\" section that documents some concerns I have about this approach and the to stress that this is an experimental feature.",
        "createdAt" : "2020-03-26T18:15:19Z",
        "updatedAt" : "2020-03-27T19:26:28Z",
        "lastEditedBy" : {
          "login" : "olafurpg",
          "name" : null,
          "avatarUrl" : "https://avatars0.githubusercontent.com/u/1408093?v=4"
        },
        "tags" : [
        ]
      }
    ],
    "commit" : "922329228964c110122b6e35a403b21a3c4d3f3e",
    "line" : 151,
    "diffHunk" : "@@ -0,0 +1,151 @@\n+---\n+id: remote-language-server\n+title: Remote Language Servers\n+---\n+\n+Metals has experimental support to offload certain requests to a remote language\n+server. This feature can be used to navigate large codebases when its not\n+possible to index all the code on a local computer.\n+\n+## Difference from local language servers\n+\n+There are some important differences between local and remote language servers:\n+\n+- Instead of JSON-RPC, a remote language server responds to HTTP POST requests\n+  with an `application/json` header and a JSON-formatted body. The reason HTTP\n+  is chosen over JSON-RPC is because it makes the remote language server\n+  accesible from more clients, for example via `curl`. A caveat with using HTTP\n+  instead of JSON-RPC is that it's not possible for the remote language server\n+  to push notification down to the client. In the future, we could consider\n+  using JSON-RPC via websockets instead.\n+- Instead of using absolute `file://` URIs, a remote language server uses\n+  relative `source://` URIs. For example, the absolute URI\n+  `file://path/to/workspace/src/main/scala/Address.scala` becomes the relative\n+  URI `source://src/main/scala/Address.scala` when communicating with a remote\n+  language server.\n+\n+## Methods\n+\n+Each remote language server method expects a JSON-formatted body of type\n+`JsonRpcRequest<T>`.\n+\n+```ts\n+interface JsonRpcRequest<T> {\n+  /** The JSON-RPC method name, for example textDocument/definition */\n+  method: string;\n+\n+  /** The parameter for the JSON-RPC method, for example `TextDocumentPositionParams` */\n+  params: T;\n+\n+  /** The ID of this request, can be any integer number. */\n+  id: number;\n+}\n+```\n+\n+### `textDocument/definition`\n+\n+The `textDocument/definition` request is sent from the client to the server to\n+get the list of definitions for a given position.\n+\n+_Request_:\n+\n+- method: `textDocument/definition`\n+- params: `JsonRpcRequest<TextDocumentPositionParams>`, where\n+  `TextDocumentPositionParams` is defined in LSP.\n+\n+_Response_:\n+\n+- result: `Location[]`, as defined in LSP.\n+\n+_Example request_:\n+\n+```sh\n+curl --location --request POST 'http://remote-language-server.com' \\\n+--header 'Content-Type: application/json' \\\n+--data-raw '{\n+  \"method\": \"textDocument/definition\",\n+  \"params\": {\n+    \"textDocument\": {\n+      \"uri\": \"source://src/main/scala/Address.scala\"\n+    },\n+    \"position\": {\n+      \"line\": 5,\n+      \"character\": 10\n+    }\n+  },\n+  \"id\": 10\n+}'\n+```\n+\n+_Example response_:\n+\n+```json\n+[\n+  {\n+    \"uri\": \"source://src/main/scala/User.scala\",\n+    \"range\": {\n+      \"start\": { \"line\": 61, \"character\": 15 },\n+      \"end\": { \"line\": 61, \"character\": 31 }\n+    }\n+  }\n+]\n+```\n+\n+### `textDocument/references`\n+\n+The `textDocument/references` request is sent from the client to the server to\n+get the list of all references to a symbol at a given position.\n+\n+_Request_:\n+\n+- method: `textDocument/references`\n+- params: `JsonRpcRequest<ReferenceParams>`, where `ReferenceParams` is defined\n+  in LSP.\n+\n+_Response_:\n+\n+- result: `Location[]`, as defined in LSP.\n+\n+_Example request_:\n+\n+```sh\n+curl --location --request POST 'http://remote-language-server.com' \\\n+--header 'Content-Type: application/json' \\\n+--data-raw '{\n+  \"method\": \"textDocument/references\",\n+  \"params\": {\n+    \"textDocument\": {\n+      \"uri\": \"source://src/main/scala/Address.scala\"\n+    },\n+    \"position\": {\n+      \"line\": 5,\n+      \"character\": 10\n+    },\n+    \"context\": {\n+      \"includeDeclaration\": true\n+    }\n+  },\n+  \"id\": 10\n+}'\n+```\n+\n+_Example response_:\n+\n+```json\n+[\n+  {\n+    \"uri\": \"source://src/main/scala/User.scala\",\n+    \"range\": {\n+      \"start\": { \"line\": 61, \"character\": 15 },\n+      \"end\": { \"line\": 61, \"character\": 31 }\n+    }\n+  },\n+  {\n+    \"uri\": \"source://src/main/scala/Country.scala\",\n+    \"range\": {\n+      \"start\": { \"line\": 62, \"character\": 16 },\n+      \"end\": { \"line\": 62, \"character\": 32 }\n+    }\n+  }\n+]\n+```"
  }
]