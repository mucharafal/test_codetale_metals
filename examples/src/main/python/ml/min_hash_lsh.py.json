[{
  "comments": [{
    "author": {
      "login": "sethah"
    },
    "body": "These two output empty dataframes.",
    "commit": "36fd9bc6366d58541c8306803d8742649be69098",
    "createdAt": "2017-02-07T22:15:11Z",
    "diffHunk": "@@ -0,0 +1,75 @@\n+#\n+# Licensed to the Apache Software Foundation (ASF) under one or more\n+# contributor license agreements.  See the NOTICE file distributed with\n+# this work for additional information regarding copyright ownership.\n+# The ASF licenses this file to You under the Apache License, Version 2.0\n+# (the \"License\"); you may not use this file except in compliance with\n+# the License.  You may obtain a copy of the License at\n+#\n+#    http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+#\n+\n+\n+from __future__ import print_function\n+\n+# $example on$\n+from pyspark.ml.feature import MinHashLSH\n+from pyspark.ml.linalg import Vectors\n+# $example off$\n+from pyspark.sql import SparkSession\n+\n+\"\"\"\n+An example demonstrating MinHashLSH.\n+Run with:\n+  bin/spark-submit examples/src/main/python/ml/min_hash_lsh.py\n+\"\"\"\n+\n+if __name__ == \"__main__\":\n+    spark = SparkSession \\\n+        .builder \\\n+        .appName(\"MinHashLSHExample\") \\\n+        .getOrCreate()\n+\n+    # $example on$\n+    dataA = [(0, Vectors.sparse(6, [0, 1, 2], [1.0, 1.0, 1.0]),),\n+             (1, Vectors.sparse(6, [2, 3, 4], [1.0, 1.0, 1.0]),),\n+             (2, Vectors.sparse(6, [0, 2, 4], [1.0, 1.0, 1.0]),)]\n+    dfA = spark.createDataFrame(dataA, [\"id\", \"keys\"])\n+\n+    dataB = [(3, Vectors.sparse(6, [1, 3, 5], [1.0, 1.0, 1.0]),),\n+             (4, Vectors.sparse(6, [2, 3, 5], [1.0, 1.0, 1.0]),),\n+             (5, Vectors.sparse(6, [1, 2, 4], [1.0, 1.0, 1.0]),)]\n+    dfB = spark.createDataFrame(dataB, [\"id\", \"keys\"])\n+\n+    key = Vectors.sparse(6, [1, 3], [1.0, 1.0])\n+\n+    mh = MinHashLSH(inputCol=\"keys\", outputCol=\"values\", numHashTables=3)\n+    model = mh.fit(dfA)\n+\n+    # Feature Transformation\n+    model.transform(dfA).show()\n+\n+    # Cache the transformed columns\n+    transformedA = model.transform(dfA).cache()\n+    transformedB = model.transform(dfB).cache()\n+\n+    # Approximate similarity join\n+    model.approxSimilarityJoin(dfA, dfB, 0.6).show()\n+    model.approxSimilarityJoin(transformedA, transformedB, 0.6).show()\n+\n+    # Self Join\n+    model.approxSimilarityJoin(dfA, dfA, 0.6).filter(\"datasetA.id < datasetB.id\").show()\n+\n+    # Approximate nearest neighbor search\n+    model.approxNearestNeighbors(dfA, key, 2).show()"
  }, {
    "author": {
      "login": "Yunni"
    },
    "body": "Increased the number of HashTables.",
    "commit": "36fd9bc6366d58541c8306803d8742649be69098",
    "createdAt": "2017-02-08T22:55:47Z",
    "diffHunk": "@@ -0,0 +1,75 @@\n+#\n+# Licensed to the Apache Software Foundation (ASF) under one or more\n+# contributor license agreements.  See the NOTICE file distributed with\n+# this work for additional information regarding copyright ownership.\n+# The ASF licenses this file to You under the Apache License, Version 2.0\n+# (the \"License\"); you may not use this file except in compliance with\n+# the License.  You may obtain a copy of the License at\n+#\n+#    http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+#\n+\n+\n+from __future__ import print_function\n+\n+# $example on$\n+from pyspark.ml.feature import MinHashLSH\n+from pyspark.ml.linalg import Vectors\n+# $example off$\n+from pyspark.sql import SparkSession\n+\n+\"\"\"\n+An example demonstrating MinHashLSH.\n+Run with:\n+  bin/spark-submit examples/src/main/python/ml/min_hash_lsh.py\n+\"\"\"\n+\n+if __name__ == \"__main__\":\n+    spark = SparkSession \\\n+        .builder \\\n+        .appName(\"MinHashLSHExample\") \\\n+        .getOrCreate()\n+\n+    # $example on$\n+    dataA = [(0, Vectors.sparse(6, [0, 1, 2], [1.0, 1.0, 1.0]),),\n+             (1, Vectors.sparse(6, [2, 3, 4], [1.0, 1.0, 1.0]),),\n+             (2, Vectors.sparse(6, [0, 2, 4], [1.0, 1.0, 1.0]),)]\n+    dfA = spark.createDataFrame(dataA, [\"id\", \"keys\"])\n+\n+    dataB = [(3, Vectors.sparse(6, [1, 3, 5], [1.0, 1.0, 1.0]),),\n+             (4, Vectors.sparse(6, [2, 3, 5], [1.0, 1.0, 1.0]),),\n+             (5, Vectors.sparse(6, [1, 2, 4], [1.0, 1.0, 1.0]),)]\n+    dfB = spark.createDataFrame(dataB, [\"id\", \"keys\"])\n+\n+    key = Vectors.sparse(6, [1, 3], [1.0, 1.0])\n+\n+    mh = MinHashLSH(inputCol=\"keys\", outputCol=\"values\", numHashTables=3)\n+    model = mh.fit(dfA)\n+\n+    # Feature Transformation\n+    model.transform(dfA).show()\n+\n+    # Cache the transformed columns\n+    transformedA = model.transform(dfA).cache()\n+    transformedB = model.transform(dfB).cache()\n+\n+    # Approximate similarity join\n+    model.approxSimilarityJoin(dfA, dfB, 0.6).show()\n+    model.approxSimilarityJoin(transformedA, transformedB, 0.6).show()\n+\n+    # Self Join\n+    model.approxSimilarityJoin(dfA, dfA, 0.6).filter(\"datasetA.id < datasetB.id\").show()\n+\n+    # Approximate nearest neighbor search\n+    model.approxNearestNeighbors(dfA, key, 2).show()"
  }],
  "prId": 16715
}, {
  "comments": [{
    "author": {
      "login": "sethah"
    },
    "body": "same comment about print statements here",
    "commit": "36fd9bc6366d58541c8306803d8742649be69098",
    "createdAt": "2017-02-07T22:15:28Z",
    "diffHunk": "@@ -0,0 +1,75 @@\n+#\n+# Licensed to the Apache Software Foundation (ASF) under one or more\n+# contributor license agreements.  See the NOTICE file distributed with\n+# this work for additional information regarding copyright ownership.\n+# The ASF licenses this file to You under the Apache License, Version 2.0\n+# (the \"License\"); you may not use this file except in compliance with\n+# the License.  You may obtain a copy of the License at\n+#\n+#    http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+#\n+\n+\n+from __future__ import print_function\n+\n+# $example on$\n+from pyspark.ml.feature import MinHashLSH\n+from pyspark.ml.linalg import Vectors\n+# $example off$\n+from pyspark.sql import SparkSession\n+\n+\"\"\"\n+An example demonstrating MinHashLSH.\n+Run with:\n+  bin/spark-submit examples/src/main/python/ml/min_hash_lsh.py\n+\"\"\"\n+\n+if __name__ == \"__main__\":\n+    spark = SparkSession \\\n+        .builder \\\n+        .appName(\"MinHashLSHExample\") \\\n+        .getOrCreate()\n+\n+    # $example on$\n+    dataA = [(0, Vectors.sparse(6, [0, 1, 2], [1.0, 1.0, 1.0]),),\n+             (1, Vectors.sparse(6, [2, 3, 4], [1.0, 1.0, 1.0]),),\n+             (2, Vectors.sparse(6, [0, 2, 4], [1.0, 1.0, 1.0]),)]\n+    dfA = spark.createDataFrame(dataA, [\"id\", \"keys\"])\n+\n+    dataB = [(3, Vectors.sparse(6, [1, 3, 5], [1.0, 1.0, 1.0]),),\n+             (4, Vectors.sparse(6, [2, 3, 5], [1.0, 1.0, 1.0]),),\n+             (5, Vectors.sparse(6, [1, 2, 4], [1.0, 1.0, 1.0]),)]\n+    dfB = spark.createDataFrame(dataB, [\"id\", \"keys\"])\n+\n+    key = Vectors.sparse(6, [1, 3], [1.0, 1.0])\n+\n+    mh = MinHashLSH(inputCol=\"keys\", outputCol=\"values\", numHashTables=3)\n+    model = mh.fit(dfA)\n+\n+    # Feature Transformation\n+    model.transform(dfA).show()"
  }, {
    "author": {
      "login": "Yunni"
    },
    "body": "Done.",
    "commit": "36fd9bc6366d58541c8306803d8742649be69098",
    "createdAt": "2017-02-08T22:56:59Z",
    "diffHunk": "@@ -0,0 +1,75 @@\n+#\n+# Licensed to the Apache Software Foundation (ASF) under one or more\n+# contributor license agreements.  See the NOTICE file distributed with\n+# this work for additional information regarding copyright ownership.\n+# The ASF licenses this file to You under the Apache License, Version 2.0\n+# (the \"License\"); you may not use this file except in compliance with\n+# the License.  You may obtain a copy of the License at\n+#\n+#    http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+#\n+\n+\n+from __future__ import print_function\n+\n+# $example on$\n+from pyspark.ml.feature import MinHashLSH\n+from pyspark.ml.linalg import Vectors\n+# $example off$\n+from pyspark.sql import SparkSession\n+\n+\"\"\"\n+An example demonstrating MinHashLSH.\n+Run with:\n+  bin/spark-submit examples/src/main/python/ml/min_hash_lsh.py\n+\"\"\"\n+\n+if __name__ == \"__main__\":\n+    spark = SparkSession \\\n+        .builder \\\n+        .appName(\"MinHashLSHExample\") \\\n+        .getOrCreate()\n+\n+    # $example on$\n+    dataA = [(0, Vectors.sparse(6, [0, 1, 2], [1.0, 1.0, 1.0]),),\n+             (1, Vectors.sparse(6, [2, 3, 4], [1.0, 1.0, 1.0]),),\n+             (2, Vectors.sparse(6, [0, 2, 4], [1.0, 1.0, 1.0]),)]\n+    dfA = spark.createDataFrame(dataA, [\"id\", \"keys\"])\n+\n+    dataB = [(3, Vectors.sparse(6, [1, 3, 5], [1.0, 1.0, 1.0]),),\n+             (4, Vectors.sparse(6, [2, 3, 5], [1.0, 1.0, 1.0]),),\n+             (5, Vectors.sparse(6, [1, 2, 4], [1.0, 1.0, 1.0]),)]\n+    dfB = spark.createDataFrame(dataB, [\"id\", \"keys\"])\n+\n+    key = Vectors.sparse(6, [1, 3], [1.0, 1.0])\n+\n+    mh = MinHashLSH(inputCol=\"keys\", outputCol=\"values\", numHashTables=3)\n+    model = mh.fit(dfA)\n+\n+    # Feature Transformation\n+    model.transform(dfA).show()"
  }],
  "prId": 16715
}]