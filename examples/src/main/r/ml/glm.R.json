[{
  "comments": [{
    "author": {
      "login": "felixcheung"
    },
    "body": "I think this example is a bit weird - it takes the same data to build the model and then predict with it.\r\nI suspect we are really limited in terms of how much data we have here, but we should consider building a better example which include doing a randomSplit into training and test set etc..",
    "commit": "905ffde58c9f5e51ede15cbcd693d752df6041bc",
    "createdAt": "2017-02-23T19:06:16Z",
    "diffHunk": "@@ -25,11 +25,12 @@ library(SparkR)\n sparkR.session(appName = \"SparkR-ML-glm-example\")\n \n # $example on$\n-irisDF <- suppressWarnings(createDataFrame(iris))\n+t <- as.data.frame(Titanic)\n+training <- createDataFrame(t)\n # Fit a generalized linear model of family \"gaussian\" with spark.glm\n-gaussianDF <- irisDF\n-gaussianTestDF <- irisDF\n-gaussianGLM <- spark.glm(gaussianDF, Sepal_Length ~ Sepal_Width + Species, family = \"gaussian\")\n+gaussianDF <- training\n+gaussianTestDF <- training"
  }, {
    "author": {
      "login": "felixcheung"
    },
    "body": "ditto for binomial here or kmeans.R, ml.R",
    "commit": "905ffde58c9f5e51ede15cbcd693d752df6041bc",
    "createdAt": "2017-02-23T19:06:38Z",
    "diffHunk": "@@ -25,11 +25,12 @@ library(SparkR)\n sparkR.session(appName = \"SparkR-ML-glm-example\")\n \n # $example on$\n-irisDF <- suppressWarnings(createDataFrame(iris))\n+t <- as.data.frame(Titanic)\n+training <- createDataFrame(t)\n # Fit a generalized linear model of family \"gaussian\" with spark.glm\n-gaussianDF <- irisDF\n-gaussianTestDF <- irisDF\n-gaussianGLM <- spark.glm(gaussianDF, Sepal_Length ~ Sepal_Width + Species, family = \"gaussian\")\n+gaussianDF <- training\n+gaussianTestDF <- training"
  }, {
    "author": {
      "login": "wangmiao1981"
    },
    "body": "Yes. I agree. I saw other examples using the same dataset as testing. How about fixing them all in another follow-up PR? We only focus on fixing the `iris` dataset replacement in this PR. Thanks!",
    "commit": "905ffde58c9f5e51ede15cbcd693d752df6041bc",
    "createdAt": "2017-02-23T19:54:15Z",
    "diffHunk": "@@ -25,11 +25,12 @@ library(SparkR)\n sparkR.session(appName = \"SparkR-ML-glm-example\")\n \n # $example on$\n-irisDF <- suppressWarnings(createDataFrame(iris))\n+t <- as.data.frame(Titanic)\n+training <- createDataFrame(t)\n # Fit a generalized linear model of family \"gaussian\" with spark.glm\n-gaussianDF <- irisDF\n-gaussianTestDF <- irisDF\n-gaussianGLM <- spark.glm(gaussianDF, Sepal_Length ~ Sepal_Width + Species, family = \"gaussian\")\n+gaussianDF <- training\n+gaussianTestDF <- training"
  }, {
    "author": {
      "login": "felixcheung"
    },
    "body": "we could but as I've mentioned, Titanic is really small - it might not work properly if we are split that further, so it might be something we need to change again to add the split",
    "commit": "905ffde58c9f5e51ede15cbcd693d752df6041bc",
    "createdAt": "2017-02-23T20:13:50Z",
    "diffHunk": "@@ -25,11 +25,12 @@ library(SparkR)\n sparkR.session(appName = \"SparkR-ML-glm-example\")\n \n # $example on$\n-irisDF <- suppressWarnings(createDataFrame(iris))\n+t <- as.data.frame(Titanic)\n+training <- createDataFrame(t)\n # Fit a generalized linear model of family \"gaussian\" with spark.glm\n-gaussianDF <- irisDF\n-gaussianTestDF <- irisDF\n-gaussianGLM <- spark.glm(gaussianDF, Sepal_Length ~ Sepal_Width + Species, family = \"gaussian\")\n+gaussianDF <- training\n+gaussianTestDF <- training"
  }, {
    "author": {
      "login": "wangmiao1981"
    },
    "body": "Since this is the example not the vignettes. We can use datasets in the data/mllib directory.  ",
    "commit": "905ffde58c9f5e51ede15cbcd693d752df6041bc",
    "createdAt": "2017-02-23T21:32:28Z",
    "diffHunk": "@@ -25,11 +25,12 @@ library(SparkR)\n sparkR.session(appName = \"SparkR-ML-glm-example\")\n \n # $example on$\n-irisDF <- suppressWarnings(createDataFrame(iris))\n+t <- as.data.frame(Titanic)\n+training <- createDataFrame(t)\n # Fit a generalized linear model of family \"gaussian\" with spark.glm\n-gaussianDF <- irisDF\n-gaussianTestDF <- irisDF\n-gaussianGLM <- spark.glm(gaussianDF, Sepal_Length ~ Sepal_Width + Species, family = \"gaussian\")\n+gaussianDF <- training\n+gaussianTestDF <- training"
  }],
  "prId": 17032
}, {
  "comments": [{
    "author": {
      "login": "felixcheung"
    },
    "body": "`sample` could end up having the same row in both training and test set.\r\nI think we should use randomSplit instead.",
    "commit": "905ffde58c9f5e51ede15cbcd693d752df6041bc",
    "createdAt": "2017-02-24T08:46:06Z",
    "diffHunk": "@@ -25,12 +25,12 @@ library(SparkR)\n sparkR.session(appName = \"SparkR-ML-glm-example\")\n \n # $example on$\n-t <- as.data.frame(Titanic)\n-training <- createDataFrame(t)\n+training <- read.df(\"data/mllib/sample_multiclass_classification_data.txt\", source = \"libsvm\")\n # Fit a generalized linear model of family \"gaussian\" with spark.glm\n-gaussianDF <- training\n-gaussianTestDF <- training\n-gaussianGLM <- spark.glm(gaussianDF, Freq ~ Sex + Age, family = \"gaussian\")\n+set.seed(2)\n+gaussianDF <- sample(training, TRUE, 0.7)\n+gaussianTestDF <- sample(training, TRUE, 0.3)"
  }, {
    "author": {
      "login": "wangmiao1981"
    },
    "body": "OK. I will change it. Thanks!",
    "commit": "905ffde58c9f5e51ede15cbcd693d752df6041bc",
    "createdAt": "2017-02-24T18:42:38Z",
    "diffHunk": "@@ -25,12 +25,12 @@ library(SparkR)\n sparkR.session(appName = \"SparkR-ML-glm-example\")\n \n # $example on$\n-t <- as.data.frame(Titanic)\n-training <- createDataFrame(t)\n+training <- read.df(\"data/mllib/sample_multiclass_classification_data.txt\", source = \"libsvm\")\n # Fit a generalized linear model of family \"gaussian\" with spark.glm\n-gaussianDF <- training\n-gaussianTestDF <- training\n-gaussianGLM <- spark.glm(gaussianDF, Freq ~ Sex + Age, family = \"gaussian\")\n+set.seed(2)\n+gaussianDF <- sample(training, TRUE, 0.7)\n+gaussianTestDF <- sample(training, TRUE, 0.3)"
  }],
  "prId": 17032
}]