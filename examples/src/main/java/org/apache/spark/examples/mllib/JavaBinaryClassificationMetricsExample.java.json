[{
  "comments": [{
    "author": {
      "login": "yinxusen"
    },
    "body": "add a space line here\n",
    "commit": "88512e7ff1f1d55f31a5c12b57668216d39b22b9",
    "createdAt": "2015-11-19T08:57:40Z",
    "diffHunk": "@@ -0,0 +1,111 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */",
    "line": 16
  }],
  "prId": 9689
}, {
  "comments": [{
    "author": {
      "login": "yinxusen"
    },
    "body": "add a space line here\n",
    "commit": "88512e7ff1f1d55f31a5c12b57668216d39b22b9",
    "createdAt": "2015-11-19T08:58:07Z",
    "diffHunk": "@@ -0,0 +1,111 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.spark.examples.mllib;"
  }],
  "prId": 9689
}, {
  "comments": [{
    "author": {
      "login": "yinxusen"
    },
    "body": "remove the import\n",
    "commit": "88512e7ff1f1d55f31a5c12b57668216d39b22b9",
    "createdAt": "2015-11-19T08:58:29Z",
    "diffHunk": "@@ -0,0 +1,111 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.spark.examples.mllib;\n+// $example on$\n+import scala.Tuple2;\n+\n+import org.apache.spark.api.java.*;\n+import org.apache.spark.api.java.function.Function;\n+import org.apache.spark.mllib.classification.LogisticRegressionModel;\n+import org.apache.spark.mllib.classification.LogisticRegressionWithLBFGS;\n+import org.apache.spark.mllib.evaluation.BinaryClassificationMetrics;\n+import org.apache.spark.mllib.regression.LabeledPoint;\n+import org.apache.spark.mllib.util.MLUtils;\n+import org.apache.spark.rdd.RDD;"
  }],
  "prId": 9689
}, {
  "comments": [{
    "author": {
      "login": "yinxusen"
    },
    "body": "Java Binary Classification Metrics Example\n",
    "commit": "88512e7ff1f1d55f31a5c12b57668216d39b22b9",
    "createdAt": "2015-11-19T08:59:02Z",
    "diffHunk": "@@ -0,0 +1,111 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.spark.examples.mllib;\n+// $example on$\n+import scala.Tuple2;\n+\n+import org.apache.spark.api.java.*;\n+import org.apache.spark.api.java.function.Function;\n+import org.apache.spark.mllib.classification.LogisticRegressionModel;\n+import org.apache.spark.mllib.classification.LogisticRegressionWithLBFGS;\n+import org.apache.spark.mllib.evaluation.BinaryClassificationMetrics;\n+import org.apache.spark.mllib.regression.LabeledPoint;\n+import org.apache.spark.mllib.util.MLUtils;\n+import org.apache.spark.rdd.RDD;\n+// $example off$\n+import org.apache.spark.SparkConf;\n+import org.apache.spark.SparkContext;\n+\n+public class JavaBinaryClassificationMetricsExample {\n+  public static void main(String[] args) {\n+    SparkConf conf = new SparkConf().setAppName(\"Binary Classification Metrics Example\");"
  }],
  "prId": 9689
}, {
  "comments": [{
    "author": {
      "login": "yinxusen"
    },
    "body": "The line exceeds 100 chars limit. Change it to\n\n``` java\nJavaRDD<LabeledPoint>[] splits = \n  data.randomSplit(new double[]{0.6, 0.4}, 11L);\n```\n",
    "commit": "88512e7ff1f1d55f31a5c12b57668216d39b22b9",
    "createdAt": "2015-11-19T09:00:44Z",
    "diffHunk": "@@ -0,0 +1,111 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.spark.examples.mllib;\n+// $example on$\n+import scala.Tuple2;\n+\n+import org.apache.spark.api.java.*;\n+import org.apache.spark.api.java.function.Function;\n+import org.apache.spark.mllib.classification.LogisticRegressionModel;\n+import org.apache.spark.mllib.classification.LogisticRegressionWithLBFGS;\n+import org.apache.spark.mllib.evaluation.BinaryClassificationMetrics;\n+import org.apache.spark.mllib.regression.LabeledPoint;\n+import org.apache.spark.mllib.util.MLUtils;\n+import org.apache.spark.rdd.RDD;\n+// $example off$\n+import org.apache.spark.SparkConf;\n+import org.apache.spark.SparkContext;\n+\n+public class JavaBinaryClassificationMetricsExample {\n+  public static void main(String[] args) {\n+    SparkConf conf = new SparkConf().setAppName(\"Binary Classification Metrics Example\");\n+    SparkContext sc = new SparkContext(conf);\n+    // $example on$\n+    String path = \"data/mllib/sample_binary_classification_data.txt\";\n+    JavaRDD<LabeledPoint> data = MLUtils.loadLibSVMFile(sc, path).toJavaRDD();\n+\n+    // Split initial RDD into two... [60% training data, 40% testing data].\n+    JavaRDD<LabeledPoint>[] splits = data.randomSplit(new double[]{0.6, 0.4}, 11L);"
  }],
  "prId": 9689
}, {
  "comments": [{
    "author": {
      "login": "yinxusen"
    },
    "body": "2-indention here\n",
    "commit": "88512e7ff1f1d55f31a5c12b57668216d39b22b9",
    "createdAt": "2015-11-19T09:08:38Z",
    "diffHunk": "@@ -0,0 +1,111 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.spark.examples.mllib;\n+// $example on$\n+import scala.Tuple2;\n+\n+import org.apache.spark.api.java.*;\n+import org.apache.spark.api.java.function.Function;\n+import org.apache.spark.mllib.classification.LogisticRegressionModel;\n+import org.apache.spark.mllib.classification.LogisticRegressionWithLBFGS;\n+import org.apache.spark.mllib.evaluation.BinaryClassificationMetrics;\n+import org.apache.spark.mllib.regression.LabeledPoint;\n+import org.apache.spark.mllib.util.MLUtils;\n+import org.apache.spark.rdd.RDD;\n+// $example off$\n+import org.apache.spark.SparkConf;\n+import org.apache.spark.SparkContext;\n+\n+public class JavaBinaryClassificationMetricsExample {\n+  public static void main(String[] args) {\n+    SparkConf conf = new SparkConf().setAppName(\"Binary Classification Metrics Example\");\n+    SparkContext sc = new SparkContext(conf);\n+    // $example on$\n+    String path = \"data/mllib/sample_binary_classification_data.txt\";\n+    JavaRDD<LabeledPoint> data = MLUtils.loadLibSVMFile(sc, path).toJavaRDD();\n+\n+    // Split initial RDD into two... [60% training data, 40% testing data].\n+    JavaRDD<LabeledPoint>[] splits = data.randomSplit(new double[]{0.6, 0.4}, 11L);\n+    JavaRDD<LabeledPoint> training = splits[0].cache();\n+    JavaRDD<LabeledPoint> test = splits[1];\n+\n+    // Run training algorithm to build the model.\n+    final LogisticRegressionModel model = new LogisticRegressionWithLBFGS()\n+      .setNumClasses(2)\n+      .run(training.rdd());\n+\n+    // Clear the prediction threshold so the model will return probabilities\n+    model.clearThreshold();\n+\n+    // Compute raw scores on the test set.\n+    JavaRDD<Tuple2<Object, Object>> predictionAndLabels = test.map(\n+      new Function<LabeledPoint, Tuple2<Object, Object>>() {\n+        public Tuple2<Object, Object> call(LabeledPoint p) {\n+          Double prediction = model.predict(p.features());\n+          return new Tuple2<Object, Object>(prediction, p.label());\n+        }\n+      }\n+    );\n+\n+    // Get evaluation metrics.\n+    BinaryClassificationMetrics metrics = new BinaryClassificationMetrics(predictionAndLabels.rdd());\n+\n+    // Precision by threshold\n+    JavaRDD<Tuple2<Object, Object>> precision = metrics.precisionByThreshold().toJavaRDD();\n+    System.out.println(\"Precision by threshold: \" + precision.toArray());\n+\n+    // Recall by threshold\n+    JavaRDD<Tuple2<Object, Object>> recall = metrics.recallByThreshold().toJavaRDD();\n+    System.out.println(\"Recall by threshold: \" + recall.toArray());\n+\n+    // F Score by threshold\n+    JavaRDD<Tuple2<Object, Object>> f1Score = metrics.fMeasureByThreshold().toJavaRDD();\n+    System.out.println(\"F1 Score by threshold: \" + f1Score.toArray());\n+\n+    JavaRDD<Tuple2<Object, Object>> f2Score = metrics.fMeasureByThreshold(2.0).toJavaRDD();\n+    System.out.println(\"F2 Score by threshold: \" + f2Score.toArray());\n+\n+    // Precision-recall curve\n+    JavaRDD<Tuple2<Object, Object>> prc = metrics.pr().toJavaRDD();\n+    System.out.println(\"Precision-recall curve: \" + prc.toArray());\n+\n+    // Thresholds\n+    JavaRDD<Double> thresholds = precision.map(\n+      new Function<Tuple2<Object, Object>, Double>() {\n+        public Double call(Tuple2<Object, Object> t) {\n+          return new Double(t._1().toString());\n+        }\n+      }\n+    );\n+\n+    // ROC Curve\n+    JavaRDD<Tuple2<Object, Object>> roc = metrics.roc().toJavaRDD();\n+    System.out.println(\"ROC curve: \" + roc.toArray());\n+\n+    // AUPRC\n+    System.out.println(\"Area under precision-recall curve = \" + metrics.areaUnderPR());\n+\n+    // AUROC\n+    System.out.println(\"Area under ROC = \" + metrics.areaUnderROC());\n+\n+    // Save and load model\n+    model.save(sc, \"target/tmp/LogisticRegressionModel\");\n+    LogisticRegressionModel sameModel = LogisticRegressionModel.load(sc,\n+            \"target/tmp/LogisticRegressionModel\");"
  }],
  "prId": 9689
}]