[{
  "comments": [{
    "author": {
      "login": "srowen"
    },
    "body": "It's a little safer and tidier to synchronize on `openStream` rather than the containing `object`. Looks good to me though.",
    "commit": "d486d6015ae0129ce41e6683eae37243c843ba59",
    "createdAt": "2017-04-10T12:20:00Z",
    "diffHunk": "@@ -31,21 +30,29 @@ import org.apache.spark.internal.Logging\n \n object DebugFilesystem extends Logging {\n   // Stores the set of active streams and their creation sites.\n-  private val openStreams = new ConcurrentHashMap[FSDataInputStream, Throwable]()\n+  private val openStreams = mutable.Map.empty[FSDataInputStream, Throwable]\n \n-  def clearOpenStreams(): Unit = {\n+  def addOpenStream(stream: FSDataInputStream): Unit = synchronized {"
  }],
  "prId": 17592
}]