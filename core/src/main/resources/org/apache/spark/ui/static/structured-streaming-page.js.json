[{
  "comments": [{
    "author": {
      "login": "sarutak"
    },
    "body": "I think it's more user-friendly to show the labels without mouse over.",
    "commit": "6de18cc2e20bd8ef0167a52c869c7706f67014a2",
    "createdAt": "2019-11-25T11:18:18Z",
    "diffHunk": "@@ -0,0 +1,171 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+// pre-define some colors for legends.\n+var colorPool = [\"#F8C471\", \"#F39C12\", \"#B9770E\", \"#73C6B6\", \"#16A085\", \"#117A65\", \"#B2BABB\", \"#7F8C8D\", \"#616A6B\"];\n+\n+function drawAreaStack(id, labels, values, minX, maxX, minY, maxY) {\n+    d3.select(d3.select(id).node().parentNode)\n+        .style(\"padding\", \"8px 0 8px 8px\")\n+        .style(\"border-right\", \"0px solid white\");\n+\n+    // Setup svg using Bostock's margin convention\n+    var margin = {top: 20, right: 40, bottom: 30, left: maxMarginLeftForTimeline};\n+    var width = 850 - margin.left - margin.right;\n+    var height = 300 - margin.top - margin.bottom;\n+\n+    var svg = d3.select(id)\n+        .append(\"svg\")\n+        .attr(\"width\", width + margin.left + margin.right)\n+        .attr(\"height\", height + margin.top + margin.bottom)\n+        .append(\"g\")\n+        .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n+\n+    var data = values;\n+\n+    var parse = d3.time.format(\"%H:%M:%S.%L\").parse;\n+\n+    // Transpose the data into layers\n+    var dataset = d3.layout.stack()(labels.map(function(fruit) {\n+        return data.map(function(d) {\n+            return {_x: d.x, x: parse(d.x), y: +d[fruit]};\n+        });\n+    }));\n+\n+\n+    // Set x, y and colors\n+    var x = d3.scale.ordinal()\n+        .domain(dataset[0].map(function(d) { return d.x; }))\n+        .rangeRoundBands([10, width-10], 0.02);\n+\n+    var y = d3.scale.linear()\n+        .domain([0, d3.max(dataset, function(d) {  return d3.max(d, function(d) { return d.y0 + d.y; });  })])\n+        .range([height, 0]);\n+\n+    var colors = colorPool.slice(0, labels.length)\n+\n+    // Define and draw axes\n+    var yAxis = d3.svg.axis()\n+        .scale(y)\n+        .orient(\"left\")\n+        .ticks(7)\n+        .tickFormat( function(d) { return d } );\n+\n+    var xAxis = d3.svg.axis()\n+        .scale(x)\n+        .orient(\"bottom\")\n+        .tickFormat(d3.time.format(\"%H:%M:%S.%L\"));\n+\n+    // Only show the first and last time in the graph\n+    var xline = []\n+    xline.push(x.domain()[0])\n+    xline.push(x.domain()[x.domain().length - 1])\n+    xAxis.tickValues(xline);\n+\n+    svg.append(\"g\")\n+        .attr(\"class\", \"y axis\")\n+        .call(yAxis)\n+        .append(\"text\")\n+            .attr(\"transform\", \"translate(0,\" + unitLabelYOffset + \")\")\n+            .text(\"ms\");\n+\n+    svg.append(\"g\")\n+        .attr(\"class\", \"x axis\")\n+        .attr(\"transform\", \"translate(0,\" + height + \")\")\n+        .call(xAxis);\n+\n+    // Create groups for each series, rects for each segment\n+    var groups = svg.selectAll(\"g.cost\")\n+        .data(dataset)\n+        .enter().append(\"g\")\n+        .attr(\"class\", \"cost\")\n+        .style(\"fill\", function(d, i) { return colors[i]; });\n+\n+    var rect = groups.selectAll(\"rect\")\n+        .data(function(d) { return d; })\n+        .enter()\n+        .append(\"rect\")\n+        .attr(\"x\", function(d) { return x(d.x); })\n+        .attr(\"y\", function(d) { return y(d.y0 + d.y); })\n+        .attr(\"height\", function(d) { return y(d.y0) - y(d.y0 + d.y); })\n+        .attr(\"width\", x.rangeBand())\n+        .on('mouseover', function(d) {",
    "line": 106
  }],
  "prId": 26201
}, {
  "comments": [{
    "author": {
      "login": "sarutak"
    },
    "body": "Another `NaN` issue mentioned [here](https://github.com/apache/spark/pull/26201#discussion_r344676532) seems not to be resolved.\r\n<img width=\"1429\" alt=\"スクリーンショット 2019-11-25 20 19 33\" src=\"https://user-images.githubusercontent.com/4736016/69536419-480ae600-0fc1-11ea-947e-efe08df868d2.png\">\r\n",
    "commit": "6de18cc2e20bd8ef0167a52c869c7706f67014a2",
    "createdAt": "2019-11-25T11:22:36Z",
    "diffHunk": "@@ -0,0 +1,171 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+// pre-define some colors for legends.\n+var colorPool = [\"#F8C471\", \"#F39C12\", \"#B9770E\", \"#73C6B6\", \"#16A085\", \"#117A65\", \"#B2BABB\", \"#7F8C8D\", \"#616A6B\"];\n+\n+function drawAreaStack(id, labels, values, minX, maxX, minY, maxY) {\n+    d3.select(d3.select(id).node().parentNode)\n+        .style(\"padding\", \"8px 0 8px 8px\")\n+        .style(\"border-right\", \"0px solid white\");\n+\n+    // Setup svg using Bostock's margin convention\n+    var margin = {top: 20, right: 40, bottom: 30, left: maxMarginLeftForTimeline};\n+    var width = 850 - margin.left - margin.right;\n+    var height = 300 - margin.top - margin.bottom;\n+\n+    var svg = d3.select(id)\n+        .append(\"svg\")\n+        .attr(\"width\", width + margin.left + margin.right)\n+        .attr(\"height\", height + margin.top + margin.bottom)\n+        .append(\"g\")\n+        .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n+\n+    var data = values;\n+\n+    var parse = d3.time.format(\"%H:%M:%S.%L\").parse;\n+\n+    // Transpose the data into layers\n+    var dataset = d3.layout.stack()(labels.map(function(fruit) {\n+        return data.map(function(d) {\n+            return {_x: d.x, x: parse(d.x), y: +d[fruit]};\n+        });\n+    }));\n+\n+\n+    // Set x, y and colors\n+    var x = d3.scale.ordinal()\n+        .domain(dataset[0].map(function(d) { return d.x; }))\n+        .rangeRoundBands([10, width-10], 0.02);\n+\n+    var y = d3.scale.linear()\n+        .domain([0, d3.max(dataset, function(d) {  return d3.max(d, function(d) { return d.y0 + d.y; });  })])\n+        .range([height, 0]);\n+\n+    var colors = colorPool.slice(0, labels.length)\n+\n+    // Define and draw axes\n+    var yAxis = d3.svg.axis()\n+        .scale(y)\n+        .orient(\"left\")\n+        .ticks(7)\n+        .tickFormat( function(d) { return d } );\n+\n+    var xAxis = d3.svg.axis()\n+        .scale(x)\n+        .orient(\"bottom\")\n+        .tickFormat(d3.time.format(\"%H:%M:%S.%L\"));\n+\n+    // Only show the first and last time in the graph\n+    var xline = []\n+    xline.push(x.domain()[0])\n+    xline.push(x.domain()[x.domain().length - 1])\n+    xAxis.tickValues(xline);\n+\n+    svg.append(\"g\")\n+        .attr(\"class\", \"y axis\")\n+        .call(yAxis)\n+        .append(\"text\")\n+            .attr(\"transform\", \"translate(0,\" + unitLabelYOffset + \")\")\n+            .text(\"ms\");\n+\n+    svg.append(\"g\")\n+        .attr(\"class\", \"x axis\")\n+        .attr(\"transform\", \"translate(0,\" + height + \")\")\n+        .call(xAxis);\n+\n+    // Create groups for each series, rects for each segment\n+    var groups = svg.selectAll(\"g.cost\")\n+        .data(dataset)\n+        .enter().append(\"g\")\n+        .attr(\"class\", \"cost\")\n+        .style(\"fill\", function(d, i) { return colors[i]; });\n+\n+    var rect = groups.selectAll(\"rect\")\n+        .data(function(d) { return d; })\n+        .enter()\n+        .append(\"rect\")\n+        .attr(\"x\", function(d) { return x(d.x); })\n+        .attr(\"y\", function(d) { return y(d.y0 + d.y); })\n+        .attr(\"height\", function(d) { return y(d.y0) - y(d.y0 + d.y); })",
    "line": 104
  }],
  "prId": 26201
}, {
  "comments": [{
    "author": {
      "login": "sarutak"
    },
    "body": "Those colors have very similar hue so it's difficult to distinguish one from another one.\r\nI think, previous choice of colors are much better.",
    "commit": "6de18cc2e20bd8ef0167a52c869c7706f67014a2",
    "createdAt": "2019-11-25T11:26:24Z",
    "diffHunk": "@@ -0,0 +1,171 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+// pre-define some colors for legends.\n+var colorPool = [\"#F8C471\", \"#F39C12\", \"#B9770E\", \"#73C6B6\", \"#16A085\", \"#117A65\", \"#B2BABB\", \"#7F8C8D\", \"#616A6B\"];",
    "line": 19
  }],
  "prId": 26201
}]