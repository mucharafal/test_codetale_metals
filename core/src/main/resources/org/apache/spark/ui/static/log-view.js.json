[{
  "comments": [{
    "author": {
      "login": "sarutak"
    },
    "body": "It's better to append `;` to all the variable declarations above.\nAlso, I think `btnHehgit` is not used anywhere.\n",
    "commit": "293f1a4ebdd355152127e8089c2520ce0ff1bf15",
    "createdAt": "2016-04-04T04:23:35Z",
    "diffHunk": "@@ -0,0 +1,125 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+var baseParams\n+\n+var curLogLength\n+var startByte\n+var endByte\n+var totalLogLength\n+\n+var byteLength\n+var btnHeight = 30\n+"
  }],
  "prId": 10910
}, {
  "comments": [{
    "author": {
      "login": "sarutak"
    },
    "body": "It's not good to repeat a query for the same dom-objects like `$(.log-content)`.\nSimilar repetitions are in some places in this change.\n",
    "commit": "293f1a4ebdd355152127e8089c2520ce0ff1bf15",
    "createdAt": "2016-04-04T04:29:43Z",
    "diffHunk": "@@ -0,0 +1,125 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+var baseParams\n+\n+var curLogLength\n+var startByte\n+var endByte\n+var totalLogLength\n+\n+var byteLength\n+var btnHeight = 30\n+\n+function setLogScroll(oldHeight) {\n+  $(\".log-content\").scrollTop($(\".log-content\")[0].scrollHeight - oldHeight);\n+}\n+\n+function tailLog() {\n+  $(\".log-content\").scrollTop($(\".log-content\")[0].scrollHeight);\n+}"
  }],
  "prId": 10910
}, {
  "comments": [{
    "author": {
      "login": "sarutak"
    },
    "body": "`;` is redundant.\n",
    "commit": "293f1a4ebdd355152127e8089c2520ce0ff1bf15",
    "createdAt": "2016-04-04T04:32:35Z",
    "diffHunk": "@@ -0,0 +1,125 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+var baseParams\n+\n+var curLogLength\n+var startByte\n+var endByte\n+var totalLogLength\n+\n+var byteLength\n+var btnHeight = 30\n+\n+function setLogScroll(oldHeight) {\n+  $(\".log-content\").scrollTop($(\".log-content\")[0].scrollHeight - oldHeight);\n+}\n+\n+function tailLog() {\n+  $(\".log-content\").scrollTop($(\".log-content\")[0].scrollHeight);\n+}\n+\n+function setLogData() {\n+  $('#log-data').html(\"Showing \" + curLogLength + \" Bytes: \" + startByte\n+    + \" - \" + endByte + \" of \" + totalLogLength);\n+}\n+\n+function disableMoreButton() {\n+  $(\".log-more-btn\").attr(\"disabled\", \"disabled\");;"
  }],
  "prId": 10910
}, {
  "comments": [{
    "author": {
      "login": "sarutak"
    },
    "body": "All we need to do here is to check whether the log size is bigger. So, can we somehow check it without receiving the first 100 KB of the log?\n",
    "commit": "293f1a4ebdd355152127e8089c2520ce0ff1bf15",
    "createdAt": "2016-04-04T06:51:03Z",
    "diffHunk": "@@ -0,0 +1,125 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+var baseParams\n+\n+var curLogLength\n+var startByte\n+var endByte\n+var totalLogLength\n+\n+var byteLength\n+var btnHeight = 30\n+\n+function setLogScroll(oldHeight) {\n+  $(\".log-content\").scrollTop($(\".log-content\")[0].scrollHeight - oldHeight);\n+}\n+\n+function tailLog() {\n+  $(\".log-content\").scrollTop($(\".log-content\")[0].scrollHeight);\n+}\n+\n+function setLogData() {\n+  $('#log-data').html(\"Showing \" + curLogLength + \" Bytes: \" + startByte\n+    + \" - \" + endByte + \" of \" + totalLogLength);\n+}\n+\n+function disableMoreButton() {\n+  $(\".log-more-btn\").attr(\"disabled\", \"disabled\");;\n+  $(\".log-more-btn\").html(\"Top of Log\");\n+}\n+\n+function noNewAlert() {\n+  $(\".no-new-alert\").css(\"display\", \"block\");\n+  window.setTimeout(function () {$(\".no-new-alert\").css(\"display\", \"none\");}, 4000);\n+}\n+\n+function loadMore() {\n+  var offset = Math.max(startByte - byteLength, 0);\n+  var newLogLength = Math.min(curLogLength + byteLength, totalLogLength);\n+\n+  $.ajax({\n+    type: \"GET\",\n+    url: \"/log\" + baseParams + \"&offset=\" + offset + \"&byteLength=\" + byteLength,\n+    success: function (data) {\n+      var oldHeight = $(\".log-content\")[0].scrollHeight;\n+      var dataInfo = data.substring(0, data.indexOf('\\n')).match(/\\d+/g);\n+      var retStartByte = dataInfo[0];\n+      var retLogLength = dataInfo[2];\n+\n+      var cleanData = data.substring(data.indexOf('\\n') + 1).trim();\n+      if (retStartByte == 0) {\n+        cleanData = cleanData.substring(0, startByte);\n+        disableMoreButton();\n+      }\n+      $(\"pre\", \".log-content\").prepend(cleanData);\n+\n+      curLogLength = curLogLength + (startByte - retStartByte);\n+      startByte = retStartByte;\n+      totalLogLength = retLogLength;\n+      setLogScroll(oldHeight);\n+      setLogData();\n+    }\n+  });\n+}\n+\n+function loadNew() {\n+  $.ajax({\n+    type: \"GET\",\n+    url: \"/log\" + baseParams,\n+    success: function (data) {"
  }, {
    "author": {
      "login": "ajbozarth"
    },
    "body": "I've added `+ \"&byteLength=0\"` so the only data returned will be the info line, or we're you thinking something different?\n",
    "commit": "293f1a4ebdd355152127e8089c2520ce0ff1bf15",
    "createdAt": "2016-04-07T20:13:44Z",
    "diffHunk": "@@ -0,0 +1,125 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+var baseParams\n+\n+var curLogLength\n+var startByte\n+var endByte\n+var totalLogLength\n+\n+var byteLength\n+var btnHeight = 30\n+\n+function setLogScroll(oldHeight) {\n+  $(\".log-content\").scrollTop($(\".log-content\")[0].scrollHeight - oldHeight);\n+}\n+\n+function tailLog() {\n+  $(\".log-content\").scrollTop($(\".log-content\")[0].scrollHeight);\n+}\n+\n+function setLogData() {\n+  $('#log-data').html(\"Showing \" + curLogLength + \" Bytes: \" + startByte\n+    + \" - \" + endByte + \" of \" + totalLogLength);\n+}\n+\n+function disableMoreButton() {\n+  $(\".log-more-btn\").attr(\"disabled\", \"disabled\");;\n+  $(\".log-more-btn\").html(\"Top of Log\");\n+}\n+\n+function noNewAlert() {\n+  $(\".no-new-alert\").css(\"display\", \"block\");\n+  window.setTimeout(function () {$(\".no-new-alert\").css(\"display\", \"none\");}, 4000);\n+}\n+\n+function loadMore() {\n+  var offset = Math.max(startByte - byteLength, 0);\n+  var newLogLength = Math.min(curLogLength + byteLength, totalLogLength);\n+\n+  $.ajax({\n+    type: \"GET\",\n+    url: \"/log\" + baseParams + \"&offset=\" + offset + \"&byteLength=\" + byteLength,\n+    success: function (data) {\n+      var oldHeight = $(\".log-content\")[0].scrollHeight;\n+      var dataInfo = data.substring(0, data.indexOf('\\n')).match(/\\d+/g);\n+      var retStartByte = dataInfo[0];\n+      var retLogLength = dataInfo[2];\n+\n+      var cleanData = data.substring(data.indexOf('\\n') + 1).trim();\n+      if (retStartByte == 0) {\n+        cleanData = cleanData.substring(0, startByte);\n+        disableMoreButton();\n+      }\n+      $(\"pre\", \".log-content\").prepend(cleanData);\n+\n+      curLogLength = curLogLength + (startByte - retStartByte);\n+      startByte = retStartByte;\n+      totalLogLength = retLogLength;\n+      setLogScroll(oldHeight);\n+      setLogData();\n+    }\n+  });\n+}\n+\n+function loadNew() {\n+  $.ajax({\n+    type: \"GET\",\n+    url: \"/log\" + baseParams,\n+    success: function (data) {"
  }],
  "prId": 10910
}, {
  "comments": [{
    "author": {
      "login": "sarutak"
    },
    "body": "I think we should not trim.\nInstead of trimming, you can replace `println` with `print`  [here](https://github.com/apache/spark/blob/1808465855a8e2ce554b024ad5ff530457584aed/core/src/main/scala/org/apache/spark/ui/JettyUtils.scala#L87).\n",
    "commit": "293f1a4ebdd355152127e8089c2520ce0ff1bf15",
    "createdAt": "2016-04-04T07:41:59Z",
    "diffHunk": "@@ -0,0 +1,125 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+var baseParams\n+\n+var curLogLength\n+var startByte\n+var endByte\n+var totalLogLength\n+\n+var byteLength\n+var btnHeight = 30\n+\n+function setLogScroll(oldHeight) {\n+  $(\".log-content\").scrollTop($(\".log-content\")[0].scrollHeight - oldHeight);\n+}\n+\n+function tailLog() {\n+  $(\".log-content\").scrollTop($(\".log-content\")[0].scrollHeight);\n+}\n+\n+function setLogData() {\n+  $('#log-data').html(\"Showing \" + curLogLength + \" Bytes: \" + startByte\n+    + \" - \" + endByte + \" of \" + totalLogLength);\n+}\n+\n+function disableMoreButton() {\n+  $(\".log-more-btn\").attr(\"disabled\", \"disabled\");;\n+  $(\".log-more-btn\").html(\"Top of Log\");\n+}\n+\n+function noNewAlert() {\n+  $(\".no-new-alert\").css(\"display\", \"block\");\n+  window.setTimeout(function () {$(\".no-new-alert\").css(\"display\", \"none\");}, 4000);\n+}\n+\n+function loadMore() {\n+  var offset = Math.max(startByte - byteLength, 0);\n+  var newLogLength = Math.min(curLogLength + byteLength, totalLogLength);\n+\n+  $.ajax({\n+    type: \"GET\",\n+    url: \"/log\" + baseParams + \"&offset=\" + offset + \"&byteLength=\" + byteLength,\n+    success: function (data) {\n+      var oldHeight = $(\".log-content\")[0].scrollHeight;\n+      var dataInfo = data.substring(0, data.indexOf('\\n')).match(/\\d+/g);\n+      var retStartByte = dataInfo[0];\n+      var retLogLength = dataInfo[2];\n+\n+      var cleanData = data.substring(data.indexOf('\\n') + 1).trim();\n+      if (retStartByte == 0) {\n+        cleanData = cleanData.substring(0, startByte);\n+        disableMoreButton();\n+      }\n+      $(\"pre\", \".log-content\").prepend(cleanData);\n+\n+      curLogLength = curLogLength + (startByte - retStartByte);\n+      startByte = retStartByte;\n+      totalLogLength = retLogLength;\n+      setLogScroll(oldHeight);\n+      setLogData();\n+    }\n+  });\n+}\n+\n+function loadNew() {\n+  $.ajax({\n+    type: \"GET\",\n+    url: \"/log\" + baseParams,\n+    success: function (data) {\n+      var dataInfo = data.substring(0, data.indexOf('\\n')).match(/\\d+/g);\n+      var newDataLen = dataInfo[2] - totalLogLength;\n+      if (newDataLen != 0) {\n+        $.ajax({\n+          type: \"GET\",\n+          url: \"/log\" + baseParams + \"&byteLength=\" + newDataLen,\n+          success: function (data) {\n+            var dataInfo = data.substring(0, data.indexOf('\\n')).match(/\\d+/g);\n+            var retStartByte = dataInfo[0];\n+            var retEndByte = dataInfo[1];\n+            var retLogLength = dataInfo[2];\n+\n+            var cleanData = data.substring(data.indexOf('\\n') + 1).trim();"
  }, {
    "author": {
      "login": "ajbozarth"
    },
    "body": "I was able to remove the `trim`s by changing that line in JettyUtils, I'm currently looking into and testing it, but wouldn't this change the expected results of other HTTP requests to the API?\n",
    "commit": "293f1a4ebdd355152127e8089c2520ce0ff1bf15",
    "createdAt": "2016-04-07T20:18:31Z",
    "diffHunk": "@@ -0,0 +1,125 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+var baseParams\n+\n+var curLogLength\n+var startByte\n+var endByte\n+var totalLogLength\n+\n+var byteLength\n+var btnHeight = 30\n+\n+function setLogScroll(oldHeight) {\n+  $(\".log-content\").scrollTop($(\".log-content\")[0].scrollHeight - oldHeight);\n+}\n+\n+function tailLog() {\n+  $(\".log-content\").scrollTop($(\".log-content\")[0].scrollHeight);\n+}\n+\n+function setLogData() {\n+  $('#log-data').html(\"Showing \" + curLogLength + \" Bytes: \" + startByte\n+    + \" - \" + endByte + \" of \" + totalLogLength);\n+}\n+\n+function disableMoreButton() {\n+  $(\".log-more-btn\").attr(\"disabled\", \"disabled\");;\n+  $(\".log-more-btn\").html(\"Top of Log\");\n+}\n+\n+function noNewAlert() {\n+  $(\".no-new-alert\").css(\"display\", \"block\");\n+  window.setTimeout(function () {$(\".no-new-alert\").css(\"display\", \"none\");}, 4000);\n+}\n+\n+function loadMore() {\n+  var offset = Math.max(startByte - byteLength, 0);\n+  var newLogLength = Math.min(curLogLength + byteLength, totalLogLength);\n+\n+  $.ajax({\n+    type: \"GET\",\n+    url: \"/log\" + baseParams + \"&offset=\" + offset + \"&byteLength=\" + byteLength,\n+    success: function (data) {\n+      var oldHeight = $(\".log-content\")[0].scrollHeight;\n+      var dataInfo = data.substring(0, data.indexOf('\\n')).match(/\\d+/g);\n+      var retStartByte = dataInfo[0];\n+      var retLogLength = dataInfo[2];\n+\n+      var cleanData = data.substring(data.indexOf('\\n') + 1).trim();\n+      if (retStartByte == 0) {\n+        cleanData = cleanData.substring(0, startByte);\n+        disableMoreButton();\n+      }\n+      $(\"pre\", \".log-content\").prepend(cleanData);\n+\n+      curLogLength = curLogLength + (startByte - retStartByte);\n+      startByte = retStartByte;\n+      totalLogLength = retLogLength;\n+      setLogScroll(oldHeight);\n+      setLogData();\n+    }\n+  });\n+}\n+\n+function loadNew() {\n+  $.ajax({\n+    type: \"GET\",\n+    url: \"/log\" + baseParams,\n+    success: function (data) {\n+      var dataInfo = data.substring(0, data.indexOf('\\n')).match(/\\d+/g);\n+      var newDataLen = dataInfo[2] - totalLogLength;\n+      if (newDataLen != 0) {\n+        $.ajax({\n+          type: \"GET\",\n+          url: \"/log\" + baseParams + \"&byteLength=\" + newDataLen,\n+          success: function (data) {\n+            var dataInfo = data.substring(0, data.indexOf('\\n')).match(/\\d+/g);\n+            var retStartByte = dataInfo[0];\n+            var retEndByte = dataInfo[1];\n+            var retLogLength = dataInfo[2];\n+\n+            var cleanData = data.substring(data.indexOf('\\n') + 1).trim();"
  }],
  "prId": 10910
}, {
  "comments": [{
    "author": {
      "login": "sarutak"
    },
    "body": "We don't need to trim.\n",
    "commit": "293f1a4ebdd355152127e8089c2520ce0ff1bf15",
    "createdAt": "2016-04-04T07:42:33Z",
    "diffHunk": "@@ -0,0 +1,125 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+var baseParams\n+\n+var curLogLength\n+var startByte\n+var endByte\n+var totalLogLength\n+\n+var byteLength\n+var btnHeight = 30\n+\n+function setLogScroll(oldHeight) {\n+  $(\".log-content\").scrollTop($(\".log-content\")[0].scrollHeight - oldHeight);\n+}\n+\n+function tailLog() {\n+  $(\".log-content\").scrollTop($(\".log-content\")[0].scrollHeight);\n+}\n+\n+function setLogData() {\n+  $('#log-data').html(\"Showing \" + curLogLength + \" Bytes: \" + startByte\n+    + \" - \" + endByte + \" of \" + totalLogLength);\n+}\n+\n+function disableMoreButton() {\n+  $(\".log-more-btn\").attr(\"disabled\", \"disabled\");;\n+  $(\".log-more-btn\").html(\"Top of Log\");\n+}\n+\n+function noNewAlert() {\n+  $(\".no-new-alert\").css(\"display\", \"block\");\n+  window.setTimeout(function () {$(\".no-new-alert\").css(\"display\", \"none\");}, 4000);\n+}\n+\n+function loadMore() {\n+  var offset = Math.max(startByte - byteLength, 0);\n+  var newLogLength = Math.min(curLogLength + byteLength, totalLogLength);\n+\n+  $.ajax({\n+    type: \"GET\",\n+    url: \"/log\" + baseParams + \"&offset=\" + offset + \"&byteLength=\" + byteLength,\n+    success: function (data) {\n+      var oldHeight = $(\".log-content\")[0].scrollHeight;\n+      var dataInfo = data.substring(0, data.indexOf('\\n')).match(/\\d+/g);\n+      var retStartByte = dataInfo[0];\n+      var retLogLength = dataInfo[2];\n+\n+      var cleanData = data.substring(data.indexOf('\\n') + 1).trim();"
  }],
  "prId": 10910
}, {
  "comments": [{
    "author": {
      "login": "sarutak"
    },
    "body": "It's better not to repeat `data.indexOf` in this `success` function.\n",
    "commit": "293f1a4ebdd355152127e8089c2520ce0ff1bf15",
    "createdAt": "2016-04-04T07:51:26Z",
    "diffHunk": "@@ -0,0 +1,125 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+var baseParams\n+\n+var curLogLength\n+var startByte\n+var endByte\n+var totalLogLength\n+\n+var byteLength\n+var btnHeight = 30\n+\n+function setLogScroll(oldHeight) {\n+  $(\".log-content\").scrollTop($(\".log-content\")[0].scrollHeight - oldHeight);\n+}\n+\n+function tailLog() {\n+  $(\".log-content\").scrollTop($(\".log-content\")[0].scrollHeight);\n+}\n+\n+function setLogData() {\n+  $('#log-data').html(\"Showing \" + curLogLength + \" Bytes: \" + startByte\n+    + \" - \" + endByte + \" of \" + totalLogLength);\n+}\n+\n+function disableMoreButton() {\n+  $(\".log-more-btn\").attr(\"disabled\", \"disabled\");;\n+  $(\".log-more-btn\").html(\"Top of Log\");\n+}\n+\n+function noNewAlert() {\n+  $(\".no-new-alert\").css(\"display\", \"block\");\n+  window.setTimeout(function () {$(\".no-new-alert\").css(\"display\", \"none\");}, 4000);\n+}\n+\n+function loadMore() {\n+  var offset = Math.max(startByte - byteLength, 0);\n+  var newLogLength = Math.min(curLogLength + byteLength, totalLogLength);\n+\n+  $.ajax({\n+    type: \"GET\",\n+    url: \"/log\" + baseParams + \"&offset=\" + offset + \"&byteLength=\" + byteLength,\n+    success: function (data) {\n+      var oldHeight = $(\".log-content\")[0].scrollHeight;\n+      var dataInfo = data.substring(0, data.indexOf('\\n')).match(/\\d+/g);\n+      var retStartByte = dataInfo[0];\n+      var retLogLength = dataInfo[2];\n+\n+      var cleanData = data.substring(data.indexOf('\\n') + 1).trim();\n+      if (retStartByte == 0) {\n+        cleanData = cleanData.substring(0, startByte);\n+        disableMoreButton();\n+      }\n+      $(\"pre\", \".log-content\").prepend(cleanData);\n+\n+      curLogLength = curLogLength + (startByte - retStartByte);\n+      startByte = retStartByte;\n+      totalLogLength = retLogLength;\n+      setLogScroll(oldHeight);\n+      setLogData();\n+    }\n+  });\n+}\n+\n+function loadNew() {\n+  $.ajax({\n+    type: \"GET\",\n+    url: \"/log\" + baseParams,\n+    success: function (data) {\n+      var dataInfo = data.substring(0, data.indexOf('\\n')).match(/\\d+/g);\n+      var newDataLen = dataInfo[2] - totalLogLength;\n+      if (newDataLen != 0) {\n+        $.ajax({\n+          type: \"GET\",\n+          url: \"/log\" + baseParams + \"&byteLength=\" + newDataLen,\n+          success: function (data) {\n+            var dataInfo = data.substring(0, data.indexOf('\\n')).match(/\\d+/g);"
  }],
  "prId": 10910
}, {
  "comments": [{
    "author": {
      "login": "sarutak"
    },
    "body": "As I mentioned below, we should not repeat `indexOf`.\n",
    "commit": "293f1a4ebdd355152127e8089c2520ce0ff1bf15",
    "createdAt": "2016-04-04T08:13:48Z",
    "diffHunk": "@@ -0,0 +1,125 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+var baseParams\n+\n+var curLogLength\n+var startByte\n+var endByte\n+var totalLogLength\n+\n+var byteLength\n+var btnHeight = 30\n+\n+function setLogScroll(oldHeight) {\n+  $(\".log-content\").scrollTop($(\".log-content\")[0].scrollHeight - oldHeight);\n+}\n+\n+function tailLog() {\n+  $(\".log-content\").scrollTop($(\".log-content\")[0].scrollHeight);\n+}\n+\n+function setLogData() {\n+  $('#log-data').html(\"Showing \" + curLogLength + \" Bytes: \" + startByte\n+    + \" - \" + endByte + \" of \" + totalLogLength);\n+}\n+\n+function disableMoreButton() {\n+  $(\".log-more-btn\").attr(\"disabled\", \"disabled\");;\n+  $(\".log-more-btn\").html(\"Top of Log\");\n+}\n+\n+function noNewAlert() {\n+  $(\".no-new-alert\").css(\"display\", \"block\");\n+  window.setTimeout(function () {$(\".no-new-alert\").css(\"display\", \"none\");}, 4000);\n+}\n+\n+function loadMore() {\n+  var offset = Math.max(startByte - byteLength, 0);\n+  var newLogLength = Math.min(curLogLength + byteLength, totalLogLength);\n+\n+  $.ajax({\n+    type: \"GET\",\n+    url: \"/log\" + baseParams + \"&offset=\" + offset + \"&byteLength=\" + byteLength,\n+    success: function (data) {\n+      var oldHeight = $(\".log-content\")[0].scrollHeight;\n+      var dataInfo = data.substring(0, data.indexOf('\\n')).match(/\\d+/g);"
  }],
  "prId": 10910
}, {
  "comments": [{
    "author": {
      "login": "sarutak"
    },
    "body": "This line is not needed.\n",
    "commit": "293f1a4ebdd355152127e8089c2520ce0ff1bf15",
    "createdAt": "2016-04-04T11:46:24Z",
    "diffHunk": "@@ -0,0 +1,125 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+var baseParams\n+\n+var curLogLength\n+var startByte\n+var endByte\n+var totalLogLength\n+\n+var byteLength\n+var btnHeight = 30\n+\n+function setLogScroll(oldHeight) {\n+  $(\".log-content\").scrollTop($(\".log-content\")[0].scrollHeight - oldHeight);\n+}\n+\n+function tailLog() {\n+  $(\".log-content\").scrollTop($(\".log-content\")[0].scrollHeight);\n+}\n+\n+function setLogData() {\n+  $('#log-data').html(\"Showing \" + curLogLength + \" Bytes: \" + startByte\n+    + \" - \" + endByte + \" of \" + totalLogLength);\n+}\n+\n+function disableMoreButton() {\n+  $(\".log-more-btn\").attr(\"disabled\", \"disabled\");;\n+  $(\".log-more-btn\").html(\"Top of Log\");\n+}\n+\n+function noNewAlert() {\n+  $(\".no-new-alert\").css(\"display\", \"block\");\n+  window.setTimeout(function () {$(\".no-new-alert\").css(\"display\", \"none\");}, 4000);\n+}\n+\n+function loadMore() {\n+  var offset = Math.max(startByte - byteLength, 0);\n+  var newLogLength = Math.min(curLogLength + byteLength, totalLogLength);\n+\n+  $.ajax({\n+    type: \"GET\",\n+    url: \"/log\" + baseParams + \"&offset=\" + offset + \"&byteLength=\" + byteLength,\n+    success: function (data) {\n+      var oldHeight = $(\".log-content\")[0].scrollHeight;\n+      var dataInfo = data.substring(0, data.indexOf('\\n')).match(/\\d+/g);\n+      var retStartByte = dataInfo[0];\n+      var retLogLength = dataInfo[2];\n+\n+      var cleanData = data.substring(data.indexOf('\\n') + 1).trim();\n+      if (retStartByte == 0) {\n+        cleanData = cleanData.substring(0, startByte);"
  }, {
    "author": {
      "login": "ajbozarth"
    },
    "body": "This did what the `Math.min` you suggest above did, but after getting the data (much cleaner with the `Math.min`, thanks)\n",
    "commit": "293f1a4ebdd355152127e8089c2520ce0ff1bf15",
    "createdAt": "2016-04-07T20:12:01Z",
    "diffHunk": "@@ -0,0 +1,125 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+var baseParams\n+\n+var curLogLength\n+var startByte\n+var endByte\n+var totalLogLength\n+\n+var byteLength\n+var btnHeight = 30\n+\n+function setLogScroll(oldHeight) {\n+  $(\".log-content\").scrollTop($(\".log-content\")[0].scrollHeight - oldHeight);\n+}\n+\n+function tailLog() {\n+  $(\".log-content\").scrollTop($(\".log-content\")[0].scrollHeight);\n+}\n+\n+function setLogData() {\n+  $('#log-data').html(\"Showing \" + curLogLength + \" Bytes: \" + startByte\n+    + \" - \" + endByte + \" of \" + totalLogLength);\n+}\n+\n+function disableMoreButton() {\n+  $(\".log-more-btn\").attr(\"disabled\", \"disabled\");;\n+  $(\".log-more-btn\").html(\"Top of Log\");\n+}\n+\n+function noNewAlert() {\n+  $(\".no-new-alert\").css(\"display\", \"block\");\n+  window.setTimeout(function () {$(\".no-new-alert\").css(\"display\", \"none\");}, 4000);\n+}\n+\n+function loadMore() {\n+  var offset = Math.max(startByte - byteLength, 0);\n+  var newLogLength = Math.min(curLogLength + byteLength, totalLogLength);\n+\n+  $.ajax({\n+    type: \"GET\",\n+    url: \"/log\" + baseParams + \"&offset=\" + offset + \"&byteLength=\" + byteLength,\n+    success: function (data) {\n+      var oldHeight = $(\".log-content\")[0].scrollHeight;\n+      var dataInfo = data.substring(0, data.indexOf('\\n')).match(/\\d+/g);\n+      var retStartByte = dataInfo[0];\n+      var retLogLength = dataInfo[2];\n+\n+      var cleanData = data.substring(data.indexOf('\\n') + 1).trim();\n+      if (retStartByte == 0) {\n+        cleanData = cleanData.substring(0, startByte);"
  }],
  "prId": 10910
}, {
  "comments": [{
    "author": {
      "login": "sarutak"
    },
    "body": "`newLogLength` is not used.\n",
    "commit": "293f1a4ebdd355152127e8089c2520ce0ff1bf15",
    "createdAt": "2016-04-04T11:46:37Z",
    "diffHunk": "@@ -0,0 +1,125 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+var baseParams\n+\n+var curLogLength\n+var startByte\n+var endByte\n+var totalLogLength\n+\n+var byteLength\n+var btnHeight = 30\n+\n+function setLogScroll(oldHeight) {\n+  $(\".log-content\").scrollTop($(\".log-content\")[0].scrollHeight - oldHeight);\n+}\n+\n+function tailLog() {\n+  $(\".log-content\").scrollTop($(\".log-content\")[0].scrollHeight);\n+}\n+\n+function setLogData() {\n+  $('#log-data').html(\"Showing \" + curLogLength + \" Bytes: \" + startByte\n+    + \" - \" + endByte + \" of \" + totalLogLength);\n+}\n+\n+function disableMoreButton() {\n+  $(\".log-more-btn\").attr(\"disabled\", \"disabled\");;\n+  $(\".log-more-btn\").html(\"Top of Log\");\n+}\n+\n+function noNewAlert() {\n+  $(\".no-new-alert\").css(\"display\", \"block\");\n+  window.setTimeout(function () {$(\".no-new-alert\").css(\"display\", \"none\");}, 4000);\n+}\n+\n+function loadMore() {\n+  var offset = Math.max(startByte - byteLength, 0);\n+  var newLogLength = Math.min(curLogLength + byteLength, totalLogLength);"
  }],
  "prId": 10910
}, {
  "comments": [{
    "author": {
      "login": "sarutak"
    },
    "body": "We should receive `Math.min(byteLength, startByte)` bytes of data instead of `byteLength` bytes.\n",
    "commit": "293f1a4ebdd355152127e8089c2520ce0ff1bf15",
    "createdAt": "2016-04-04T11:48:45Z",
    "diffHunk": "@@ -0,0 +1,125 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+var baseParams\n+\n+var curLogLength\n+var startByte\n+var endByte\n+var totalLogLength\n+\n+var byteLength\n+var btnHeight = 30\n+\n+function setLogScroll(oldHeight) {\n+  $(\".log-content\").scrollTop($(\".log-content\")[0].scrollHeight - oldHeight);\n+}\n+\n+function tailLog() {\n+  $(\".log-content\").scrollTop($(\".log-content\")[0].scrollHeight);\n+}\n+\n+function setLogData() {\n+  $('#log-data').html(\"Showing \" + curLogLength + \" Bytes: \" + startByte\n+    + \" - \" + endByte + \" of \" + totalLogLength);\n+}\n+\n+function disableMoreButton() {\n+  $(\".log-more-btn\").attr(\"disabled\", \"disabled\");;\n+  $(\".log-more-btn\").html(\"Top of Log\");\n+}\n+\n+function noNewAlert() {\n+  $(\".no-new-alert\").css(\"display\", \"block\");\n+  window.setTimeout(function () {$(\".no-new-alert\").css(\"display\", \"none\");}, 4000);\n+}\n+\n+function loadMore() {\n+  var offset = Math.max(startByte - byteLength, 0);\n+  var newLogLength = Math.min(curLogLength + byteLength, totalLogLength);\n+\n+  $.ajax({\n+    type: \"GET\",\n+    url: \"/log\" + baseParams + \"&offset=\" + offset + \"&byteLength=\" + byteLength,"
  }, {
    "author": {
      "login": "ajbozarth"
    },
    "body": "This is much cleaner, thanks\n",
    "commit": "293f1a4ebdd355152127e8089c2520ce0ff1bf15",
    "createdAt": "2016-04-07T20:10:37Z",
    "diffHunk": "@@ -0,0 +1,125 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+var baseParams\n+\n+var curLogLength\n+var startByte\n+var endByte\n+var totalLogLength\n+\n+var byteLength\n+var btnHeight = 30\n+\n+function setLogScroll(oldHeight) {\n+  $(\".log-content\").scrollTop($(\".log-content\")[0].scrollHeight - oldHeight);\n+}\n+\n+function tailLog() {\n+  $(\".log-content\").scrollTop($(\".log-content\")[0].scrollHeight);\n+}\n+\n+function setLogData() {\n+  $('#log-data').html(\"Showing \" + curLogLength + \" Bytes: \" + startByte\n+    + \" - \" + endByte + \" of \" + totalLogLength);\n+}\n+\n+function disableMoreButton() {\n+  $(\".log-more-btn\").attr(\"disabled\", \"disabled\");;\n+  $(\".log-more-btn\").html(\"Top of Log\");\n+}\n+\n+function noNewAlert() {\n+  $(\".no-new-alert\").css(\"display\", \"block\");\n+  window.setTimeout(function () {$(\".no-new-alert\").css(\"display\", \"none\");}, 4000);\n+}\n+\n+function loadMore() {\n+  var offset = Math.max(startByte - byteLength, 0);\n+  var newLogLength = Math.min(curLogLength + byteLength, totalLogLength);\n+\n+  $.ajax({\n+    type: \"GET\",\n+    url: \"/log\" + baseParams + \"&offset=\" + offset + \"&byteLength=\" + byteLength,"
  }],
  "prId": 10910
}, {
  "comments": [{
    "author": {
      "login": "sarutak"
    },
    "body": "nit: semicolon.\n",
    "commit": "293f1a4ebdd355152127e8089c2520ce0ff1bf15",
    "createdAt": "2016-04-18T07:10:09Z",
    "diffHunk": "@@ -0,0 +1,129 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+var baseParams;\n+\n+var curLogLength;\n+var startByte;\n+var endByte;\n+var totalLogLength;\n+\n+var byteLength;\n+\n+function setLogScroll(oldHeight) {\n+  var logContent = $(\".log-content\");\n+  logContent.scrollTop(logContent[0].scrollHeight - oldHeight);\n+}\n+\n+function tailLog() {\n+  var logContent = $(\".log-content\");\n+  logContent.scrollTop(logContent[0].scrollHeight);\n+}\n+\n+function setLogData() {\n+  $('#log-data').html(\"Showing \" + curLogLength + \" Bytes: \" + startByte\n+    + \" - \" + endByte + \" of \" + totalLogLength);\n+}\n+\n+function disableMoreButton() {\n+  var moreBtn = $(\".log-more-btn\");\n+  moreBtn.attr(\"disabled\", \"disabled\");\n+  moreBtn.html(\"Top of Log\");\n+}\n+\n+function noNewAlert() {\n+  var alert = $(\".no-new-alert\")\n+  alert.css(\"display\", \"block\");\n+  window.setTimeout(function () {alert.css(\"display\", \"none\");}, 4000);\n+}\n+\n+function loadMore() {\n+  var offset = Math.max(startByte - byteLength, 0);\n+  var moreByteLength = Math.min(byteLength, startByte);\n+\n+  $.ajax({\n+    type: \"GET\",\n+    url: \"/log\" + baseParams + \"&offset=\" + offset + \"&byteLength=\" + moreByteLength,\n+    success: function (data) {\n+      var oldHeight = $(\".log-content\")[0].scrollHeight;\n+      var newlineIndex = data.indexOf('\\n')"
  }],
  "prId": 10910
}, {
  "comments": [{
    "author": {
      "login": "sarutak"
    },
    "body": "nit: semicolon.\n",
    "commit": "293f1a4ebdd355152127e8089c2520ce0ff1bf15",
    "createdAt": "2016-04-18T07:10:30Z",
    "diffHunk": "@@ -0,0 +1,129 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+var baseParams;\n+\n+var curLogLength;\n+var startByte;\n+var endByte;\n+var totalLogLength;\n+\n+var byteLength;\n+\n+function setLogScroll(oldHeight) {\n+  var logContent = $(\".log-content\");\n+  logContent.scrollTop(logContent[0].scrollHeight - oldHeight);\n+}\n+\n+function tailLog() {\n+  var logContent = $(\".log-content\");\n+  logContent.scrollTop(logContent[0].scrollHeight);\n+}\n+\n+function setLogData() {\n+  $('#log-data').html(\"Showing \" + curLogLength + \" Bytes: \" + startByte\n+    + \" - \" + endByte + \" of \" + totalLogLength);\n+}\n+\n+function disableMoreButton() {\n+  var moreBtn = $(\".log-more-btn\");\n+  moreBtn.attr(\"disabled\", \"disabled\");\n+  moreBtn.html(\"Top of Log\");\n+}\n+\n+function noNewAlert() {\n+  var alert = $(\".no-new-alert\")"
  }],
  "prId": 10910
}, {
  "comments": [{
    "author": {
      "login": "sarutak"
    },
    "body": "nit: semicolon.\n",
    "commit": "293f1a4ebdd355152127e8089c2520ce0ff1bf15",
    "createdAt": "2016-04-18T07:11:04Z",
    "diffHunk": "@@ -0,0 +1,129 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+var baseParams;\n+\n+var curLogLength;\n+var startByte;\n+var endByte;\n+var totalLogLength;\n+\n+var byteLength;\n+\n+function setLogScroll(oldHeight) {\n+  var logContent = $(\".log-content\");\n+  logContent.scrollTop(logContent[0].scrollHeight - oldHeight);\n+}\n+\n+function tailLog() {\n+  var logContent = $(\".log-content\");\n+  logContent.scrollTop(logContent[0].scrollHeight);\n+}\n+\n+function setLogData() {\n+  $('#log-data').html(\"Showing \" + curLogLength + \" Bytes: \" + startByte\n+    + \" - \" + endByte + \" of \" + totalLogLength);\n+}\n+\n+function disableMoreButton() {\n+  var moreBtn = $(\".log-more-btn\");\n+  moreBtn.attr(\"disabled\", \"disabled\");\n+  moreBtn.html(\"Top of Log\");\n+}\n+\n+function noNewAlert() {\n+  var alert = $(\".no-new-alert\")\n+  alert.css(\"display\", \"block\");\n+  window.setTimeout(function () {alert.css(\"display\", \"none\");}, 4000);\n+}\n+\n+function loadMore() {\n+  var offset = Math.max(startByte - byteLength, 0);\n+  var moreByteLength = Math.min(byteLength, startByte);\n+\n+  $.ajax({\n+    type: \"GET\",\n+    url: \"/log\" + baseParams + \"&offset=\" + offset + \"&byteLength=\" + moreByteLength,\n+    success: function (data) {\n+      var oldHeight = $(\".log-content\")[0].scrollHeight;\n+      var newlineIndex = data.indexOf('\\n')\n+      var dataInfo = data.substring(0, newlineIndex).match(/\\d+/g);\n+      var retStartByte = dataInfo[0];\n+      var retLogLength = dataInfo[2];\n+\n+      var cleanData = data.substring(newlineIndex + 1);\n+      if (retStartByte == 0) {\n+        disableMoreButton();\n+      }\n+      $(\"pre\", \".log-content\").prepend(cleanData);\n+\n+      curLogLength = curLogLength + (startByte - retStartByte);\n+      startByte = retStartByte;\n+      totalLogLength = retLogLength;\n+      setLogScroll(oldHeight);\n+      setLogData();\n+    }\n+  });\n+}\n+\n+function loadNew() {\n+  $.ajax({\n+    type: \"GET\",\n+    url: \"/log\" + baseParams + \"&byteLength=0\",\n+    success: function (data) {\n+      var dataInfo = data.substring(0, data.indexOf('\\n')).match(/\\d+/g);\n+      var newDataLen = dataInfo[2] - totalLogLength;\n+      if (newDataLen != 0) {\n+        $.ajax({\n+          type: \"GET\",\n+          url: \"/log\" + baseParams + \"&byteLength=\" + newDataLen,\n+          success: function (data) {\n+            var newlineIndex = data.indexOf('\\n')"
  }],
  "prId": 10910
}]