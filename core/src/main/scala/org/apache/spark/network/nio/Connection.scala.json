[{
  "comments": [{
    "author": {
      "login": "rxin"
    },
    "body": "maybe add @tailrec to this?\n",
    "commit": "a0a961da8e629d4b7ed86b64866fed9330932d6b",
    "createdAt": "2014-09-27T05:15:57Z",
    "diffHunk": "@@ -218,10 +214,31 @@ class SendingConnection(val address: InetSocketAddress, selector_ : Selector,\n         while (!messages.isEmpty) {\n           /* nextMessageToBeUsed = nextMessageToBeUsed % messages.size */\n           /* val message = messages(nextMessageToBeUsed) */\n-          val message = messages.dequeue()\n+\n+          val message = if (securityMgr.isAuthenticationEnabled() && !isSaslComplete()) {\n+            // only send security messages until sasl is complete\n+            def getFirstSecurityMessage(pos: Int): Option[Message] = {"
  }],
  "prId": 2484
}, {
  "comments": [{
    "author": {
      "login": "rxin"
    },
    "body": "Actually this is probably more clear if you just write a while loop. \n",
    "commit": "a0a961da8e629d4b7ed86b64866fed9330932d6b",
    "createdAt": "2014-09-30T23:03:15Z",
    "diffHunk": "@@ -218,10 +215,32 @@ class SendingConnection(val address: InetSocketAddress, selector_ : Selector,\n         while (!messages.isEmpty) {\n           /* nextMessageToBeUsed = nextMessageToBeUsed % messages.size */\n           /* val message = messages(nextMessageToBeUsed) */\n-          val message = messages.dequeue()\n+\n+          val message = if (securityMgr.isAuthenticationEnabled() && !isSaslComplete()) {\n+            // only send security messages until sasl is complete\n+            @tailrec\n+            def getFirstSecurityMessage(pos: Int): Option[Message] = {"
  }],
  "prId": 2484
}, {
  "comments": [{
    "author": {
      "login": "rxin"
    },
    "body": "move this up before org.apache.spark\n",
    "commit": "a0a961da8e629d4b7ed86b64866fed9330932d6b",
    "createdAt": "2014-09-30T23:04:24Z",
    "diffHunk": "@@ -20,23 +20,28 @@ package org.apache.spark.network.nio\n import java.net._\n import java.nio._\n import java.nio.channels._\n+import java.util.LinkedList\n \n import org.apache.spark._\n \n-import scala.collection.mutable.{ArrayBuffer, HashMap, Queue}\n+import scala.annotation.tailrec"
  }],
  "prId": 2484
}]