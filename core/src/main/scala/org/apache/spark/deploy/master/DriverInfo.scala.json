[{
  "comments": [{
    "author": {
      "login": "andrewor14"
    },
    "body": "Not sure if I understand your intention. These are all transient and won't actually be serialized, so why do we need to set them every time we `readObject`?\n",
    "commit": "9936043f26937887a23aa01d340c34ac71a51673",
    "createdAt": "2014-08-20T21:34:09Z",
    "diffHunk": "@@ -33,4 +33,17 @@ private[spark] class DriverInfo(\n   @transient var exception: Option[Exception] = None\n   /* Most recent worker assigned to this driver */\n   @transient var worker: Option[WorkerInfo] = None\n+\n+  init()\n+\n+  private def readObject(in: java.io.ObjectInputStream): Unit = {\n+    in.defaultReadObject()\n+    init()\n+  }\n+\n+  private def init(): Unit = {\n+    state = DriverState.SUBMITTED\n+    worker = None\n+    exception = None\n+  }",
    "line": 16
  }, {
    "author": {
      "login": "tanyatik"
    },
    "body": "When a field is deserialized, transient fields become null value, not None, thats why NullPointerException happens.\n",
    "commit": "9936043f26937887a23aa01d340c34ac71a51673",
    "createdAt": "2014-08-21T11:04:30Z",
    "diffHunk": "@@ -33,4 +33,17 @@ private[spark] class DriverInfo(\n   @transient var exception: Option[Exception] = None\n   /* Most recent worker assigned to this driver */\n   @transient var worker: Option[WorkerInfo] = None\n+\n+  init()\n+\n+  private def readObject(in: java.io.ObjectInputStream): Unit = {\n+    in.defaultReadObject()\n+    init()\n+  }\n+\n+  private def init(): Unit = {\n+    state = DriverState.SUBMITTED\n+    worker = None\n+    exception = None\n+  }",
    "line": 16
  }, {
    "author": {
      "login": "tanyatik"
    },
    "body": "Similar approach is used in WorkerInfo\n",
    "commit": "9936043f26937887a23aa01d340c34ac71a51673",
    "createdAt": "2014-08-21T14:26:02Z",
    "diffHunk": "@@ -33,4 +33,17 @@ private[spark] class DriverInfo(\n   @transient var exception: Option[Exception] = None\n   /* Most recent worker assigned to this driver */\n   @transient var worker: Option[WorkerInfo] = None\n+\n+  init()\n+\n+  private def readObject(in: java.io.ObjectInputStream): Unit = {\n+    in.defaultReadObject()\n+    init()\n+  }\n+\n+  private def init(): Unit = {\n+    state = DriverState.SUBMITTED\n+    worker = None\n+    exception = None\n+  }",
    "line": 16
  }, {
    "author": {
      "login": "andrewor14"
    },
    "body": "Ah I see, thanks for the context.\n",
    "commit": "9936043f26937887a23aa01d340c34ac71a51673",
    "createdAt": "2014-08-25T23:25:10Z",
    "diffHunk": "@@ -33,4 +33,17 @@ private[spark] class DriverInfo(\n   @transient var exception: Option[Exception] = None\n   /* Most recent worker assigned to this driver */\n   @transient var worker: Option[WorkerInfo] = None\n+\n+  init()\n+\n+  private def readObject(in: java.io.ObjectInputStream): Unit = {\n+    in.defaultReadObject()\n+    init()\n+  }\n+\n+  private def init(): Unit = {\n+    state = DriverState.SUBMITTED\n+    worker = None\n+    exception = None\n+  }",
    "line": 16
  }],
  "prId": 2062
}]