[{
  "comments": [{
    "author": {
      "login": "squito"
    },
    "body": "just for my own understanding, not directly related to this change --\r\n\r\nI hadn't realized that the ExternalShuffleBlockHandler had its own ShuffleMetrics already.  Some of those metrics really seem like they should be part of regular shuffle server, in the executor.  Eg., [openBlockRequestLatencyMillis](https://github.com/apache/spark/blob/master/common/network-shuffle/src/main/java/org/apache/spark/network/shuffle/ExternalShuffleBlockHandler.java#L89).  Do you know why its separate?",
    "commit": "9a080dd1f13dc9c6ad7d171f4cbe9f077be867eb",
    "createdAt": "2017-09-19T19:52:07Z",
    "diffHunk": "@@ -19,19 +19,19 @@ package org.apache.spark.deploy\n \n import javax.annotation.concurrent.ThreadSafe\n \n-import com.codahale.metrics.MetricRegistry\n+import com.codahale.metrics.{MetricRegistry, MetricSet}\n \n import org.apache.spark.metrics.source.Source\n-import org.apache.spark.network.shuffle.ExternalShuffleBlockHandler\n \n /**\n  * Provides metrics source for external shuffle service\n  */\n @ThreadSafe\n-private class ExternalShuffleServiceSource\n-(blockHandler: ExternalShuffleBlockHandler) extends Source {\n+private class ExternalShuffleServiceSource extends Source {",
    "line": 16
  }, {
    "author": {
      "login": "jerryshao"
    },
    "body": "I'm not sure, maybe it should a part of regular shuffle server.",
    "commit": "9a080dd1f13dc9c6ad7d171f4cbe9f077be867eb",
    "createdAt": "2017-09-20T02:11:55Z",
    "diffHunk": "@@ -19,19 +19,19 @@ package org.apache.spark.deploy\n \n import javax.annotation.concurrent.ThreadSafe\n \n-import com.codahale.metrics.MetricRegistry\n+import com.codahale.metrics.{MetricRegistry, MetricSet}\n \n import org.apache.spark.metrics.source.Source\n-import org.apache.spark.network.shuffle.ExternalShuffleBlockHandler\n \n /**\n  * Provides metrics source for external shuffle service\n  */\n @ThreadSafe\n-private class ExternalShuffleServiceSource\n-(blockHandler: ExternalShuffleBlockHandler) extends Source {\n+private class ExternalShuffleServiceSource extends Source {",
    "line": 16
  }],
  "prId": 19160
}]