[{
  "comments": [{
    "author": {
      "login": "andrewor14"
    },
    "body": "FYI this change will conflict with https://github.com/apache/spark/pull/4990, which makes this a general class that Mesos can also use. If you follow my suggestion of just disabling this for local cluster then this doesn't need to change.\n",
    "commit": "3c2d6edfeb02488e176703e712373f88c2ba1037",
    "createdAt": "2015-04-21T00:04:36Z",
    "diffHunk": "@@ -35,7 +35,10 @@ private[worker]\n class StandaloneWorkerShuffleService(sparkConf: SparkConf, securityManager: SecurityManager)\n   extends Logging {\n \n-  private val enabled = sparkConf.getBoolean(\"spark.shuffle.service.enabled\", false)\n+  // Check both if shuffle service is enabled, and that the worker should actually host the\n+  // shuffle service in that case. (The latter is currently only used for testing.)\n+  private val enabled = sparkConf.getBoolean(\"spark.shuffle.service.enabled\", false) &&\n+    sparkConf.getBoolean(\"spark.worker.shouldHostShuffleServiceIfEnabled\", true)"
  }],
  "prId": 5575
}]