[{
  "comments": [{
    "author": {
      "login": "tgravescs"
    },
    "body": "It would be nice to display a column with the user name also.  I expect the history server to be shared on our clusters so its hard filter out just my applications. \n",
    "commit": "7b7234cd275628a4fa1ce8e2b06392f546964339",
    "createdAt": "2014-04-08T13:33:09Z",
    "diffHunk": "@@ -0,0 +1,76 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.spark.deploy.history\n+\n+import javax.servlet.http.HttpServletRequest\n+\n+import scala.xml.Node\n+\n+import org.apache.spark.ui.{UIUtils, WebUI}\n+\n+private[spark] class IndexPage(parent: HistoryServer) {\n+\n+  def render(request: HttpServletRequest): Seq[Node] = {\n+    parent.checkForLogs()\n+\n+    // Populate app table, with most recently modified app first\n+    val appRows = parent.appIdToInfo.values.toSeq.sortBy { app => -app.lastUpdated }\n+    val appTable = UIUtils.listingTable(appHeader, appRow, appRows)\n+    val content =\n+      <div class=\"row-fluid\">\n+        <div class=\"span12\">\n+          <ul class=\"unstyled\">\n+            <li><strong>Event Log Location: </strong> {parent.baseLogDir}</li>\n+            <h4>\n+              Showing {parent.appIdToInfo.size}/{parent.getTotalApplications} Finished Applications\n+            </h4>\n+            {appTable}\n+          </ul>\n+        </div>\n+      </div>\n+\n+    UIUtils.basicSparkPage(content, \"History Server\")\n+  }\n+\n+  private val appHeader = Seq(\n+    \"App Name\",\n+    \"Started\",\n+    \"Finished\",\n+    \"Duration\",\n+    \"Log Directory\",\n+    \"Last Updated\")\n+\n+  private def appRow(info: ApplicationHistoryInfo): Seq[Node] = {\n+    val appName = if (info.started) info.name else parent.getAppId(info.logPath)\n+    val uiAddress = parent.getAddress + info.ui.basePath\n+    val startTime = if (info.started) WebUI.formatDate(info.startTime) else \"Not started\"\n+    val endTime = if (info.finished) WebUI.formatDate(info.endTime) else \"Not finished\"\n+    val difference = if (info.started && info.finished) info.endTime - info.startTime else -1L\n+    val duration = if (difference > 0) WebUI.formatDuration(difference) else \"---\"\n+    val logDirectory = parent.getAppId(info.logPath)"
  }, {
    "author": {
      "login": "andrewor14"
    },
    "body": "This is added in the latest commit\n",
    "commit": "7b7234cd275628a4fa1ce8e2b06392f546964339",
    "createdAt": "2014-04-09T08:18:03Z",
    "diffHunk": "@@ -0,0 +1,76 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.spark.deploy.history\n+\n+import javax.servlet.http.HttpServletRequest\n+\n+import scala.xml.Node\n+\n+import org.apache.spark.ui.{UIUtils, WebUI}\n+\n+private[spark] class IndexPage(parent: HistoryServer) {\n+\n+  def render(request: HttpServletRequest): Seq[Node] = {\n+    parent.checkForLogs()\n+\n+    // Populate app table, with most recently modified app first\n+    val appRows = parent.appIdToInfo.values.toSeq.sortBy { app => -app.lastUpdated }\n+    val appTable = UIUtils.listingTable(appHeader, appRow, appRows)\n+    val content =\n+      <div class=\"row-fluid\">\n+        <div class=\"span12\">\n+          <ul class=\"unstyled\">\n+            <li><strong>Event Log Location: </strong> {parent.baseLogDir}</li>\n+            <h4>\n+              Showing {parent.appIdToInfo.size}/{parent.getTotalApplications} Finished Applications\n+            </h4>\n+            {appTable}\n+          </ul>\n+        </div>\n+      </div>\n+\n+    UIUtils.basicSparkPage(content, \"History Server\")\n+  }\n+\n+  private val appHeader = Seq(\n+    \"App Name\",\n+    \"Started\",\n+    \"Finished\",\n+    \"Duration\",\n+    \"Log Directory\",\n+    \"Last Updated\")\n+\n+  private def appRow(info: ApplicationHistoryInfo): Seq[Node] = {\n+    val appName = if (info.started) info.name else parent.getAppId(info.logPath)\n+    val uiAddress = parent.getAddress + info.ui.basePath\n+    val startTime = if (info.started) WebUI.formatDate(info.startTime) else \"Not started\"\n+    val endTime = if (info.finished) WebUI.formatDate(info.endTime) else \"Not finished\"\n+    val difference = if (info.started && info.finished) info.endTime - info.startTime else -1L\n+    val duration = if (difference > 0) WebUI.formatDuration(difference) else \"---\"\n+    val logDirectory = parent.getAppId(info.logPath)"
  }],
  "prId": 204
}, {
  "comments": [{
    "author": {
      "login": "pwendell"
    },
    "body": "Still says \"Finished\" - this is one of the more important cases because it's being shown to users and is inconsistent the other UI's that say \"Completed Applications\".\n",
    "commit": "7b7234cd275628a4fa1ce8e2b06392f546964339",
    "createdAt": "2014-04-10T06:02:53Z",
    "diffHunk": "@@ -0,0 +1,82 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.spark.deploy.history\n+\n+import javax.servlet.http.HttpServletRequest\n+\n+import scala.xml.Node\n+\n+import org.apache.spark.ui.{UIUtils, WebUI}\n+\n+private[spark] class IndexPage(parent: HistoryServer) {\n+\n+  def render(request: HttpServletRequest): Seq[Node] = {\n+    val appRows = parent.appIdToInfo.values.toSeq.sortBy { app => -app.lastUpdated }\n+    val appTable = UIUtils.listingTable(appHeader, appRow, appRows)\n+    val content =\n+      <div class=\"row-fluid\">\n+        <div class=\"span12\">\n+          <ul class=\"unstyled\">\n+            <li><strong>Event Log Location: </strong> {parent.baseLogDir}</li>\n+          </ul>\n+          {\n+            if (parent.appIdToInfo.size > 0) {\n+              <h4>\n+                Showing {parent.appIdToInfo.size}/{parent.getNumApplications}\n+                Finished Application{if (parent.getNumApplications > 1) \"s\" else \"\"}"
  }, {
    "author": {
      "login": "pwendell"
    },
    "body": "Note that this is here and also below in the UI\n",
    "commit": "7b7234cd275628a4fa1ce8e2b06392f546964339",
    "createdAt": "2014-04-10T06:03:35Z",
    "diffHunk": "@@ -0,0 +1,82 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package org.apache.spark.deploy.history\n+\n+import javax.servlet.http.HttpServletRequest\n+\n+import scala.xml.Node\n+\n+import org.apache.spark.ui.{UIUtils, WebUI}\n+\n+private[spark] class IndexPage(parent: HistoryServer) {\n+\n+  def render(request: HttpServletRequest): Seq[Node] = {\n+    val appRows = parent.appIdToInfo.values.toSeq.sortBy { app => -app.lastUpdated }\n+    val appTable = UIUtils.listingTable(appHeader, appRow, appRows)\n+    val content =\n+      <div class=\"row-fluid\">\n+        <div class=\"span12\">\n+          <ul class=\"unstyled\">\n+            <li><strong>Event Log Location: </strong> {parent.baseLogDir}</li>\n+          </ul>\n+          {\n+            if (parent.appIdToInfo.size > 0) {\n+              <h4>\n+                Showing {parent.appIdToInfo.size}/{parent.getNumApplications}\n+                Finished Application{if (parent.getNumApplications > 1) \"s\" else \"\"}"
  }],
  "prId": 204
}]