[{
  "comments": [{
    "author": {
      "login": "vanzin"
    },
    "body": "`val endTarget = target.stripSuffix(\"/\")`\n",
    "commit": "9f6862ed579cf4edc965e1a9835a79d6aa4c6d0b",
    "createdAt": "2016-08-15T21:19:25Z",
    "diffHunk": "@@ -48,6 +53,21 @@ class MasterWebUI(\n     attachHandler(createRedirectHandler(\n       \"/driver/kill\", \"/\", masterPage.handleDriverKillRequest, httpMethods = Set(\"POST\")))\n   }\n+\n+  def addProxyTargets(id: String, target: String): Unit = {\n+    var endTarget: String = target"
  }],
  "prId": 13950
}, {
  "comments": [{
    "author": {
      "login": "vanzin"
    },
    "body": "`proxyHandlers.remove(id).foreach(detachHandler)`\n",
    "commit": "9f6862ed579cf4edc965e1a9835a79d6aa4c6d0b",
    "createdAt": "2016-08-15T21:23:37Z",
    "diffHunk": "@@ -48,6 +53,21 @@ class MasterWebUI(\n     attachHandler(createRedirectHandler(\n       \"/driver/kill\", \"/\", masterPage.handleDriverKillRequest, httpMethods = Set(\"POST\")))\n   }\n+\n+  def addProxyTargets(id: String, target: String): Unit = {\n+    var endTarget: String = target\n+    if (endTarget.endsWith(\"/\")) {\n+      endTarget = endTarget.substring(0, endTarget.length()-1)\n+    }\n+    val handler = createProxyHandler(\"/proxy/\" + id, endTarget)\n+    attachHandler(handler)\n+    proxyHandlers(id) = handler\n+  }\n+\n+  def removeProxyTargets(id: String): Unit = {\n+    detachHandler(proxyHandlers.get(id).get)"
  }],
  "prId": 13950
}, {
  "comments": [{
    "author": {
      "login": "zsxwing"
    },
    "body": "nit: private[this]\n",
    "commit": "9f6862ed579cf4edc965e1a9835a79d6aa4c6d0b",
    "createdAt": "2016-09-08T18:53:15Z",
    "diffHunk": "@@ -34,6 +38,7 @@ class MasterWebUI(\n \n   val masterEndpointRef = master.self\n   val killEnabled = master.conf.getBoolean(\"spark.ui.killEnabled\", true)\n+  val proxyHandlers = new HashMap[String, ServletContextHandler]"
  }],
  "prId": 13950
}]