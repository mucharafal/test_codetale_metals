[{
  "comments": [{
    "author": {
      "login": "rxin"
    },
    "body": "How does this actually work? Shouldn't natural() return a Comparator?\n",
    "commit": "d09147a4a472cfd94f535b2e7924ff6957338926",
    "createdAt": "2014-05-14T05:16:22Z",
    "diffHunk": "@@ -150,6 +153,18 @@ class JavaRDD[T](val rdd: RDD[T])(implicit val classTag: ClassTag[T])\n     rdd.setName(name)\n     this\n   }\n+\n+  /**\n+   * Return this RDD sorted by the given key function.\n+   */\n+  def sortBy[S](f: JFunction[T, S], ascending: Boolean, numPartitions: Int): JavaRDD[T] = {\n+    import scala.collection.JavaConverters._\n+    def fn = (x: T) => f.call(x)\n+    implicit val ordering = com.google.common.collect.Ordering.natural().asInstanceOf[Ordering[S]]"
  }, {
    "author": {
      "login": "ash211"
    },
    "body": "Ordering.natural() returns an Ordering object, which implements the\nComparator interface.\n\nhttp://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/Ordering.html#natural()\n\nOn Tue, May 13, 2014 at 10:16 PM, Reynold Xin notifications@github.comwrote:\n\n> In core/src/main/scala/org/apache/spark/api/java/JavaRDD.scala:\n> \n> > @@ -150,6 +153,18 @@ class JavaRDD[T](val rdd: RDD[T])(implicit val classTag: ClassTag[T])\n> >      rdd.setName(name)\n> >      this\n> >    }\n> > +\n> > -  /**\n> > -   \\* Return this RDD sorted by the given key function.\n> > -   */\n> > -  def sortBy[S](f: JFunction[T, S], ascending: Boolean, numPartitions: Int): JavaRDD[T] = {\n> > -    import scala.collection.JavaConverters._\n> > -    def fn = (x: T) => f.call(x)\n> > -    implicit val ordering = com.google.common.collect.Ordering.natural().asInstanceOf[Ordering[S]]\n> \n> How does this actually work? Shouldn't natural() return a Comparator?\n> \n> —\n> Reply to this email directly or view it on GitHubhttps://github.com/apache/spark/pull/369/files#r12621237\n> .\n",
    "commit": "d09147a4a472cfd94f535b2e7924ff6957338926",
    "createdAt": "2014-05-14T05:20:06Z",
    "diffHunk": "@@ -150,6 +153,18 @@ class JavaRDD[T](val rdd: RDD[T])(implicit val classTag: ClassTag[T])\n     rdd.setName(name)\n     this\n   }\n+\n+  /**\n+   * Return this RDD sorted by the given key function.\n+   */\n+  def sortBy[S](f: JFunction[T, S], ascending: Boolean, numPartitions: Int): JavaRDD[T] = {\n+    import scala.collection.JavaConverters._\n+    def fn = (x: T) => f.call(x)\n+    implicit val ordering = com.google.common.collect.Ordering.natural().asInstanceOf[Ordering[S]]"
  }, {
    "author": {
      "login": "rxin"
    },
    "body": "I think the problem here is that Ordering in this scope is just scala's Ordering\n",
    "commit": "d09147a4a472cfd94f535b2e7924ff6957338926",
    "createdAt": "2014-05-14T05:24:30Z",
    "diffHunk": "@@ -150,6 +153,18 @@ class JavaRDD[T](val rdd: RDD[T])(implicit val classTag: ClassTag[T])\n     rdd.setName(name)\n     this\n   }\n+\n+  /**\n+   * Return this RDD sorted by the given key function.\n+   */\n+  def sortBy[S](f: JFunction[T, S], ascending: Boolean, numPartitions: Int): JavaRDD[T] = {\n+    import scala.collection.JavaConverters._\n+    def fn = (x: T) => f.call(x)\n+    implicit val ordering = com.google.common.collect.Ordering.natural().asInstanceOf[Ordering[S]]"
  }, {
    "author": {
      "login": "rxin"
    },
    "body": "I will submit a pr to fix these.\n",
    "commit": "d09147a4a472cfd94f535b2e7924ff6957338926",
    "createdAt": "2014-05-14T05:35:46Z",
    "diffHunk": "@@ -150,6 +153,18 @@ class JavaRDD[T](val rdd: RDD[T])(implicit val classTag: ClassTag[T])\n     rdd.setName(name)\n     this\n   }\n+\n+  /**\n+   * Return this RDD sorted by the given key function.\n+   */\n+  def sortBy[S](f: JFunction[T, S], ascending: Boolean, numPartitions: Int): JavaRDD[T] = {\n+    import scala.collection.JavaConverters._\n+    def fn = (x: T) => f.call(x)\n+    implicit val ordering = com.google.common.collect.Ordering.natural().asInstanceOf[Ordering[S]]"
  }, {
    "author": {
      "login": "ash211"
    },
    "body": "Thank you!  I'm not incredibly familiar with Java/Scala interactions so\nwould appreciate the assistance.  Also, didn't know Scala had an Ordering.\n\nUsing Guava for the default comparator was based on the\n`sortByKey(Boolean)` method in `JavaPairRDD.scala`\n\nOn Tue, May 13, 2014 at 10:35 PM, Reynold Xin notifications@github.comwrote:\n\n> In core/src/main/scala/org/apache/spark/api/java/JavaRDD.scala:\n> \n> > @@ -150,6 +153,18 @@ class JavaRDD[T](val rdd: RDD[T])(implicit val classTag: ClassTag[T])\n> >      rdd.setName(name)\n> >      this\n> >    }\n> > +\n> > -  /**\n> > -   \\* Return this RDD sorted by the given key function.\n> > -   */\n> > -  def sortBy[S](f: JFunction[T, S], ascending: Boolean, numPartitions: Int): JavaRDD[T] = {\n> > -    import scala.collection.JavaConverters._\n> > -    def fn = (x: T) => f.call(x)\n> > -    implicit val ordering = com.google.common.collect.Ordering.natural().asInstanceOf[Ordering[S]]\n> \n> I will submit a pr to fix these.\n> \n> —\n> Reply to this email directly or view it on GitHubhttps://github.com/apache/spark/pull/369/files#r12621500\n> .\n",
    "commit": "d09147a4a472cfd94f535b2e7924ff6957338926",
    "createdAt": "2014-05-14T05:39:52Z",
    "diffHunk": "@@ -150,6 +153,18 @@ class JavaRDD[T](val rdd: RDD[T])(implicit val classTag: ClassTag[T])\n     rdd.setName(name)\n     this\n   }\n+\n+  /**\n+   * Return this RDD sorted by the given key function.\n+   */\n+  def sortBy[S](f: JFunction[T, S], ascending: Boolean, numPartitions: Int): JavaRDD[T] = {\n+    import scala.collection.JavaConverters._\n+    def fn = (x: T) => f.call(x)\n+    implicit val ordering = com.google.common.collect.Ordering.natural().asInstanceOf[Ordering[S]]"
  }, {
    "author": {
      "login": "rxin"
    },
    "body": "Actually I gotta focus on something else and considering this is might be too last minute for 1.0 given it introduces new APIs, we have more time to push it into 1.1.  Do you mind fixing this yourself? The problem is you should've cast the type to Comparator[S] instead of Ordering[S](which is Scala's ordering in this scope).\n",
    "commit": "d09147a4a472cfd94f535b2e7924ff6957338926",
    "createdAt": "2014-05-14T05:51:30Z",
    "diffHunk": "@@ -150,6 +153,18 @@ class JavaRDD[T](val rdd: RDD[T])(implicit val classTag: ClassTag[T])\n     rdd.setName(name)\n     this\n   }\n+\n+  /**\n+   * Return this RDD sorted by the given key function.\n+   */\n+  def sortBy[S](f: JFunction[T, S], ascending: Boolean, numPartitions: Int): JavaRDD[T] = {\n+    import scala.collection.JavaConverters._\n+    def fn = (x: T) => f.call(x)\n+    implicit val ordering = com.google.common.collect.Ordering.natural().asInstanceOf[Ordering[S]]"
  }],
  "prId": 369
}]