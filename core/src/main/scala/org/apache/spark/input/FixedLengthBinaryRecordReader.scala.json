[{
  "comments": [{
    "author": {
      "login": "srowen"
    },
    "body": "Hm, but this also doesn't check how many bytes were actually read?\n",
    "commit": "a245c8a873e0211d4c37a7e8920b5c6e8cfecf75",
    "createdAt": "2014-11-04T18:41:40Z",
    "diffHunk": "@@ -115,7 +115,7 @@ private[spark] class FixedLengthBinaryRecordReader\n     if (currentPosition < splitEnd) {\n       // setup a buffer to store the record\n       val buffer = recordValue.getBytes\n-      fileInputStream.read(buffer, 0, recordLength)\n+      fileInputStream.readFully(buffer)",
    "line": 5
  }, {
    "author": {
      "login": "industrial-sloth"
    },
    "body": "yep, but readFully will either block until the full number of bytes is available, or throw an error:\nhttp://docs.oracle.com/javase/6/docs/api/java/io/DataInput.html#readFully(byte[])\n",
    "commit": "a245c8a873e0211d4c37a7e8920b5c6e8cfecf75",
    "createdAt": "2014-11-04T18:44:31Z",
    "diffHunk": "@@ -115,7 +115,7 @@ private[spark] class FixedLengthBinaryRecordReader\n     if (currentPosition < splitEnd) {\n       // setup a buffer to store the record\n       val buffer = recordValue.getBytes\n-      fileInputStream.read(buffer, 0, recordLength)\n+      fileInputStream.readFully(buffer)",
    "line": 5
  }],
  "prId": 3093
}]