[{
  "comments": [{
    "author": {
      "login": "maropu"
    },
    "body": "We also need to fix codes for other ids (stageId and attemptId) to return 0 if taskContext not defined?\n",
    "commit": "eb3a221d95839ff57b7579f87cbceaaf9ff19653",
    "createdAt": "2015-07-14T16:49:05Z",
    "diffHunk": "@@ -32,7 +32,13 @@ object TaskContext {\n    */\n   def get(): TaskContext = taskContext.get\n \n-  private val taskContext: ThreadLocal[TaskContext] = new ThreadLocal[TaskContext]\n+  /**\n+   * Returns the partition id of currently active TaskContext. It will return 0\n+   * if there is no active TaskContext for cases like local execution.\n+   */\n+  def getPartitionId(): Int = Option(taskContext.get).map(_.partitionId).getOrElse(0)"
  }, {
    "author": {
      "login": "rxin"
    },
    "body": "don't use an Option wrapper here, just in case the caller expects higher performance.\n",
    "commit": "eb3a221d95839ff57b7579f87cbceaaf9ff19653",
    "createdAt": "2015-07-14T20:03:01Z",
    "diffHunk": "@@ -32,7 +32,13 @@ object TaskContext {\n    */\n   def get(): TaskContext = taskContext.get\n \n-  private val taskContext: ThreadLocal[TaskContext] = new ThreadLocal[TaskContext]\n+  /**\n+   * Returns the partition id of currently active TaskContext. It will return 0\n+   * if there is no active TaskContext for cases like local execution.\n+   */\n+  def getPartitionId(): Int = Option(taskContext.get).map(_.partitionId).getOrElse(0)"
  }],
  "prId": 7392
}]