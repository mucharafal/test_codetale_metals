[{
  "comments": [{
    "author": {
      "login": "mridulm"
    },
    "body": "nit: / (1024 \\* 1024) instead ?\n",
    "commit": "3b46f5e3afa85182dfc0d4170d41885498dbcab6",
    "createdAt": "2014-08-02T08:32:11Z",
    "diffHunk": "@@ -46,9 +46,8 @@ private[spark] class BlockManagerSource(val blockManager: BlockManager, sc: Spar\n   metricRegistry.register(MetricRegistry.name(\"memory\", \"memUsed_MB\"), new Gauge[Long] {\n     override def getValue: Long = {\n       val storageStatusList = blockManager.master.getStorageStatus\n-      val maxMem = storageStatusList.map(_.maxMem).sum\n-      val remainingMem = storageStatusList.map(_.memRemaining).sum\n-      (maxMem - remainingMem) / 1024 / 1024\n+      val memUsed = storageStatusList.map(_.memUsed).sum\n+      memUsed / 1024 / 1024",
    "line": 8
  }, {
    "author": {
      "login": "andrewor14"
    },
    "body": "We do the double slash in other places as well. Changing those too would touch upon things I didn't touch in #1679, so I'd rather keep the changes in this PR at the minimum while keeping the code consistent with the other places in this file\n",
    "commit": "3b46f5e3afa85182dfc0d4170d41885498dbcab6",
    "createdAt": "2014-08-02T17:33:49Z",
    "diffHunk": "@@ -46,9 +46,8 @@ private[spark] class BlockManagerSource(val blockManager: BlockManager, sc: Spar\n   metricRegistry.register(MetricRegistry.name(\"memory\", \"memUsed_MB\"), new Gauge[Long] {\n     override def getValue: Long = {\n       val storageStatusList = blockManager.master.getStorageStatus\n-      val maxMem = storageStatusList.map(_.maxMem).sum\n-      val remainingMem = storageStatusList.map(_.memRemaining).sum\n-      (maxMem - remainingMem) / 1024 / 1024\n+      val memUsed = storageStatusList.map(_.memUsed).sum\n+      memUsed / 1024 / 1024",
    "line": 8
  }, {
    "author": {
      "login": "mridulm"
    },
    "body": "bad code is bad code :-)\n",
    "commit": "3b46f5e3afa85182dfc0d4170d41885498dbcab6",
    "createdAt": "2014-08-03T00:47:58Z",
    "diffHunk": "@@ -46,9 +46,8 @@ private[spark] class BlockManagerSource(val blockManager: BlockManager, sc: Spar\n   metricRegistry.register(MetricRegistry.name(\"memory\", \"memUsed_MB\"), new Gauge[Long] {\n     override def getValue: Long = {\n       val storageStatusList = blockManager.master.getStorageStatus\n-      val maxMem = storageStatusList.map(_.maxMem).sum\n-      val remainingMem = storageStatusList.map(_.memRemaining).sum\n-      (maxMem - remainingMem) / 1024 / 1024\n+      val memUsed = storageStatusList.map(_.memUsed).sum\n+      memUsed / 1024 / 1024",
    "line": 8
  }, {
    "author": {
      "login": "mridulm"
    },
    "body": "Btw, it is just a nit - so please dont let this block a commit !\n",
    "commit": "3b46f5e3afa85182dfc0d4170d41885498dbcab6",
    "createdAt": "2014-08-03T00:57:39Z",
    "diffHunk": "@@ -46,9 +46,8 @@ private[spark] class BlockManagerSource(val blockManager: BlockManager, sc: Spar\n   metricRegistry.register(MetricRegistry.name(\"memory\", \"memUsed_MB\"), new Gauge[Long] {\n     override def getValue: Long = {\n       val storageStatusList = blockManager.master.getStorageStatus\n-      val maxMem = storageStatusList.map(_.maxMem).sum\n-      val remainingMem = storageStatusList.map(_.memRemaining).sum\n-      (maxMem - remainingMem) / 1024 / 1024\n+      val memUsed = storageStatusList.map(_.memUsed).sum\n+      memUsed / 1024 / 1024",
    "line": 8
  }],
  "prId": 1736
}]