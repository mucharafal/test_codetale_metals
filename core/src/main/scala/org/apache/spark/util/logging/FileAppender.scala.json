[{
  "comments": [{
    "author": {
      "login": "srowen"
    },
    "body": "I don't think it's worth changing as this is fine, but I think you could just write\n\n```\ncase _: IOException if markedForStop => // do nothing because ...\n```\n\n... but maybe I'm missing something about how that works.\n",
    "commit": "4684a582e2bad03ea92bdfa03b17ed933c0f6e62",
    "createdAt": "2016-01-12T11:08:50Z",
    "diffHunk": "@@ -58,20 +58,29 @@ private[spark] class FileAppender(inputStream: InputStream, file: File, bufferSi\n   protected def appendStreamToFile() {\n     try {\n       logDebug(\"Started appending thread\")\n-      openFile()\n-      val buf = new Array[Byte](bufferSize)\n-      var n = 0\n-      while (!markedForStop && n != -1) {\n-        n = inputStream.read(buf)\n-        if (n != -1) {\n-          appendToFile(buf, n)\n+      Utils.tryWithSafeFinally {\n+        openFile()\n+        val buf = new Array[Byte](bufferSize)\n+        var n = 0\n+        while (!markedForStop && n != -1) {\n+          try {\n+            n = inputStream.read(buf)\n+          } catch {\n+            case e: IOException =>"
  }],
  "prId": 10714
}]