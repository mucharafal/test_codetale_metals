[{
  "comments": [{
    "author": {
      "login": "umehrot2"
    },
    "body": "This has been defined twice in this file. I think what you meant instead is METRIC_OUTPUT_RECORDS_WRITTEN which is missing here.",
    "commit": "dd3b9a21eef37ecb216df5f21226bdc489ebdbd2",
    "createdAt": "2017-10-27T23:45:17Z",
    "diffHunk": "@@ -406,6 +406,41 @@ private[spark] class Executor(\n         task.metrics.setJvmGCTime(computeTotalGcTime() - startGCTime)\n         task.metrics.setResultSerializationTime(afterSerialization - beforeSerialization)\n \n+        // Expose task metrics using the dropwizard metrics system.\n+        // Update task metrics counters\n+        executorSource.METRIC_CPU_TIME.inc(task.metrics.executorCpuTime)\n+        executorSource.METRIC_RUN_TIME.inc(task.metrics.executorRunTime)\n+        executorSource.METRIC_JVM_GC_TIME.inc(task.metrics.jvmGCTime)\n+        executorSource.METRIC_DESERIALIZE_TIME.inc(task.metrics.executorDeserializeTime)\n+        executorSource.METRIC_DESERIALIZE_CPU_TIME.inc(task.metrics.executorDeserializeCpuTime)\n+        executorSource.METRIC_RESULT_SERIALIZE_TIME.inc(task.metrics.resultSerializationTime)\n+        executorSource.METRIC_SHUFFLE_FETCH_WAIT_TIME\n+          .inc(task.metrics.shuffleReadMetrics.fetchWaitTime)\n+        executorSource.METRIC_SHUFFLE_WRITE_TIME.inc(task.metrics.shuffleWriteMetrics.writeTime)\n+        executorSource.METRIC_SHUFFLE_TOTAL_BYTES_READ\n+          .inc(task.metrics.shuffleReadMetrics.totalBytesRead)\n+        executorSource.METRIC_SHUFFLE_REMOTE_BYTES_READ\n+          .inc(task.metrics.shuffleReadMetrics.remoteBytesRead)\n+        executorSource.METRIC_SHUFFLE_LOCAL_BYTES_READ\n+          .inc(task.metrics.shuffleReadMetrics.localBytesRead)\n+        executorSource.METRIC_SHUFFLE_RECORDS_READ\n+          .inc(task.metrics.shuffleReadMetrics.recordsRead)\n+        executorSource.METRIC_SHUFFLE_BYTES_WRITTEN\n+          .inc(task.metrics.shuffleWriteMetrics.bytesWritten)\n+        executorSource.METRIC_SHUFFLE_RECORDS_WRITTEN\n+          .inc(task.metrics.shuffleWriteMetrics.recordsWritten)\n+        executorSource.METRIC_INPUT_BYTES_READ\n+          .inc(task.metrics.inputMetrics.bytesRead)\n+        executorSource.METRIC_INPUT_RECORDS_READ\n+          .inc(task.metrics.inputMetrics.recordsRead)\n+        executorSource.METRIC_OUTPUT_BYTES_WRITTEN\n+          .inc(task.metrics.outputMetrics.bytesWritten)\n+        executorSource.METRIC_INPUT_RECORDS_READ"
  }],
  "prId": 19426
}]