[{
  "comments": [{
    "author": {
      "login": "jiangxb1987"
    },
    "body": "Maybe I'm missing something here, but do we already have a real use case for the added memory metrics here?",
    "commit": "543caf879468a3ade8350934716443207d2eaeca",
    "createdAt": "2018-02-14T10:43:59Z",
    "diffHunk": "@@ -30,4 +30,8 @@\n   int port();\n   long cacheSize();\n   int numRunningTasks();\n+  long usedOnHeapStorageMemory();",
    "line": 4
  }, {
    "author": {
      "login": "vanzin"
    },
    "body": "This information was exposed by the public method being removed by this PR, so it makes sense to add these so that people still have a way to get that data.",
    "commit": "543caf879468a3ade8350934716443207d2eaeca",
    "createdAt": "2018-02-14T10:45:18Z",
    "diffHunk": "@@ -30,4 +30,8 @@\n   int port();\n   long cacheSize();\n   int numRunningTasks();\n+  long usedOnHeapStorageMemory();",
    "line": 4
  }, {
    "author": {
      "login": "jiangxb1987"
    },
    "body": "If you are referring to `StorageStatus`.`onHeapMemUsed`/`offHeapMemUsed`/`onHeapMemRemaining`/`offHeapMemRemaining`, it makes great sense then. But I still don't quite get a few things:\r\n1. Why do we use a different name format, while we could have let them be the same as in `StorageStatus`?\r\n2. Are these information all we need to add to `SparkExecutorInfo` ? After this change, how do we expose the information of disk usage?",
    "commit": "543caf879468a3ade8350934716443207d2eaeca",
    "createdAt": "2018-02-14T11:06:31Z",
    "diffHunk": "@@ -30,4 +30,8 @@\n   int port();\n   long cacheSize();\n   int numRunningTasks();\n+  long usedOnHeapStorageMemory();",
    "line": 4
  }, {
    "author": {
      "login": "vanzin"
    },
    "body": "1. That follows the names in the public `MemoryMetrics` class from the REST API.\r\n2. We could add that, just as we could add a whole lot of other things. At some point we should look at exposing the REST API types directly through `SparkStatusTracker` instead of having these mirror types.",
    "commit": "543caf879468a3ade8350934716443207d2eaeca",
    "createdAt": "2018-02-14T11:12:09Z",
    "diffHunk": "@@ -30,4 +30,8 @@\n   int port();\n   long cacheSize();\n   int numRunningTasks();\n+  long usedOnHeapStorageMemory();",
    "line": 4
  }, {
    "author": {
      "login": "jiangxb1987"
    },
    "body": "I'm not disagreeing with you on making such changes, but I'm also worrying about users could have to change their code a lot because of the changes we made. If you don't mind, may I submit a follow up PR to minimize the gap between the `SparkExecutorInfo` and `StorageStatus`?",
    "commit": "543caf879468a3ade8350934716443207d2eaeca",
    "createdAt": "2018-02-14T11:19:17Z",
    "diffHunk": "@@ -30,4 +30,8 @@\n   int port();\n   long cacheSize();\n   int numRunningTasks();\n+  long usedOnHeapStorageMemory();",
    "line": 4
  }, {
    "author": {
      "login": "vanzin"
    },
    "body": "Sure. But users put themselves at those kind of risks by using `@DeveloperApi` methods, especially ones that have been deprecated.",
    "commit": "543caf879468a3ade8350934716443207d2eaeca",
    "createdAt": "2018-02-14T11:26:14Z",
    "diffHunk": "@@ -30,4 +30,8 @@\n   int port();\n   long cacheSize();\n   int numRunningTasks();\n+  long usedOnHeapStorageMemory();",
    "line": 4
  }, {
    "author": {
      "login": "jiangxb1987"
    },
    "body": "Agreed, the changes should be a minor issue. Thanks for explanations!",
    "commit": "543caf879468a3ade8350934716443207d2eaeca",
    "createdAt": "2018-02-14T11:30:43Z",
    "diffHunk": "@@ -30,4 +30,8 @@\n   int port();\n   long cacheSize();\n   int numRunningTasks();\n+  long usedOnHeapStorageMemory();",
    "line": 4
  }],
  "prId": 20546
}]