[{
  "comments": [{
    "author": {
      "login": "viirya"
    },
    "body": "I think `originalLen` is the maximum value of `compressedLen` here. So this should not cause buffer overflow.\n\nI go to check https://github.com/jpountz/lz4-java/blob/master/src/java/net/jpountz/lz4/LZ4BlockOutputStream.java#L192\n\nIf the compressed lengh is more the original length, it will choose `COMPRESSION_METHOD_RAW` as compress method, instead of `COMPRESSION_METHOD_LZ4`. In other words, the compressed length is never more then original length under `COMPRESSION_METHOD_LZ4`.\n",
    "commit": "e5a9abefed0dfcbeed464de56339aeaed7b966b1",
    "createdAt": "2016-10-26T04:18:09Z",
    "diffHunk": "@@ -197,7 +197,7 @@ private void refill() throws IOException {\n         readFully(buffer, originalLen);\n         break;\n       case COMPRESSION_METHOD_LZ4:\n-        if (compressedBuffer.length < originalLen) {\n+        if (compressedBuffer.length < compressedLen) {",
    "line": 5
  }, {
    "author": {
      "login": "davies"
    },
    "body": "That's true, thanks!\n",
    "commit": "e5a9abefed0dfcbeed464de56339aeaed7b966b1",
    "createdAt": "2016-10-26T17:14:47Z",
    "diffHunk": "@@ -197,7 +197,7 @@ private void refill() throws IOException {\n         readFully(buffer, originalLen);\n         break;\n       case COMPRESSION_METHOD_LZ4:\n-        if (compressedBuffer.length < originalLen) {\n+        if (compressedBuffer.length < compressedLen) {",
    "line": 5
  }],
  "prId": 15632
}]